function Vl(n,e){for(var i=0;i<e.length;i++){const o=e[i];if(typeof o!="string"&&!Array.isArray(o)){for(const s in o)if(s!=="default"&&!(s in n)){const h=Object.getOwnPropertyDescriptor(o,s);h&&Object.defineProperty(n,s,h.get?h:{enumerable:!0,get:()=>o[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const h of s)if(h.type==="childList")for(const l of h.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function i(s){const h={};return s.integrity&&(h.integrity=s.integrity),s.referrerPolicy&&(h.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?h.credentials="include":s.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(s){if(s.ep)return;s.ep=!0;const h=i(s);fetch(s.href,h)}})();var Ci,q,aa,ha,fi,is,la,ln={},ua=[],Yl=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Jt(n,e){for(var i in e)n[i]=e[i];return n}function ca(n){var e=n.parentNode;e&&e.removeChild(n)}function Re(n,e,i){var o,s,h,l={};for(h in e)h=="key"?o=e[h]:h=="ref"?s=e[h]:l[h]=e[h];if(arguments.length>2&&(l.children=arguments.length>3?Ci.call(arguments,2):i),typeof n=="function"&&n.defaultProps!=null)for(h in n.defaultProps)l[h]===void 0&&(l[h]=n.defaultProps[h]);return pi(n,l,o,s,null)}function pi(n,e,i,o,s){var h={type:n,props:e,key:i,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:s??++aa};return s==null&&q.vnode!=null&&q.vnode(h),h}function Xl(){return{current:null}}function Ei(n){return n.children}function Ie(n,e){this.props=n,this.context=e}function wi(n,e){if(e==null)return n.__?wi(n.__,n.__.__k.indexOf(n)+1):null;for(var i;e<n.__k.length;e++)if((i=n.__k[e])!=null&&i.__e!=null)return i.__e;return typeof n.type=="function"?wi(n):null}function da(n){var e,i;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((i=n.__k[e])!=null&&i.__e!=null){n.__e=n.__c.base=i.__e;break}return da(n)}}function gr(n){(!n.__d&&(n.__d=!0)&&fi.push(n)&&!un.__r++||is!==q.debounceRendering)&&((is=q.debounceRendering)||setTimeout)(un)}function un(){for(var n;un.__r=fi.length;)n=fi.sort(function(e,i){return e.__v.__b-i.__v.__b}),fi=[],n.some(function(e){var i,o,s,h,l,c;e.__d&&(l=(h=(i=e).__v).__e,(c=i.__P)&&(o=[],(s=Jt({},h)).__v=h.__v+1,Sr(c,h,s,i.__n,c.ownerSVGElement!==void 0,h.__h!=null?[l]:null,o,l??wi(h),h.__h),ma(o,h),h.__e!=l&&da(h)))})}function fa(n,e,i,o,s,h,l,c,d,_){var f,m,y,w,b,C,S,z=o&&o.__k||ua,x=z.length;for(i.__k=[],f=0;f<e.length;f++)if((w=i.__k[f]=(w=e[f])==null||typeof w=="boolean"?null:typeof w=="string"||typeof w=="number"||typeof w=="bigint"?pi(null,w,null,null,w):Array.isArray(w)?pi(Ei,{children:w},null,null,null):w.__b>0?pi(w.type,w.props,w.key,w.ref?w.ref:null,w.__v):w)!=null){if(w.__=i,w.__b=i.__b+1,(y=z[f])===null||y&&w.key==y.key&&w.type===y.type)z[f]=void 0;else for(m=0;m<x;m++){if((y=z[m])&&w.key==y.key&&w.type===y.type){z[m]=void 0;break}y=null}Sr(n,w,y=y||ln,s,h,l,c,d,_),b=w.__e,(m=w.ref)&&y.ref!=m&&(S||(S=[]),y.ref&&S.push(y.ref,null,w),S.push(m,w.__c||b,w)),b!=null?(C==null&&(C=b),typeof w.type=="function"&&w.__k===y.__k?w.__d=d=pa(w,d,n):d=_a(n,w,y,z,b,d),typeof i.type=="function"&&(i.__d=d)):d&&y.__e==d&&d.parentNode!=n&&(d=wi(y))}for(i.__e=C,f=x;f--;)z[f]!=null&&va(z[f],z[f]);if(S)for(f=0;f<S.length;f++)ga(S[f],S[++f],S[++f])}function pa(n,e,i){for(var o,s=n.__k,h=0;s&&h<s.length;h++)(o=s[h])&&(o.__=n,e=typeof o.type=="function"?pa(o,e,i):_a(i,o,o,s,o.__e,e));return e}function cn(n,e){return e=e||[],n==null||typeof n=="boolean"||(Array.isArray(n)?n.some(function(i){cn(i,e)}):e.push(n)),e}function _a(n,e,i,o,s,h){var l,c,d;if(e.__d!==void 0)l=e.__d,e.__d=void 0;else if(i==null||s!=h||s.parentNode==null)t:if(h==null||h.parentNode!==n)n.appendChild(s),l=null;else{for(c=h,d=0;(c=c.nextSibling)&&d<o.length;d+=1)if(c==s)break t;n.insertBefore(s,h),l=h}return l!==void 0?l:s.nextSibling}function Hl(n,e,i,o,s){var h;for(h in i)h==="children"||h==="key"||h in e||dn(n,h,null,i[h],o);for(h in e)s&&typeof e[h]!="function"||h==="children"||h==="key"||h==="value"||h==="checked"||i[h]===e[h]||dn(n,h,e[h],i[h],o)}function ns(n,e,i){e[0]==="-"?n.setProperty(e,i):n[e]=i==null?"":typeof i!="number"||Yl.test(e)?i:i+"px"}function dn(n,e,i,o,s){var h;t:if(e==="style")if(typeof i=="string")n.style.cssText=i;else{if(typeof o=="string"&&(n.style.cssText=o=""),o)for(e in o)i&&e in i||ns(n.style,e,"");if(i)for(e in i)o&&i[e]===o[e]||ns(n.style,e,i[e])}else if(e[0]==="o"&&e[1]==="n")h=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in n?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+h]=i,i?o||n.addEventListener(e,h?os:rs,h):n.removeEventListener(e,h?os:rs,h);else if(e!=="dangerouslySetInnerHTML"){if(s)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in n)try{n[e]=i??"";break t}catch{}typeof i=="function"||(i==null||i===!1&&e.indexOf("-")==-1?n.removeAttribute(e):n.setAttribute(e,i))}}function rs(n){this.l[n.type+!1](q.event?q.event(n):n)}function os(n){this.l[n.type+!0](q.event?q.event(n):n)}function Sr(n,e,i,o,s,h,l,c,d){var _,f,m,y,w,b,C,S,z,x,M,k,B,O,I,F=e.type;if(e.constructor!==void 0)return null;i.__h!=null&&(d=i.__h,c=e.__e=i.__e,e.__h=null,h=[c]),(_=q.__b)&&_(e);try{t:if(typeof F=="function"){if(S=e.props,z=(_=F.contextType)&&o[_.__c],x=_?z?z.props.value:_.__:o,i.__c?C=(f=e.__c=i.__c).__=f.__E:("prototype"in F&&F.prototype.render?e.__c=f=new F(S,x):(e.__c=f=new Ie(S,x),f.constructor=F,f.render=ql),z&&z.sub(f),f.props=S,f.state||(f.state={}),f.context=x,f.__n=o,m=f.__d=!0,f.__h=[],f._sb=[]),f.__s==null&&(f.__s=f.state),F.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=Jt({},f.__s)),Jt(f.__s,F.getDerivedStateFromProps(S,f.__s))),y=f.props,w=f.state,m)F.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(F.getDerivedStateFromProps==null&&S!==y&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(S,x),!f.__e&&f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(S,f.__s,x)===!1||e.__v===i.__v){for(f.props=S,f.state=f.__s,e.__v!==i.__v&&(f.__d=!1),f.__v=e,e.__e=i.__e,e.__k=i.__k,e.__k.forEach(function(W){W&&(W.__=e)}),M=0;M<f._sb.length;M++)f.__h.push(f._sb[M]);f._sb=[],f.__h.length&&l.push(f);break t}f.componentWillUpdate!=null&&f.componentWillUpdate(S,f.__s,x),f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(y,w,b)})}if(f.context=x,f.props=S,f.__v=e,f.__P=n,k=q.__r,B=0,"prototype"in F&&F.prototype.render){for(f.state=f.__s,f.__d=!1,k&&k(e),_=f.render(f.props,f.state,f.context),O=0;O<f._sb.length;O++)f.__h.push(f._sb[O]);f._sb=[]}else do f.__d=!1,k&&k(e),_=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++B<25);f.state=f.__s,f.getChildContext!=null&&(o=Jt(Jt({},o),f.getChildContext())),m||f.getSnapshotBeforeUpdate==null||(b=f.getSnapshotBeforeUpdate(y,w)),I=_!=null&&_.type===Ei&&_.key==null?_.props.children:_,fa(n,Array.isArray(I)?I:[I],e,i,o,s,h,l,c,d),f.base=e.__e,e.__h=null,f.__h.length&&l.push(f),C&&(f.__E=f.__=null),f.__e=!1}else h==null&&e.__v===i.__v?(e.__k=i.__k,e.__e=i.__e):e.__e=Gl(i.__e,e,i,o,s,h,l,d);(_=q.diffed)&&_(e)}catch(W){e.__v=null,(d||h!=null)&&(e.__e=c,e.__h=!!d,h[h.indexOf(c)]=null),q.__e(W,e,i)}}function ma(n,e){q.__c&&q.__c(e,n),n.some(function(i){try{n=i.__h,i.__h=[],n.some(function(o){o.call(i)})}catch(o){q.__e(o,i.__v)}})}function Gl(n,e,i,o,s,h,l,c){var d,_,f,m=i.props,y=e.props,w=e.type,b=0;if(w==="svg"&&(s=!0),h!=null){for(;b<h.length;b++)if((d=h[b])&&"setAttribute"in d==!!w&&(w?d.localName===w:d.nodeType===3)){n=d,h[b]=null;break}}if(n==null){if(w===null)return document.createTextNode(y);n=s?document.createElementNS("http://www.w3.org/2000/svg",w):document.createElement(w,y.is&&y),h=null,c=!1}if(w===null)m===y||c&&n.data===y||(n.data=y);else{if(h=h&&Ci.call(n.childNodes),_=(m=i.props||ln).dangerouslySetInnerHTML,f=y.dangerouslySetInnerHTML,!c){if(h!=null)for(m={},b=0;b<n.attributes.length;b++)m[n.attributes[b].name]=n.attributes[b].value;(f||_)&&(f&&(_&&f.__html==_.__html||f.__html===n.innerHTML)||(n.innerHTML=f&&f.__html||""))}if(Hl(n,y,m,s,c),f)e.__k=[];else if(b=e.props.children,fa(n,Array.isArray(b)?b:[b],e,i,o,s&&w!=="foreignObject",h,l,h?h[0]:i.__k&&wi(i,0),c),h!=null)for(b=h.length;b--;)h[b]!=null&&ca(h[b]);c||("value"in y&&(b=y.value)!==void 0&&(b!==n.value||w==="progress"&&!b||w==="option"&&b!==m.value)&&dn(n,"value",b,m.value,!1),"checked"in y&&(b=y.checked)!==void 0&&b!==n.checked&&dn(n,"checked",b,m.checked,!1))}return n}function ga(n,e,i){try{typeof n=="function"?n(e):n.current=e}catch(o){q.__e(o,i)}}function va(n,e,i){var o,s;if(q.unmount&&q.unmount(n),(o=n.ref)&&(o.current&&o.current!==n.__e||ga(o,null,e)),(o=n.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(h){q.__e(h,e)}o.base=o.__P=null,n.__c=void 0}if(o=n.__k)for(s=0;s<o.length;s++)o[s]&&va(o[s],e,i||typeof n.type!="function");i||n.__e==null||ca(n.__e),n.__=n.__e=n.__d=void 0}function ql(n,e,i){return this.constructor(n,i)}function Tr(n,e,i){var o,s,h;q.__&&q.__(n,e),s=(o=typeof i=="function")?null:i&&i.__k||e.__k,h=[],Sr(e,n=(!o&&i||e).__k=Re(Ei,null,[n]),s||ln,ln,e.ownerSVGElement!==void 0,!o&&i?[i]:s?null:e.firstChild?Ci.call(e.childNodes):null,h,!o&&i?i:s?s.__e:e.firstChild,o),ma(h,n)}function Dr(n,e){Tr(n,e,Dr)}function ya(n,e,i){var o,s,h,l=Jt({},n.props);for(h in e)h=="key"?o=e[h]:h=="ref"?s=e[h]:l[h]=e[h];return arguments.length>2&&(l.children=arguments.length>3?Ci.call(arguments,2):i),pi(n.type,l,o||n.key,s||n.ref,null)}function zr(n,e){var i={__c:e="__cC"+la++,__:n,Consumer:function(o,s){return o.children(s)},Provider:function(o){var s,h;return this.getChildContext||(s=[],(h={})[e]=this,this.getChildContext=function(){return h},this.shouldComponentUpdate=function(l){this.props.value!==l.value&&s.some(gr)},this.sub=function(l){s.push(l);var c=l.componentWillUnmount;l.componentWillUnmount=function(){s.splice(s.indexOf(l),1),c&&c.call(l)}}),o.children}};return i.Provider.__=i.Consumer.contextType=i}Ci=ua.slice,q={__e:function(n,e,i,o){for(var s,h,l;e=e.__;)if((s=e.__c)&&!s.__)try{if((h=s.constructor)&&h.getDerivedStateFromError!=null&&(s.setState(h.getDerivedStateFromError(n)),l=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(n,o||{}),l=s.__d),l)return s.__E=s}catch(c){n=c}throw n}},aa=0,ha=function(n){return n!=null&&n.constructor===void 0},Ie.prototype.setState=function(n,e){var i;i=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Jt({},this.state),typeof n=="function"&&(n=n(Jt({},i),this.props)),n&&Jt(i,n),n!=null&&this.__v&&(e&&this._sb.push(e),gr(this))},Ie.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),gr(this))},Ie.prototype.render=Ei,fi=[],un.__r=0,la=0;const $l=Object.freeze(Object.defineProperty({__proto__:null,Component:Ie,Fragment:Ei,cloneElement:ya,createContext:zr,createElement:Re,createRef:Xl,h:Re,hydrate:Dr,get isValidElement(){return ha},get options(){return q},render:Tr,toChildArray:cn},Symbol.toStringTag,{value:"Module"}));var Kl=0;function dt(n,e,i,o,s){var h,l,c={};for(l in e)l=="ref"?h=e[l]:c[l]=e[l];var d={type:n,props:c,key:i,ref:h,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Kl,__source:s,__self:o};if(typeof n=="function"&&(h=n.defaultProps))for(l in h)c[l]===void 0&&(c[l]=h[l]);return q.vnode&&q.vnode(d),d}var Jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ql(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function wa(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var i=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(n).forEach(function(o){var s=Object.getOwnPropertyDescriptor(n,o);Object.defineProperty(i,o,s.get?s:{enumerable:!0,get:function(){return n[o]}})}),i}var Ne={};const tu=wa($l);var eu={};function xa(n,e){for(var i in e)n[i]=e[i];return n}function Ar(n,e,i){var o=/(?:\?([^#]*))?(#.*)?$/,s=n.match(o),h={},l;if(s&&s[1])for(var c=s[1].split("&"),d=0;d<c.length;d++){var _=c[d].split("=");h[decodeURIComponent(_[0])]=decodeURIComponent(_.slice(1).join("="))}n=vr(n.replace(o,"")),e=vr(e||"");for(var f=Math.max(n.length,e.length),m=0;m<f;m++)if(e[m]&&e[m].charAt(0)===":"){var y=e[m].replace(/(^:|[+*?]+$)/g,""),w=(e[m].match(/[+*?]+$/)||eu)[0]||"",b=~w.indexOf("+"),C=~w.indexOf("*"),S=n[m]||"";if(!S&&!C&&(w.indexOf("?")<0||b)){l=!1;break}if(h[y]=decodeURIComponent(S),b||C){h[y]=n.slice(m).map(decodeURIComponent).join("/");break}}else if(e[m]!==n[m]){l=!1;break}return i.default!==!0&&l===!1?!1:h}function iu(n,e){return n.rank<e.rank?1:n.rank>e.rank?-1:n.index-e.index}function nu(n,e){return n.index=e,n.rank=su(n),n.props}function vr(n){return n.replace(/(^\/+|\/+$)/g,"").split("/")}function ru(n){return n.charAt(0)==":"?1+"*+?".indexOf(n.charAt(n.length-1))||4:5}function ou(n){return vr(n).map(ru).join("")}function su(n){return n.props.default?0:ou(n.props.path)}var Lt=null,_e=[],fn=[],au={};function hu(n,e){e===void 0&&(e="push"),Lt&&Lt[e]?Lt[e](n):typeof history<"u"&&history[e+"State"]&&history[e+"State"](null,null,n)}function xn(){var n;return Lt&&Lt.location?n=Lt.location:Lt&&Lt.getCurrentLocation?n=Lt.getCurrentLocation():n=typeof location<"u"?location:au,""+(n.pathname||"")+(n.search||"")}function Br(n,e){return e===void 0&&(e=!1),typeof n!="string"&&n.url&&(e=n.replace,n=n.url),lu(n)&&hu(n,e?"replace":"push"),ba(n)}function lu(n){for(var e=_e.length;e--;)if(_e[e].canRoute(n))return!0;return!1}function ba(n){for(var e=!1,i=0;i<_e.length;i++)_e[i].routeTo(n)===!0&&(e=!0);for(var o=fn.length;o--;)fn[o](n);return e}function Pa(n){if(!(!n||!n.getAttribute)){var e=n.getAttribute("href"),i=n.getAttribute("target");if(!(!e||!e.match(/^\//g)||i&&!i.match(/^_?self$/i)))return Br(e)}}function uu(n){if(!(n.ctrlKey||n.metaKey||n.altKey||n.shiftKey||n.button!==0))return Pa(n.currentTarget||n.target||this),Ma(n)}function Ma(n){return n&&(n.stopImmediatePropagation&&n.stopImmediatePropagation(),n.stopPropagation&&n.stopPropagation(),n.preventDefault()),!1}function cu(n){if(!(n.ctrlKey||n.metaKey||n.altKey||n.shiftKey||n.button!==0)){var e=n.target;do if(String(e.nodeName).toUpperCase()==="A"&&e.getAttribute("href")){if(e.hasAttribute("native"))return;if(Pa(e))return Ma(n)}while(e=e.parentNode)}}var ss=!1;function du(){ss||(typeof addEventListener=="function"&&(Lt||addEventListener("popstate",function(){ba(xn())}),addEventListener("click",cu)),ss=!0)}var Yt=function(n){function e(i){n.call(this,i),i.history&&(Lt=i.history),this.state={url:i.url||xn()},du()}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.shouldComponentUpdate=function(o){return o.static!==!0?!0:o.url!==this.props.url||o.onChange!==this.props.onChange},e.prototype.canRoute=function(o){var s=cn(this.props.children);return this.getMatchingChildren(s,o,!1).length>0},e.prototype.routeTo=function(o){this.setState({url:o});var s=this.canRoute(o);return this.updating||this.forceUpdate(),s},e.prototype.componentWillMount=function(){_e.push(this),this.updating=!0},e.prototype.componentDidMount=function(){var o=this;Lt&&(this.unlisten=Lt.listen(function(s){o.routeTo(""+(s.pathname||"")+(s.search||""))})),this.updating=!1},e.prototype.componentWillUnmount=function(){typeof this.unlisten=="function"&&this.unlisten(),_e.splice(_e.indexOf(this),1)},e.prototype.componentWillUpdate=function(){this.updating=!0},e.prototype.componentDidUpdate=function(){this.updating=!1},e.prototype.getMatchingChildren=function(o,s,h){return o.filter(nu).sort(iu).map(function(l){var c=Ar(s,l.props.path,l.props);if(c){if(h!==!1){var d={url:s,matches:c};return xa(d,c),delete d.ref,delete d.key,ya(l,d)}return l}}).filter(Boolean)},e.prototype.render=function(o,s){var h=o.children,l=o.onChange,c=s.url,d=this.getMatchingChildren(cn(h),c,!0),_=d[0]||null,f=this.previousUrl;return c!==f&&(this.previousUrl=c,typeof l=="function"&&l({router:this,url:c,previous:f,active:d,current:_})),_},e}(Ie),La=function(n){return Re("a",xa({onClick:uu},n))},Ca=function(n){return Re(n.component,n)};Yt.subscribers=fn;Yt.getCurrentUrl=xn;Yt.route=Br;Yt.Router=Yt;Yt.Route=Ca;Yt.Link=La;Yt.exec=Ar;const fu=Object.freeze(Object.defineProperty({__proto__:null,Link:La,Route:Ca,Router:Yt,default:Yt,exec:Ar,getCurrentUrl:xn,route:Br,subscribers:fn},Symbol.toStringTag,{value:"Module"})),pu=wa(fu);Object.defineProperty(Ne,"__esModule",{value:!0});var Ea=Ne.Link=Ne.Match=void 0,_u=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},yr=tu,De=pu;function mu(n,e){var i={};for(var o in n)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o]);return i}function gu(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function as(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function vu(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Ir=Ne.Match=function(n){vu(e,n);function e(){var i,o,s;gu(this,e);for(var h=arguments.length,l=Array(h),c=0;c<h;c++)l[c]=arguments[c];return s=(i=(o=as(this,n.call.apply(n,[this].concat(l))),o),o.update=function(d){o.nextUrl=d,o.setState({})},i),as(o,s)}return e.prototype.componentDidMount=function(){De.subscribers.push(this.update)},e.prototype.componentWillUnmount=function(){De.subscribers.splice(De.subscribers.indexOf(this.update)>>>0,1)},e.prototype.render=function(o){var s=this.nextUrl||(0,De.getCurrentUrl)(),h=s.replace(/\?.+$/,"");return this.nextUrl=null,o.children({url:s,path:h,matches:(0,De.exec)(h,o.path,{})!==!1})},e}(yr.Component),ka=function(e){var i=e.activeClassName,o=e.path,s=mu(e,["activeClassName","path"]);return(0,yr.h)(Ir,{path:o||s.href},function(h){var l=h.matches;return(0,yr.h)(De.Link,_u({},s,{class:[s.class||s.className,l&&i].filter(Boolean).join(" ")}))})};Ea=Ne.Link=ka;Ne.default=Ir;Ir.Link=ka;const yu="_header_19max_1",wu="_nav_19max_14",xu="_github_19max_19",bu="_logo_19max_26",Pu="_active_19max_66",ni={header:yu,nav:wu,github:xu,logo:bu,active:Pu},Mu=""+new URL("logo-DQvm3LRv.png",import.meta.url).href,Lu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNTE3OEEyQTk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNTE3OEEyQjk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTI4OTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTI5OTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+m4QGuQAAAyRJREFUeNrEl21ojWEYx895TDPbMNlBK46IUiNmPvHBSUjaqc0H8pF5+aDUKPEBqU2NhRQpX5Rv5jWlDIWlMCv7MMSWsWwmb3tpXub4XXWdPHvc9/Gc41nu+nedc7/8r/99PffLdYdDPsvkwsgkTBwsA/PADJCnzX2gHTwBt8Hl7p537/3whn04XoDZDcpBlk+9P8AFcAghzRkJwPF4zGGw0Y9QS0mAM2AnQj77FqCzrtcwB1Hk81SYojHK4DyGuQ6mhIIrBWB9Xm7ug/6B/nZrBHBegrkFxoVGpnwBMSLR9EcEcC4qb8pP14BWcBcUgewMnF3T34VqhWMFkThLJAalwnENOAKiHpJq1FZgI2AT6HZtuxZwR9GidSHtI30jOrbawxlVX78/AbNfhHlomEUJJI89O2MqeE79T8/nk8nMBm/dK576hZgmA3cp/R4l9/UeSxiHLVIlNm4nFfT0bxyuIj7LHRTKai+zdJobwMKzcZSJb0ePV5PKN+BqAAKE47UlMnERELMM3EdYP/yrd+XYb2mOiYBiQ8OQnoRBlXrl9JZix7D1pHTazu4MoyBcnYamqAjIMTR8G4FT8LuhLsexXYYjICBiqhQBvYb6fLZIJCjPypVvaOoVAW2WcasCnL2Nq82xHJNSqlCeFcDshaPK0twkAhosjZL31QYw+1rlMpWGMArl23SBsZZO58F2tlJXmjOXS+s4WGvpMiBJT/I2PInZ6lIs9/hBsNS1hS6BG0DSqmYEDRlCXQrmy50P1oDRKTSegmNbUsA0zDMwRhPJXeCE3vWLPQMvan6X8AgIa1vcR4AkGZkDR4ejJ1UHpsaVI0g2LInpOsNFUud1rhxSV+fzC9Woz2EZkWQuja7/B+jUrgtIMpy9YCW4n4K41YfzRneW5E1KJTe4B2Zq1Q5EHEtj4U3AfEzR5SVY4l7QYQPJdN2as7RKBF0BPZqqH4VgMAMBL8Byxr7y8zCZiDlnOcEKIPmUpgB5Z2ww5RdOiiRiNajUmWda5IG6WbhsyY2fx6m8gLcoJDJFkH219M3We1+cnda93pfycZpIJEL/s/wSYADmOAwAQgdpBAAAAABJRU5ErkJggg==",Cu=()=>dt("header",{class:ni.header,children:[dt("div",{class:ni.nav,children:[dt("img",{class:ni.logo,src:Mu}),dt("nav",{children:dt(Ea,{activeClassName:ni.active,href:"/",children:"Home"})})]}),dt("div",{class:ni.github,children:dt("a",{href:"https://www.github.com/JamesLMilner/terra-draw",children:dt("img",{src:Lu})})})]}),Eu="_home_13jfp_1",ku="_map_13jfp_7",Su="_loading_13jfp_75",or={home:Eu,map:ku,loading:Su};var ki,gt,sr,hs,xi=0,Sa=[],on=[],ls=q.__b,us=q.__r,cs=q.diffed,ds=q.__c,fs=q.unmount;function bn(n,e){q.__h&&q.__h(gt,n,xi||e),xi=0;var i=gt.__H||(gt.__H={__:[],__h:[]});return n>=i.__.length&&i.__.push({__V:on}),i.__[n]}function ar(n){return xi=1,Ta(Da,n)}function Ta(n,e,i){var o=bn(ki++,2);if(o.t=n,!o.__c&&(o.__=[Da(void 0,e),function(h){var l=o.__N?o.__N[0]:o.__[0],c=o.t(l,h);l!==c&&(o.__N=[c,o.__[1]],o.__c.setState({}))}],o.__c=gt,!gt.u)){gt.u=!0;var s=gt.shouldComponentUpdate;gt.shouldComponentUpdate=function(h,l,c){if(!o.__c.__H)return!0;var d=o.__c.__H.__.filter(function(f){return f.__c});if(d.every(function(f){return!f.__N}))return!s||s.call(this,h,l,c);var _=!1;return d.forEach(function(f){if(f.__N){var m=f.__[0];f.__=f.__N,f.__N=void 0,m!==f.__[0]&&(_=!0)}}),!(!_&&o.__c.props===h)&&(!s||s.call(this,h,l,c))}}return o.__N||o.__}function ps(n,e){var i=bn(ki++,3);!q.__s&&Or(i.__H,e)&&(i.__=n,i.i=e,gt.__H.__h.push(i))}function Tu(n,e){var i=bn(ki++,4);!q.__s&&Or(i.__H,e)&&(i.__=n,i.i=e,gt.__h.push(i))}function Du(n){return xi=5,Pn(function(){return{current:n}},[])}function Pn(n,e){var i=bn(ki++,7);return Or(i.__H,e)?(i.__V=n(),i.i=e,i.__h=n,i.__V):i.__}function zu(n,e){return xi=8,Pn(function(){return n},e)}function Au(){for(var n;n=Sa.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(sn),n.__H.__h.forEach(wr),n.__H.__h=[]}catch(e){n.__H.__h=[],q.__e(e,n.__v)}}q.__b=function(n){gt=null,ls&&ls(n)},q.__r=function(n){us&&us(n),ki=0;var e=(gt=n.__c).__H;e&&(sr===gt?(e.__h=[],gt.__h=[],e.__.forEach(function(i){i.__N&&(i.__=i.__N),i.__V=on,i.__N=i.i=void 0})):(e.__h.forEach(sn),e.__h.forEach(wr),e.__h=[])),sr=gt},q.diffed=function(n){cs&&cs(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(Sa.push(e)!==1&&hs===q.requestAnimationFrame||((hs=q.requestAnimationFrame)||Bu)(Au)),e.__H.__.forEach(function(i){i.i&&(i.__H=i.i),i.__V!==on&&(i.__=i.__V),i.i=void 0,i.__V=on})),sr=gt=null},q.__c=function(n,e){e.some(function(i){try{i.__h.forEach(sn),i.__h=i.__h.filter(function(o){return!o.__||wr(o)})}catch(o){e.some(function(s){s.__h&&(s.__h=[])}),e=[],q.__e(o,i.__v)}}),ds&&ds(n,e)},q.unmount=function(n){fs&&fs(n);var e,i=n.__c;i&&i.__H&&(i.__H.__.forEach(function(o){try{sn(o)}catch(s){e=s}}),i.__H=void 0,e&&q.__e(e,i.__v))};var _s=typeof requestAnimationFrame=="function";function Bu(n){var e,i=function(){clearTimeout(o),_s&&cancelAnimationFrame(e),setTimeout(n)},o=setTimeout(i,100);_s&&(e=requestAnimationFrame(i))}function sn(n){var e=gt,i=n.__c;typeof i=="function"&&(n.__c=void 0,i()),gt=e}function wr(n){var e=gt;n.__c=n.__(),gt=e}function Or(n,e){return!n||n.length!==e.length||e.some(function(i,o){return i!==n[o]})}function Da(n,e){return typeof e=="function"?e(n):e}function Qt(){return Qt=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},Qt.apply(this,arguments)}function Mt(n,e=9){const i=Math.pow(10,e);return Math.round(n*i)/i}const me=(n,e)=>{const{x:i,y:o}=n,{x:s,y:h}=e,l=s-i,c=h-o;return Math.sqrt(c*c+l*l)};let Ce=class{constructor({name:e,callback:i,unregister:o,register:s}){this.name=void 0,this.callback=void 0,this.registered=!1,this.register=void 0,this.unregister=void 0,this.name=e,this.register=()=>{this.registered||(this.registered=!0,s(i))},this.unregister=()=>{this.register&&(this.registered=!1,o(i))},this.callback=i}},Iu=class{constructor(e){this._minPixelDragDistance=void 0,this._minPixelDragDistanceDrawing=void 0,this._minPixelDragDistanceSelecting=void 0,this._lastDrawEvent=void 0,this._coordinatePrecision=void 0,this._heldKeys=new Set,this._listeners=[],this._dragState="not-dragging",this._currentModeCallbacks=void 0,this._minPixelDragDistance=typeof e.minPixelDragDistance=="number"?e.minPixelDragDistance:1,this._minPixelDragDistanceSelecting=typeof e.minPixelDragDistanceSelecting=="number"?e.minPixelDragDistanceSelecting:1,this._minPixelDragDistanceDrawing=typeof e.minPixelDragDistanceDrawing=="number"?e.minPixelDragDistanceDrawing:8,this._coordinatePrecision=typeof e.coordinatePrecision=="number"?e.coordinatePrecision:9}getButton(e){return e.button===-1?"neither":e.button===0?"left":e.button===1?"middle":e.button===2?"right":"neither"}getMapElementXYPosition(e){const i=this.getMapEventElement(),{left:o,top:s}=i.getBoundingClientRect();return{containerX:e.clientX-o,containerY:e.clientY-s}}getDrawEventFromEvent(e){const i=this.getLngLatFromEvent(e);if(!i)return null;const{lng:o,lat:s}=i,{containerX:h,containerY:l}=this.getMapElementXYPosition(e),c=this.getButton(e),d=Array.from(this._heldKeys);return{lng:Mt(o,this._coordinatePrecision),lat:Mt(s,this._coordinatePrecision),containerX:h,containerY:l,button:c,heldKeys:d}}register(e){this._currentModeCallbacks=e,this._listeners=this.getAdapterListeners(),this._listeners.forEach(i=>{i.register()})}getCoordinatePrecision(){return this._coordinatePrecision}getAdapterListeners(){return[new Ce({name:"pointerdown",callback:e=>{if(!this._currentModeCallbacks||!e.isPrimary)return;const i=this.getDrawEventFromEvent(e);i&&(this._dragState="pre-dragging",this._lastDrawEvent=i)},register:e=>{this.getMapEventElement().addEventListener("pointerdown",e)},unregister:e=>{this.getMapEventElement().removeEventListener("pointerdown",e)}}),new Ce({name:"pointermove",callback:e=>{if(!this._currentModeCallbacks||!e.isPrimary)return;e.preventDefault();const i=this.getDrawEventFromEvent(e);if(i)if(this._dragState==="not-dragging")this._currentModeCallbacks.onMouseMove(i),this._lastDrawEvent=i;else if(this._dragState==="pre-dragging"){if(!this._lastDrawEvent)return;const o={x:this._lastDrawEvent.containerX,y:this._lastDrawEvent.containerY},s={x:i.containerX,y:i.containerY},h=this._currentModeCallbacks.getState(),l=me(o,s);let c=!1;if(c=h==="drawing"?l<this._minPixelDragDistanceDrawing:h==="selecting"?l<this._minPixelDragDistanceSelecting:l<this._minPixelDragDistance,c)return;this._dragState="dragging",this._currentModeCallbacks.onDragStart(i,d=>{this.setDraggability.bind(this)(d)})}else this._dragState==="dragging"&&this._currentModeCallbacks.onDrag(i,o=>{this.setDraggability.bind(this)(o)})},register:e=>{this.getMapEventElement().addEventListener("pointermove",e)},unregister:e=>{this.getMapEventElement().removeEventListener("pointermove",e)}}),new Ce({name:"contextmenu",callback:e=>{this._currentModeCallbacks&&e.preventDefault()},register:e=>{this.getMapEventElement().addEventListener("contextmenu",e)},unregister:e=>{this.getMapEventElement().removeEventListener("contextmenu",e)}}),new Ce({name:"pointerup",callback:e=>{if(!this._currentModeCallbacks||e.target!==this.getMapEventElement()||!e.isPrimary)return;const i=this.getDrawEventFromEvent(e);i&&(this._dragState==="dragging"?this._currentModeCallbacks.onDragEnd(i,o=>{this.setDraggability.bind(this)(o)}):this._dragState!=="not-dragging"&&this._dragState!=="pre-dragging"||this._currentModeCallbacks.onClick(i),this._dragState="not-dragging",this.setDraggability(!0))},register:e=>{this.getMapEventElement().addEventListener("pointerup",e)},unregister:e=>{this.getMapEventElement().removeEventListener("pointerup",e)}}),new Ce({name:"keyup",callback:e=>{this._currentModeCallbacks&&(this._heldKeys.delete(e.key),this._currentModeCallbacks.onKeyUp({key:e.key,heldKeys:Array.from(this._heldKeys),preventDefault:()=>e.preventDefault()}))},register:e=>{this.getMapEventElement().addEventListener("keyup",e)},unregister:e=>{this.getMapEventElement().removeEventListener("keyup",e)}}),new Ce({name:"keydown",callback:e=>{this._currentModeCallbacks&&(this._heldKeys.add(e.key),this._currentModeCallbacks.onKeyDown({key:e.key,heldKeys:Array.from(this._heldKeys),preventDefault:()=>e.preventDefault()}))},register:e=>{this.getMapEventElement().addEventListener("keydown",e)},unregister:e=>{this.getMapEventElement().removeEventListener("keydown",e)}})]}unregister(){this._listeners.forEach(e=>{e.unregister()}),this.clear()}},Ou=class extends Iu{constructor(e){super(e),this._lib=void 0,this._map=void 0,this._panes={},this._container=void 0,this._layers={},this._lib=e.lib,this._map=e.map,this._container=this._map.getContainer()}createPaneStyleSheet(e,i){const o=document.createElement("style");return o.innerHTML=`.leaflet-${e}-pane {z-index: ${i+600}`,document.getElementsByTagName("head")[0].appendChild(o),this._map.createPane(e),o}clearPanes(){Object.values(this._panes).forEach(e=>{e&&e.remove()}),this._panes={}}clearLayers(){Object.values(this._layers).forEach(e=>{this._map.removeLayer(e)}),this._layers={}}styleGeoJSONLayer(e){return{pointToLayer:(i,o)=>{if(!i.properties)throw new Error("Feature has no properties");if(typeof i.properties.mode!="string")throw new Error("Feature mode is not a string");const s=(0,e[i.properties.mode])(i),h=String(s.zIndex);return this._panes[h]||(this._panes[h]=this.createPaneStyleSheet(h,s.zIndex)),this._lib.circleMarker(o,{radius:s.pointWidth,stroke:s.pointOutlineWidth||!1,color:s.pointOutlineColor,weight:s.pointOutlineWidth,fillOpacity:.8,fillColor:s.pointColor,pane:h,interactive:!1})},style:i=>{if(!i||!i.properties)return{};const o=i,s=(0,e[o.properties.mode])(o),h=String(s.zIndex);return this._panes[h]||(this._panes[h]=this.createPaneStyleSheet(h,s.zIndex)),o.geometry.type==="LineString"?{interactive:!1,color:s.lineStringColor,weight:s.lineStringWidth,pane:h}:o.geometry.type==="Polygon"?{interactive:!1,fillOpacity:s.polygonFillOpacity,fillColor:s.polygonFillColor,weight:s.polygonOutlineWidth,stroke:!0,color:s.polygonFillColor,pane:h}:{}}}}getLngLatFromEvent(e){const{containerX:i,containerY:o}=this.getMapElementXYPosition(e),s=this._map.containerPointToLatLng({x:i,y:o});return s.lng===null||isNaN(s.lng)||s.lat===null||isNaN(s.lat)?null:{lng:s.lng,lat:s.lat}}getMapEventElement(){return this._container}setDraggability(e){e?this._map.dragging.enable():this._map.dragging.disable()}project(e,i){const{x:o,y:s}=this._map.latLngToContainerPoint({lng:e,lat:i});return{x:o,y:s}}unproject(e,i){const{lng:o,lat:s}=this._map.containerPointToLatLng({x:e,y:i});return{lng:o,lat:s}}setCursor(e){e==="unset"?this.getMapEventElement().style.removeProperty("cursor"):this.getMapEventElement().style.cursor=e}setDoubleClickToZoom(e){e?this._map.doubleClickZoom.enable():this._map.doubleClickZoom.disable()}render(e,i){e.created.forEach(o=>{this._layers[o.id]=this._lib.geoJSON(o,this.styleGeoJSONLayer(i)),this._map.addLayer(this._layers[o.id])}),e.deletedIds.forEach(o=>{this._map.removeLayer(this._layers[o])}),e.updated.forEach(o=>{this._map.removeLayer(this._layers[o.id]),this._layers[o.id]=this._lib.geoJSON(o,this.styleGeoJSONLayer(i)),this._map.addLayer(this._layers[o.id])})}clear(){this._currentModeCallbacks&&(this._currentModeCallbacks.onClear(),this.clearLayers(),this.clearPanes())}register(e){super.register(e),this._currentModeCallbacks&&this._currentModeCallbacks.onReady&&this._currentModeCallbacks.onReady()}getCoordinatePrecision(){return super.getCoordinatePrecision()}unregister(){return super.unregister()}};const Fu={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};var za=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Fu[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!(!e||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!(!this.global_||!e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const bi=6378137,Ae=Math.PI*bi,Zu=[-Ae,-Ae,Ae,Ae],Ru=[-180,-85,180,85],$i=bi*Math.log(Math.tan(Math.PI/2));class Ee extends za{constructor(e){super({code:e,units:"m",extent:Zu,global:!0,worldExtent:Ru,getPointResolution:function(i,o){return i/Math.cosh(o[1]/bi)}})}}const ms=[new Ee("EPSG:3857"),new Ee("EPSG:102100"),new Ee("EPSG:102113"),new Ee("EPSG:900913"),new Ee("http://www.opengis.net/def/crs/EPSG/0/3857"),new Ee("http://www.opengis.net/gml/srs/epsg.xml#3857")],gs=[-180,-90,180,90],Nu=6378137*Math.PI/180;class fe extends za{constructor(e,i){super({code:e,units:"degrees",extent:gs,axisOrientation:i,global:!0,metersPerUnit:Nu,worldExtent:gs})}}const vs=[new fe("CRS:84"),new fe("EPSG:4326","neu"),new fe("urn:ogc:def:crs:OGC:1.3:CRS84"),new fe("urn:ogc:def:crs:OGC:2:84"),new fe("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new fe("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new fe("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let hr={};function pn(n,e,i){const o=n.getCode(),s=e.getCode();o in hr||(hr[o]={}),hr[o][s]=i}function Aa(n,e){if(e!==void 0)for(let i=0,o=n.length;i<o;++i)e[i]=n[i];else e=n.slice();return e}function ju(n){n.getCode(),pn(n,n,Aa)}function ys(n){(function(e){e.forEach(ju)})(n),n.forEach(function(e){n.forEach(function(i){e!==i&&pn(e,i,Aa)})})}var ws,xs,bs,te;ys(ms),ys(vs),ws=ms,xs=function(n,e,i){const o=n.length;i=i>1?i:2,e===void 0&&(e=i>2?n.slice():new Array(o));for(let s=0;s<o;s+=i){e[s]=Ae*n[s]/180;let h=bi*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));h>$i?h=$i:h<-$i&&(h=-$i),e[s+1]=h}return e},bs=function(n,e,i){const o=n.length;i=i>1?i:2,e===void 0&&(e=i>2?n.slice():new Array(o));for(let s=0;s<o;s+=i)e[s]=180*n[s]/Ae,e[s+1]=360*Math.atan(Math.exp(n[s+1]/bi))/Math.PI-90;return e},vs.forEach(function(n){ws.forEach(function(e){pn(n,e,xs),pn(e,n,bs)})});(function(n){n.Commit="commit",n.Provisional="provisional",n.Finish="finish"})(te||(te={}));const xr="selected",_i="midPoint";function lr(n){return!!(n&&typeof n=="object"&&n!==null&&!Array.isArray(n))}function Ps(n){if(!function(e){return typeof e=="number"&&!isNaN(new Date(e).valueOf())}(n))throw new Error("updatedAt and createdAt are not valid timestamps");return!0}var je;(function(n){n.Drawing="drawing",n.Select="select",n.Static="static",n.Render="render"})(je||(je={}));class Fr{get state(){return this._state}set state(e){throw new Error("Please use the modes lifecycle methods")}get styles(){return this._styles}set styles(e){if(typeof e!="object")throw new Error("Styling must be an object");this.onStyleChange([],"styling"),this._styles=e}registerBehaviors(e){}constructor(e){this._state=void 0,this._styles=void 0,this.behaviors=[],this.validate=void 0,this.pointerDistance=void 0,this.coordinatePrecision=void 0,this.onStyleChange=void 0,this.store=void 0,this.setDoubleClickToZoom=void 0,this.unproject=void 0,this.project=void 0,this.setCursor=void 0,this.projection=void 0,this.type=je.Drawing,this.mode="base",this._state="unregistered",this._styles=e&&e.styles?Qt({},e.styles):{},this.pointerDistance=e&&e.pointerDistance||40,this.validate=e&&e.validation,this.projection=e&&e.projection||"web-mercator"}setDrawing(){if(this._state!=="started")throw new Error("Mode must be unregistered or stopped to start");this._state="drawing"}setStarted(){if(this._state!=="stopped"&&this._state!=="registered"&&this._state!=="drawing"&&this._state!=="selecting")throw new Error("Mode must be unregistered or stopped to start");this._state="started",this.setDoubleClickToZoom(!1)}setStopped(){if(this._state!=="started")throw new Error("Mode must be started to be stopped");this._state="stopped",this.setDoubleClickToZoom(!0)}register(e){if(this._state!=="unregistered")throw new Error("Can not register unless mode is unregistered");this._state="registered",this.store=e.store,this.store.registerOnChange(e.onChange),this.setDoubleClickToZoom=e.setDoubleClickToZoom,this.project=e.project,this.unproject=e.unproject,this.onSelect=e.onSelect,this.onDeselect=e.onDeselect,this.setCursor=e.setCursor,this.onStyleChange=e.onChange,this.onFinish=e.onFinish,this.coordinatePrecision=e.coordinatePrecision,this.registerBehaviors({mode:e.mode,store:this.store,project:this.project,unproject:this.unproject,pointerDistance:this.pointerDistance,coordinatePrecision:e.coordinatePrecision,projection:this.projection})}validateFeature(e){if(this._state==="unregistered")throw new Error("Mode must be registered");const i=function(o,s){let h;if(lr(o))if(o.id==null)h="Feature has no id";else if(typeof o.id!="string"&&typeof o.id!="number")h="Feature must be string or number as per GeoJSON spec";else if(s(o.id))if(lr(o.geometry))if(lr(o.properties))if(typeof o.geometry.type=="string"&&["Polygon","LineString","Point"].includes(o.geometry.type))if(Array.isArray(o.geometry.coordinates)){if(!o.properties.mode||typeof o.properties.mode!="string")throw new Error("Feature does not have a valid mode property")}else h="Feature coordinates is not an array";else h="Feature is not Point, LineString or Polygon";else h="Feature has no properties";else h="Feature has no geometry";else h="Feature must match the id strategy (default is UUID4)";else h="Feature is not object";if(h)throw new Error(h);return!0}(e,this.store.idStrategy.isValidId);return this.validate?this.validate(e,{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:te.Provisional}):i}onFinish(e,i){}onDeselect(e){}onSelect(e){}onKeyDown(e){}onKeyUp(e){}onMouseMove(e){}onClick(e){}onDragStart(e,i){}onDrag(e,i){}onDragEnd(e,i){}getHexColorStylingValue(e,i,o){return this.getStylingValue(e,i,o)}getNumericStylingValue(e,i,o){return this.getStylingValue(e,i,o)}getStylingValue(e,i,o){return e===void 0?i:typeof e=="function"?e(o):e}}class Wu extends Fr{constructor(...e){super(...e),this.type=je.Select}}function Ba(n,e){const i=_=>_*Math.PI/180,o=i(n[1]),s=i(n[0]),h=i(e[1]),l=h-o,c=i(e[0])-s,d=Math.sin(l/2)*Math.sin(l/2)+Math.cos(o)*Math.cos(h)*Math.sin(c/2)*Math.sin(c/2);return 2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d))*6371e3/1e3}const Ia=63710088e-1;function mi(n){return n%360*Math.PI/180}function Uu(n){return n%(2*Math.PI)*180/Math.PI}const Ms=57.29577951308232,Ls=.017453292519943295,_n=6378137,yt=(n,e)=>({x:n===0?0:n*Ls*_n,y:e===0?0:Math.log(Math.tan(Math.PI/4+e*Ls/2))*_n}),Oe=(n,e)=>({lng:n===0?0:Ms*(n/_n),lat:e===0?0:(2*Math.atan(Math.exp(e/_n))-Math.PI/2)*Ms});function Vu(n){const e={epsilon:0};let i;if(n.geometry.type==="Polygon")i=n.geometry.coordinates;else{if(n.geometry.type!=="LineString")throw new Error("Self intersects only accepts Polygons and LineStrings");i=[n.geometry.coordinates]}const o=[];for(let l=0;l<i.length;l++)for(let c=0;c<i[l].length-1;c++)for(let d=0;d<i.length;d++)for(let _=0;_<i[d].length-1;_++)h(l,c,d,_);return o.length>0;function s(l){return l<0-e.epsilon||l>1+e.epsilon}function h(l,c,d,_){const f=i[l][c],m=i[l][c+1],y=i[d][_],w=i[d][_+1],b=function(z,x,M,k){if(Ki(z,M)||Ki(z,k)||Ki(x,M)||Ki(k,M))return null;const B=z[0],O=z[1],I=x[0],F=x[1],W=M[0],V=M[1],Y=k[0],G=k[1],X=(B-I)*(V-G)-(O-F)*(W-Y);return X===0?null:[((B*F-O*I)*(W-Y)-(B-I)*(W*G-V*Y))/X,((B*F-O*I)*(V-G)-(O-F)*(W*G-V*Y))/X]}(f,m,y,w);if(b===null)return;let C,S;C=m[0]!==f[0]?(b[0]-f[0])/(m[0]-f[0]):(b[1]-f[1])/(m[1]-f[1]),S=w[0]!==y[0]?(b[0]-y[0])/(w[0]-y[0]):(b[1]-y[1])/(w[1]-y[1]),s(C)||s(S)||(b.toString(),o.push(b))}}function Ki(n,e){return n[0]===e[0]&&n[1]===e[1]}function Yu(n,e){return n.length===2&&typeof n[0]=="number"&&typeof n[1]=="number"&&n[0]!==1/0&&n[1]!==1/0&&(o=n[0])>=-180&&o<=180&&(i=n[1])>=-90&&i<=90&&Cs(n[0])<=e&&Cs(n[1])<=e;var i,o}function Cs(n){let e=1,i=0;for(;Math.round(n*e)/e!==n;)e*=10,i++;return i}class Xt{constructor({store:e,mode:i,project:o,unproject:s,pointerDistance:h,coordinatePrecision:l,projection:c}){this.store=void 0,this.mode=void 0,this.project=void 0,this.unproject=void 0,this.pointerDistance=void 0,this.coordinatePrecision=void 0,this.projection=void 0,this.store=e,this.mode=i,this.project=o,this.unproject=s,this.pointerDistance=h,this.coordinatePrecision=l,this.projection=c}}function Oa({unproject:n,point:e,pointerDistance:i}){const o=i/2,{x:s,y:h}=e;return{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[n(s-o,h-o),n(s+o,h-o),n(s+o,h+o),n(s-o,h+o),n(s-o,h-o)].map(l=>[l.lng,l.lat])]}}}class Xu extends Xt{constructor(e){super(e)}create(e){const{containerX:i,containerY:o}=e;return Oa({unproject:this.unproject,point:{x:i,y:o},pointerDistance:this.pointerDistance})}}class Hu extends Xt{constructor(e){super(e)}measure(e,i){const{x:o,y:s}=this.project(i[0],i[1]);return me({x:o,y:s},{x:e.containerX,y:e.containerY})}}function Gu({x:n,y:e},{x:i,y:o}){let s=Math.atan2(o-e,i-n);return s*=180/Math.PI,s>180?s-=360:s<-180&&(s+=360),s}function mn(n,e){const i=n,o=e,s=mi(i[1]),h=mi(o[1]);let l=mi(o[0]-i[0]);l>Math.PI&&(l-=2*Math.PI),l<-Math.PI&&(l+=2*Math.PI);const c=Math.log(Math.tan(h/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),d=(Uu(Math.atan2(l,c))+360)%360;return d>180?-(360-d):d}function Zr(n,e,i){let o=e;e<0&&(o=-Math.abs(o));const s=o/Ia,h=n[0]*Math.PI/180,l=mi(n[1]),c=mi(i),d=s*Math.cos(c);let _=l+d;Math.abs(_)>Math.PI/2&&(_=_>0?Math.PI-_:-Math.PI-_);const f=Math.log(Math.tan(_/2+Math.PI/4)/Math.tan(l/2+Math.PI/4)),m=Math.abs(f)>1e-11?d/f:Math.cos(l),y=[(180*(h+s*Math.sin(c)/m)/Math.PI+540)%360-180,180*_/Math.PI];return y[0]+=y[0]-n[0]>180?-360:n[0]-y[0]>180?360:0,y}function qu(n,e,i,o,s){const h=o(n[0],n[1]),l=o(e[0],e[1]),{lng:c,lat:d}=s((h.x+l.x)/2,(h.y+l.y)/2);return[Mt(c,i),Mt(d,i)]}function $u(n,e,i){const o=Zr(n,1e3*Ba(n,e)/2,mn(n,e));return[Mt(o[0],i),Mt(o[1],i)]}function Es({featureCoords:n,precision:e,unproject:i,project:o,projection:s}){const h=[];for(let l=0;l<n.length-1;l++){let c;if(s==="web-mercator")c=qu(n[l],n[l+1],e,o,i);else{if(s!=="globe")throw new Error("Invalid projection");c=$u(n[l],n[l+1],e)}h.push(c)}return h}class Ku extends Xt{constructor(e,i){super(e),this.config=void 0,this.selectionPointBehavior=void 0,this._midPoints=[],this.config=e,this.selectionPointBehavior=i}get ids(){return this._midPoints.concat()}set ids(e){}insert(e,i){const o=this.store.getGeometryCopy(e),{midPointFeatureId:s,midPointSegment:h}=this.store.getPropertiesCopy(e),l=this.store.getGeometryCopy(s),c=l.type==="Polygon"?l.coordinates[0]:l.coordinates;c.splice(h+1,0,o.coordinates),l.coordinates=l.type==="Polygon"?[c]:c,this.store.updateGeometry([{id:s,geometry:l}]),this.store.delete([...this._midPoints,...this.selectionPointBehavior.ids]),this.create(c,s,i),this.selectionPointBehavior.create(c,l.type,s)}create(e,i,o){if(!this.store.has(i))throw new Error("Store does not have feature with this id");this._midPoints=this.store.create(function(s,h,l,c,d,_){return Es({featureCoords:s,precision:l,project:c,unproject:d,projection:_}).map((f,m)=>({geometry:{type:"Point",coordinates:f},properties:h(m)}))}(e,s=>({mode:this.mode,[_i]:!0,midPointSegment:s,midPointFeatureId:i}),o,this.config.project,this.config.unproject,this.projection))}delete(){this._midPoints.length&&(this.store.delete(this._midPoints),this._midPoints=[])}getUpdated(e){if(this._midPoints.length!==0)return Es({featureCoords:e,precision:this.coordinatePrecision,project:this.config.project,unproject:this.config.unproject,projection:this.config.projection}).map((i,o)=>({id:this._midPoints[o],geometry:{type:"Point",coordinates:i}}))}}class Ju extends Xt{constructor(e){super(e),this._selectionPoints=[]}get ids(){return this._selectionPoints.concat()}set ids(e){}create(e,i,o){this._selectionPoints=this.store.create(function(s,h,l){const c=[],d=h==="Polygon"?s.length-1:s.length;for(let _=0;_<d;_++)c.push({geometry:{type:"Point",coordinates:s[_]},properties:l(_)});return c}(e,i,s=>({mode:this.mode,selectionPoint:!0,selectionPointFeatureId:o,index:s})))}delete(){this.ids.length&&(this.store.delete(this.ids),this._selectionPoints=[])}getUpdated(e){if(this._selectionPoints.length!==0)return this._selectionPoints.map((i,o)=>({id:i,geometry:{type:"Point",coordinates:e[o]}}))}getOneUpdated(e,i){if(this._selectionPoints[e]!==void 0)return{id:this._selectionPoints[e],geometry:{type:"Point",coordinates:i}}}}function Fa(n,e){let i=!1;for(let l=0,c=e.length;l<c;l++){const d=e[l];for(let _=0,f=d.length,m=f-1;_<f;m=_++)(s=d[_])[1]>(o=n)[1]!=(h=d[m])[1]>o[1]&&o[0]<(h[0]-s[0])*(o[1]-s[1])/(h[1]-s[1])+s[0]&&(i=!i)}var o,s,h;return i}const Za=(n,e,i)=>{const o=h=>h*h,s=(h,l)=>o(h.x-l.x)+o(h.y-l.y);return Math.sqrt(((h,l,c)=>{const d=s(l,c);if(d===0)return s(h,l);let _=((h.x-l.x)*(c.x-l.x)+(h.y-l.y)*(c.y-l.y))/d;return _=Math.max(0,Math.min(1,_)),s(h,{x:l.x+_*(c.x-l.x),y:l.y+_*(c.y-l.y)})})(n,e,i))};class Qu extends Xt{constructor(e,i,o){super(e),this.config=void 0,this.createClickBoundingBox=void 0,this.pixelDistance=void 0,this.config=e,this.createClickBoundingBox=i,this.pixelDistance=o}find(e,i){let o,s,h,l,c=1/0,d=1/0,_=1/0;const f=this.createClickBoundingBox.create(e),m=this.store.search(f);for(let y=0;y<m.length;y++){const w=m[y],b=w.geometry;if(b.type==="Point"){if(w.properties.selectionPoint||!i&&w.properties[_i])continue;const C=this.pixelDistance.measure(e,b.coordinates);w.properties[_i]&&C<this.pointerDistance&&C<_?(_=C,h=w):!w.properties[_i]&&C<this.pointerDistance&&C<c&&(c=C,o=w)}else if(b.type==="LineString"){if(o)continue;for(let C=0;C<b.coordinates.length-1;C++){const S=b.coordinates[C],z=b.coordinates[C+1],x=Za({x:e.containerX,y:e.containerY},this.project(S[0],S[1]),this.project(z[0],z[1]));x<this.pointerDistance&&x<d&&(d=x,s=w)}}else if(b.type==="Polygon"){if(o||s)continue;Fa([e.lng,e.lat],b.coordinates)&&(l=w)}}return{clickedFeature:o||s||l,clickedMidPoint:h}}}class tc extends Xt{constructor(e,i,o,s){super(e),this.config=void 0,this.featuresAtMouseEvent=void 0,this.selectionPoints=void 0,this.midPoints=void 0,this.draggedFeatureId=null,this.dragPosition=void 0,this.config=e,this.featuresAtMouseEvent=i,this.selectionPoints=o,this.midPoints=s}startDragging(e,i){this.draggedFeatureId=i,this.dragPosition=[e.lng,e.lat]}stopDragging(){this.draggedFeatureId=null,this.dragPosition=void 0}isDragging(){return this.draggedFeatureId!==null}canDrag(e,i){const{clickedFeature:o}=this.featuresAtMouseEvent.find(e,!0);return!(!o||o.id!==i)}drag(e,i){if(!this.draggedFeatureId)return;const o=this.store.getGeometryCopy(this.draggedFeatureId),s=[e.lng,e.lat];if(o.type==="Polygon"||o.type==="LineString"){let h,l;if(o.type==="Polygon"?(h=o.coordinates[0],l=h.length-1):(h=o.coordinates,l=h.length),!this.dragPosition)return!1;for(let _=0;_<l;_++){const f=h[_],m=[this.dragPosition[0]-s[0],this.dragPosition[1]-s[1]],y=Mt(f[0]-m[0],this.config.coordinatePrecision),w=Mt(f[1]-m[1],this.config.coordinatePrecision);if(y>180||y<-180||w>90||w<-90)return!1;h[_]=[y,w]}o.type==="Polygon"&&(h[h.length-1]=[h[0][0],h[0][1]]);const c=this.selectionPoints.getUpdated(h)||[],d=this.midPoints.getUpdated(h)||[];if(i&&!i({type:"Feature",id:this.draggedFeatureId,geometry:o,properties:{}},{project:this.config.project,unproject:this.config.unproject,coordinatePrecision:this.config.coordinatePrecision,updateType:te.Provisional}))return!1;this.store.updateGeometry([{id:this.draggedFeatureId,geometry:o},...c,...d]),this.dragPosition=[e.lng,e.lat]}else o.type==="Point"&&(this.store.updateGeometry([{id:this.draggedFeatureId,geometry:{type:"Point",coordinates:s}}]),this.dragPosition=[e.lng,e.lat])}}class ec extends Xt{constructor(e,i,o,s){super(e),this.config=void 0,this.pixelDistance=void 0,this.selectionPoints=void 0,this.midPoints=void 0,this.draggedCoordinate={id:null,index:-1},this.config=e,this.pixelDistance=i,this.selectionPoints=o,this.midPoints=s}getClosestCoordinate(e,i){const o={dist:1/0,index:-1,isFirstOrLastPolygonCoord:!1};let s;if(i.type==="LineString")s=i.coordinates;else{if(i.type!=="Polygon")return o;s=i.coordinates[0]}for(let h=0;h<s.length;h++){const l=this.pixelDistance.measure(e,s[h]);if(l<this.pointerDistance&&l<o.dist){const c=i.type==="Polygon"&&(h===s.length-1||h===0);o.dist=l,o.index=c?0:h,o.isFirstOrLastPolygonCoord=c}}return o}getDraggableIndex(e,i){const o=this.store.getGeometryCopy(i),s=this.getClosestCoordinate(e,o);return s.index===-1?-1:s.index}drag(e,i,o){if(!this.draggedCoordinate.id)return!1;const s=this.draggedCoordinate.index,h=this.store.getGeometryCopy(this.draggedCoordinate.id),l=h.type==="LineString"?h.coordinates:h.coordinates[0],c=[e.lng,e.lat];if(e.lng>180||e.lng<-180||e.lat>90||e.lat<-90)return!1;if(h.type!=="Polygon"||s!==l.length-1&&s!==0)l[s]=c;else{const m=l.length-1;l[0]=c,l[m]=c}const d=this.selectionPoints.getOneUpdated(s,c),_=d?[d]:[],f=this.midPoints.getUpdated(l)||[];return!(h.type!=="Point"&&!i&&Vu({geometry:h})||o&&!o({type:"Feature",id:this.draggedCoordinate.id,geometry:h,properties:{}},{project:this.config.project,unproject:this.config.unproject,coordinatePrecision:this.config.coordinatePrecision,updateType:te.Provisional})||(this.store.updateGeometry([{id:this.draggedCoordinate.id,geometry:h},..._,...f]),0))}isDragging(){return this.draggedCoordinate.id!==null}startDragging(e,i){this.draggedCoordinate={id:e,index:i}}stopDragging(){this.draggedCoordinate={id:null,index:-1}}}function gn(n){let e=0,i=0,o=0;return(n.geometry.type==="Polygon"?n.geometry.coordinates[0].slice(0,-1):n.geometry.coordinates).forEach(s=>{e+=s[0],i+=s[1],o++},!0),[e/o,i/o]}function Ra(n,e){n[0]+=n[0]-e[0]>180?-360:e[0]-n[0]>180?360:0;const i=Ia,o=e[1]*Math.PI/180,s=n[1]*Math.PI/180,h=s-o;let l=Math.abs(n[0]-e[0])*Math.PI/180;l>Math.PI&&(l-=2*Math.PI);const c=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),d=Math.abs(c)>1e-11?h/c:Math.cos(o);return Math.sqrt(h*h+d*d*l*l)*i}function vn(n){const e=(n.geometry.type==="Polygon"?n.geometry.coordinates[0]:n.geometry.coordinates).map(i=>{const{x:o,y:s}=yt(i[0],i[1]);return[o,s]});return n.geometry.type==="Polygon"?function(i){let o=0,s=0,h=0;const l=i.length;for(let c=0;c<l-1;c++){const[d,_]=i[c],[f,m]=i[c+1],y=d*m-f*_;o+=y,s+=(d+f)*y,h+=(_+m)*y}return o/=2,s/=6*o,h/=6*o,{x:s,y:h}}(e):function(i){const o=i.length;let s=0,h=0;for(let l=0;l<o;l++){const[c,d]=i[l];s+=c,h+=d}return{x:s/o,y:h/o}}(e)}class ic extends Xt{constructor(e,i,o){super(e),this.config=void 0,this.selectionPoints=void 0,this.midPoints=void 0,this.lastBearing=void 0,this.config=e,this.selectionPoints=i,this.midPoints=o}reset(){this.lastBearing=void 0}rotate(e,i,o){const s=this.store.getGeometryCopy(i);if(s.type!=="Polygon"&&s.type!=="LineString")return;const h=[e.lng,e.lat];let l;const c={type:"Feature",geometry:s,properties:{}};if(this.config.projection==="web-mercator"){if(l=Gu(vn(c),yt(e.lng,e.lat)),!this.lastBearing)return void(this.lastBearing=l);((m,y)=>{if(y===0||y===360||y===-360)return m;const w=.017453292519943295*y,b=(m.geometry.type==="Polygon"?m.geometry.coordinates[0]:m.geometry.coordinates).map(([z,x])=>yt(z,x)),C=b.reduce((z,x)=>({x:z.x+x.x,y:z.y+x.y}),{x:0,y:0});C.x/=b.length,C.y/=b.length;const S=b.map(z=>({x:C.x+(z.x-C.x)*Math.cos(w)-(z.y-C.y)*Math.sin(w),y:C.y+(z.x-C.x)*Math.sin(w)+(z.y-C.y)*Math.cos(w)})).map(({x:z,y:x})=>[Oe(z,x).lng,Oe(z,x).lat]);m.geometry.type==="Polygon"?m.geometry.coordinates[0]=S:m.geometry.coordinates=S})(c,-(this.lastBearing-l))}else{if(this.config.projection!=="globe")throw new Error("Unsupported projection");if(l=mn(gn({geometry:s}),h),!this.lastBearing)return void(this.lastBearing=l+180);(function(m,y){if(y===0||y===360||y===-360)return m;const w=gn(m);(m.geometry.type==="Polygon"?m.geometry.coordinates[0]:m.geometry.coordinates).forEach(b=>{const C=mn(w,b)+y,S=Ra(w,b),z=Zr(w,S,C);b[0]=z[0],b[1]=z[1]})})(c,-(this.lastBearing-(l+180)))}const d=s.type==="Polygon"?s.coordinates[0]:s.coordinates;d.forEach(m=>{m[0]=Mt(m[0],this.coordinatePrecision),m[1]=Mt(m[1],this.coordinatePrecision)});const _=this.midPoints.getUpdated(d)||[],f=this.selectionPoints.getUpdated(d)||[];if(o&&!o({id:i,type:"Feature",geometry:s,properties:{}},{project:this.config.project,unproject:this.config.unproject,coordinatePrecision:this.config.coordinatePrecision,updateType:te.Provisional}))return!1;this.store.updateGeometry([{id:i,geometry:s},...f,..._]),this.projection==="web-mercator"?this.lastBearing=l:this.projection==="globe"&&(this.lastBearing=l+180)}}class nc extends Xt{constructor(e,i,o){super(e),this.config=void 0,this.selectionPoints=void 0,this.midPoints=void 0,this.lastDistance=void 0,this.config=e,this.selectionPoints=i,this.midPoints=o}reset(){this.lastDistance=void 0}scale(e,i,o){const s=this.store.getGeometryCopy(i);if(s.type!=="Polygon"&&s.type!=="LineString")return;const h=[e.lng,e.lat],l={type:"Feature",geometry:s,properties:{}};let c;const d=vn(l);if(this.config.projection==="web-mercator"){const w=yt(e.lng,e.lat);c=me(d,w)}else{if(this.config.projection!=="globe")throw new Error("Invalid projection");c=Ba(gn({geometry:s}),h)}if(!this.lastDistance)return void(this.lastDistance=c);const _=1-(this.lastDistance-c)/c;if(this.config.projection==="web-mercator"){const{lng:w,lat:b}=Oe(d.x,d.y);(function(C,S,z){if(S===1)return C;const x=(C.geometry.type==="Polygon"?C.geometry.coordinates[0]:C.geometry.coordinates).map(([B,O])=>yt(B,O)),M=yt(z[0],z[1]),k=x.map(B=>({x:M.x+(B.x-M.x)*S,y:M.y+(B.y-M.y)*S})).map(({x:B,y:O})=>[Oe(B,O).lng,Oe(B,O).lat]);C.geometry.type==="Polygon"?C.geometry.coordinates[0]=k:C.geometry.coordinates=k})(l,_,[w,b])}else this.config.projection==="globe"&&function(w,b,C,S="xy"){b===1||(w.geometry.type==="Polygon"?w.geometry.coordinates[0]:w.geometry.coordinates).forEach(z=>{const x=Ra(C,z),M=mn(C,z),k=Zr(C,x*b,M);S!=="x"&&S!=="xy"||(z[0]=k[0]),S!=="y"&&S!=="xy"||(z[1]=k[1])})}(l,_,gn(l));const f=s.type==="Polygon"?s.coordinates[0]:s.coordinates;f.forEach(w=>{w[0]=Mt(w[0],this.coordinatePrecision),w[1]=Mt(w[1],this.coordinatePrecision)});const m=this.midPoints.getUpdated(f)||[],y=this.selectionPoints.getUpdated(f)||[];if(o&&!o({id:i,type:"Feature",geometry:s,properties:{}},{project:this.config.project,unproject:this.config.unproject,coordinatePrecision:this.config.coordinatePrecision,updateType:te.Provisional}))return!1;this.store.updateGeometry([{id:i,geometry:s},...y,...m]),this.lastDistance=c}}class rc extends Xt{constructor(e,i,o,s){super(e),this.config=void 0,this.pixelDistance=void 0,this.selectionPoints=void 0,this.midPoints=void 0,this.minimumScale=1e-4,this.draggedCoordinate={id:null,index:-1},this.boundingBoxMaps={opposite:{0:4,1:5,2:6,3:7,4:0,5:1,6:2,7:3}},this.config=e,this.pixelDistance=i,this.selectionPoints=o,this.midPoints=s}getClosestCoordinate(e,i){const o={dist:1/0,index:-1,isFirstOrLastPolygonCoord:!1};let s;if(i.type==="LineString")s=i.coordinates;else{if(i.type!=="Polygon")return o;s=i.coordinates[0]}for(let h=0;h<s.length;h++){const l=this.pixelDistance.measure(e,s[h]);if(l<this.pointerDistance&&l<o.dist){const c=i.type==="Polygon"&&(h===s.length-1||h===0);o.dist=l,o.index=c?0:h,o.isFirstOrLastPolygonCoord=c}}return o}isValidDragWebMercator(e,i,o){switch(e){case 0:if(i<=0||o>=0)return!1;break;case 1:if(o>=0)return!1;break;case 2:if(i>=0||o>=0)return!1;break;case 3:if(i>=0)return!1;break;case 4:if(i>=0||o<=0)return!1;break;case 5:if(o<=0)return!1;break;case 6:if(i<=0||o<=0)return!1;break;case 7:if(i<=0)return!1}return!0}getSelectedFeatureDataWebMercator(){if(!this.draggedCoordinate.id||this.draggedCoordinate.index===-1)return null;const e=this.getFeature(this.draggedCoordinate.id);if(!e)return null;const i=this.getNormalisedCoordinates(e.geometry);return{boundingBox:this.getBBoxWebMercator(i),feature:e,updatedCoords:i,selectedCoordinate:i[this.draggedCoordinate.index]}}centerWebMercatorDrag(e){const i=this.getSelectedFeatureDataWebMercator();if(!i)return null;const{feature:o,boundingBox:s,updatedCoords:h,selectedCoordinate:l}=i,c=vn(o);if(!c)return null;const d=yt(l[0],l[1]),{closestBBoxIndex:_}=this.getIndexesWebMercator(s,d),f=yt(e.lng,e.lat);return this.scaleWebMercator({closestBBoxIndex:_,updatedCoords:h,webMercatorCursor:f,webMercatorSelected:d,webMercatorOrigin:c}),h}centerFixedWebMercatorDrag(e){const i=this.getSelectedFeatureDataWebMercator();if(!i)return null;const{feature:o,boundingBox:s,updatedCoords:h,selectedCoordinate:l}=i,c=vn(o);if(!c)return null;const d=yt(l[0],l[1]),{closestBBoxIndex:_}=this.getIndexesWebMercator(s,d),f=yt(e.lng,e.lat);return this.scaleFixedWebMercator({closestBBoxIndex:_,updatedCoords:h,webMercatorCursor:f,webMercatorSelected:d,webMercatorOrigin:c}),h}scaleFixedWebMercator({closestBBoxIndex:e,webMercatorOrigin:i,webMercatorSelected:o,webMercatorCursor:s,updatedCoords:h}){if(!this.isValidDragWebMercator(e,i.x-s.x,i.y-s.y))return null;let l=me(i,s)/me(i,o);return l<0&&(l=this.minimumScale),this.performWebMercatorScale(h,i.x,i.y,l,l),h}oppositeFixedWebMercatorDrag(e){const i=this.getSelectedFeatureDataWebMercator();if(!i)return null;const{boundingBox:o,updatedCoords:s,selectedCoordinate:h}=i,l=yt(h[0],h[1]),{oppositeBboxIndex:c,closestBBoxIndex:d}=this.getIndexesWebMercator(o,l),_={x:o[c][0],y:o[c][1]},f=yt(e.lng,e.lat);return this.scaleFixedWebMercator({closestBBoxIndex:d,updatedCoords:s,webMercatorCursor:f,webMercatorSelected:l,webMercatorOrigin:_}),s}oppositeWebMercatorDrag(e){const i=this.getSelectedFeatureDataWebMercator();if(!i)return null;const{boundingBox:o,updatedCoords:s,selectedCoordinate:h}=i,l=yt(h[0],h[1]),{oppositeBboxIndex:c,closestBBoxIndex:d}=this.getIndexesWebMercator(o,l),_={x:o[c][0],y:o[c][1]},f=yt(e.lng,e.lat);return this.scaleWebMercator({closestBBoxIndex:d,updatedCoords:s,webMercatorCursor:f,webMercatorSelected:l,webMercatorOrigin:_}),s}scaleWebMercator({closestBBoxIndex:e,webMercatorOrigin:i,webMercatorSelected:o,webMercatorCursor:s,updatedCoords:h}){const l=i.x-s.x,c=i.y-s.y;if(!this.isValidDragWebMercator(e,l,c))return null;let d=1;l!==0&&e!==1&&e!==5&&(d=1-(i.x-o.x-l)/l);let _=1;return c!==0&&e!==3&&e!==7&&(_=1-(i.y-o.y-c)/c),this.validateScale(d,_)?(d<0&&(d=this.minimumScale),_<0&&(_=this.minimumScale),this.performWebMercatorScale(h,i.x,i.y,d,_),h):null}getFeature(e){if(this.draggedCoordinate.id===null)return null;const i=this.store.getGeometryCopy(e);return i.type!=="Polygon"&&i.type!=="LineString"?null:{type:"Feature",geometry:i,properties:{}}}getNormalisedCoordinates(e){return e.type==="Polygon"?e.coordinates[0]:e.coordinates}validateScale(e,i){const o=!isNaN(e)&&i<Number.MAX_SAFE_INTEGER,s=!isNaN(i)&&i<Number.MAX_SAFE_INTEGER;return o&&s}performWebMercatorScale(e,i,o,s,h){e.forEach(l=>{const{x:c,y:d}=yt(l[0],l[1]),_=i+(c-i)*s,f=o+(d-o)*h,{lng:m,lat:y}=Oe(_,f);l[0]=m,l[1]=y})}getBBoxWebMercator(e){const i=[1/0,1/0,-1/0,-1/0];(e=e.map(c=>{const{x:d,y:_}=yt(c[0],c[1]);return[d,_]})).forEach(([c,d])=>{c<i[0]&&(i[0]=c),d<i[1]&&(i[1]=d),c>i[2]&&(i[2]=c),d>i[3]&&(i[3]=d)});const[o,s,h,l]=i;return[[o,l],[(o+h)/2,l],[h,l],[h,l+(s-l)/2],[h,s],[(o+h)/2,s],[o,s],[o,l+(s-l)/2]]}getIndexesWebMercator(e,i){let o,s=1/0;for(let h=0;h<e.length;h++){const l=me({x:i.x,y:i.y},{x:e[h][0],y:e[h][1]});l<s&&(o=h,s=l)}if(o===void 0)throw new Error("No closest coordinate found");return{oppositeBboxIndex:this.boundingBoxMaps.opposite[o],closestBBoxIndex:o}}isDragging(){return this.draggedCoordinate.id!==null}startDragging(e,i){this.draggedCoordinate={id:e,index:i}}stopDragging(){this.draggedCoordinate={id:null,index:-1}}getDraggableIndex(e,i){const o=this.store.getGeometryCopy(i),s=this.getClosestCoordinate(e,o);return s.index===-1?-1:s.index}drag(e,i,o){if(!this.draggedCoordinate.id)return!1;const s=this.getFeature(this.draggedCoordinate.id);if(!s)return!1;let h=null;if(i==="center"?h=this.centerWebMercatorDrag(e):i==="opposite"?h=this.oppositeWebMercatorDrag(e):i==="center-fixed"?h=this.centerFixedWebMercatorDrag(e):i==="opposite-fixed"&&(h=this.oppositeFixedWebMercatorDrag(e)),!h)return!1;for(let _=0;_<h.length;_++){const f=h[_];if(f[0]=Mt(f[0],this.coordinatePrecision),f[1]=Mt(f[1],this.coordinatePrecision),!Yu(f,this.coordinatePrecision))return!1}const l=this.midPoints.getUpdated(h)||[],c=this.selectionPoints.getUpdated(h)||[],d={type:s.geometry.type,coordinates:s.geometry.type==="Polygon"?[h]:h};return!(o&&!o({id:this.draggedCoordinate.id,type:"Feature",geometry:d,properties:{}},{project:this.config.project,unproject:this.config.unproject,coordinatePrecision:this.config.coordinatePrecision,updateType:te.Provisional})||(this.store.updateGeometry([{id:this.draggedCoordinate.id,geometry:d},...c,...l]),0))}}class oc extends Wu{constructor(e){var i;super(e),this.mode="select",this.allowManualDeselection=!0,this.dragEventThrottle=5,this.dragEventCount=0,this.selected=[],this.flags=void 0,this.keyEvents=void 0,this.selectionPoints=void 0,this.midPoints=void 0,this.featuresAtMouseEvent=void 0,this.pixelDistance=void 0,this.clickBoundingBox=void 0,this.dragFeature=void 0,this.dragCoordinate=void 0,this.rotateFeature=void 0,this.scaleFeature=void 0,this.dragCoordinateResizeFeature=void 0,this.cursors=void 0,this.validations={},this.flags=e&&e.flags?e.flags:{};const o={pointerOver:"move",dragStart:"move",dragEnd:"move",insertMidpoint:"crosshair"};if(this.cursors=e&&e.cursors?Qt({},o,e.cursors):o,(e==null?void 0:e.keyEvents)===null)this.keyEvents={deselect:null,delete:null,rotate:null,scale:null};else{const s={deselect:"Escape",delete:"Delete",rotate:["Control","r"],scale:["Control","s"]};this.keyEvents=e&&e.keyEvents?Qt({},s,e.keyEvents):s}if(this.dragEventThrottle=e&&e.dragEventThrottle!==void 0&&e.dragEventThrottle||5,this.allowManualDeselection=(i=e==null?void 0:e.allowManualDeselection)==null||i,e&&e.flags&&e.flags)for(const s in e.flags){const h=e.flags[s].feature;h&&h.validation&&(this.validations[s]=h.validation)}}selectFeature(e){this.select(e,!1)}setSelecting(){if(this._state!=="started")throw new Error("Mode must be started to move to selecting state");this._state="selecting"}registerBehaviors(e){this.pixelDistance=new Hu(e),this.clickBoundingBox=new Xu(e),this.featuresAtMouseEvent=new Qu(e,this.clickBoundingBox,this.pixelDistance),this.selectionPoints=new Ju(e),this.midPoints=new Ku(e,this.selectionPoints),this.rotateFeature=new ic(e,this.selectionPoints,this.midPoints),this.scaleFeature=new nc(e,this.selectionPoints,this.midPoints),this.dragFeature=new tc(e,this.featuresAtMouseEvent,this.selectionPoints,this.midPoints),this.dragCoordinate=new ec(e,this.pixelDistance,this.selectionPoints,this.midPoints),this.dragCoordinateResizeFeature=new rc(e,this.pixelDistance,this.selectionPoints,this.midPoints)}deselectFeature(){this.deselect()}deselect(){const e=this.selected.filter(i=>this.store.has(i)).map(i=>({id:i,property:xr,value:!1}));this.store.updateProperty(e),this.onDeselect(this.selected[0]),this.selected=[],this.selectionPoints.delete(),this.midPoints.delete()}deleteSelected(){this.store.delete(this.selected),this.selected=[]}onRightClick(e){if(!this.selectionPoints.ids.length)return;let i,o=1/0;if(this.selectionPoints.ids.forEach(m=>{const y=this.store.getGeometryCopy(m),w=this.pixelDistance.measure(e,y.coordinates);w<this.pointerDistance&&w<o&&(o=w,i=this.store.getPropertiesCopy(m))}),!i)return;const s=i.selectionPointFeatureId,h=i.index,l=this.store.getPropertiesCopy(s),c=this.flags[l.mode],d=this.validations[l.mode];if(!(c&&c.feature&&c.feature.coordinates&&c.feature.coordinates.deletable))return;const _=this.store.getGeometryCopy(s);let f;if(_.type==="Polygon"){if(f=_.coordinates[0],f.length<=4)return}else if(_.type==="LineString"&&(f=_.coordinates,f.length<=3))return;if(f){if(_.type==="Polygon"&&h===0||h===f.length-1?(f.shift(),f.pop(),f.push([f[0][0],f[0][1]])):f.splice(h,1),d&&!d({id:s,type:"Feature",geometry:_,properties:l},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:te.Commit}))return;this.store.delete([...this.midPoints.ids,...this.selectionPoints.ids]),this.store.updateGeometry([{id:s,geometry:_}]),this.selectionPoints.create(f,_.type,s),c&&c.feature&&c.feature.coordinates&&c.feature.coordinates.midpoints&&this.midPoints.create(f,s,this.coordinatePrecision)}}select(e,i=!0){if(this.selected[0]===e)return;const{mode:o}=this.store.getPropertiesCopy(e),s=this.flags[o];if(!s||!s.feature)return;const h=this.selected[0];if(h){if(h===e)return;this.deselect()}i&&this.setCursor(this.cursors.pointerOver),this.selected=[e],this.store.updateProperty([{id:e,property:"selected",value:!0}]),this.onSelect(e);const{type:l,coordinates:c}=this.store.getGeometryCopy(e);if(l!=="LineString"&&l!=="Polygon")return;const d=l==="LineString"?c:c[0];d&&s&&s.feature.coordinates&&(this.selectionPoints.create(d,l,e),s.feature.coordinates.midpoints&&this.midPoints.create(d,e,this.coordinatePrecision))}onLeftClick(e){const{clickedFeature:i,clickedMidPoint:o}=this.featuresAtMouseEvent.find(e,this.selected.length>0);if(this.selected.length&&o)this.midPoints.insert(o.id,this.coordinatePrecision);else if(i&&i.id)this.select(i.id,!0);else if(this.selected.length&&this.allowManualDeselection)return void this.deselect()}start(){this.setStarted(),this.setSelecting()}stop(){this.cleanUp(),this.setStarted(),this.setStopped()}onClick(e){e.button!=="right"?e.button==="left"&&this.onLeftClick(e):this.onRightClick(e)}canScale(e){return this.keyEvents.scale&&this.keyEvents.scale.every(i=>e.heldKeys.includes(i))}canRotate(e){return this.keyEvents.rotate&&this.keyEvents.rotate.every(i=>e.heldKeys.includes(i))}preventDefaultKeyEvent(e){const i=this.canRotate(e),o=this.canScale(e);(i||o)&&e.preventDefault()}onKeyDown(e){this.preventDefaultKeyEvent(e)}onKeyUp(e){if(this.preventDefaultKeyEvent(e),this.keyEvents.delete&&e.key===this.keyEvents.delete){if(!this.selected.length)return;this.onDeselect(this.selected[0]),this.deleteSelected(),this.selectionPoints.delete(),this.midPoints.delete()}else this.keyEvents.deselect&&e.key===this.keyEvents.deselect&&this.cleanUp()}cleanUp(){this.selected.length&&this.deselect()}onDragStart(e,i){if(!this.selected.length)return;const o=this.store.getPropertiesCopy(this.selected[0]),s=this.flags[o.mode];if(!(s&&s.feature&&(s.feature.draggable||s.feature.coordinates&&s.feature.coordinates.draggable||s.feature.coordinates&&s.feature.coordinates.resizable)))return;this.dragEventCount=0;const h=this.selected[0],l=this.dragCoordinate.getDraggableIndex(e,h);return s&&s.feature&&s.feature.coordinates&&(s.feature.coordinates.draggable||s.feature.coordinates.resizable)&&l!==-1?(this.setCursor(this.cursors.dragStart),s.feature.coordinates.resizable?this.dragCoordinateResizeFeature.startDragging(h,l):this.dragCoordinate.startDragging(h,l),void i(!1)):s&&s.feature&&s.feature.draggable&&this.dragFeature.canDrag(e,h)?(this.setCursor(this.cursors.dragStart),this.dragFeature.startDragging(e,h),void i(!1)):void 0}onDrag(e,i){const o=this.selected[0];if(!o)return;const s=this.store.getPropertiesCopy(o),h=this.flags[s.mode],l=(h&&h.feature&&h.feature.selfIntersectable)===!0;if(this.dragEventCount++,this.dragEventCount%this.dragEventThrottle==0)return;const c=this.validations[s.mode];if(h&&h.feature&&h.feature.rotateable&&this.canRotate(e))return i(!1),void this.rotateFeature.rotate(e,o,c);if(h&&h.feature&&h.feature.scaleable&&this.canScale(e))return i(!1),void this.scaleFeature.scale(e,o,c);if(this.dragCoordinateResizeFeature.isDragging()&&h.feature&&h.feature.coordinates&&h.feature.coordinates.resizable){if(this.projection==="globe")throw new Error("Globe is currently unsupported projection for resizable");return i(!1),void this.dragCoordinateResizeFeature.drag(e,h.feature.coordinates.resizable,c)}this.dragCoordinate.isDragging()?this.dragCoordinate.drag(e,l,c):this.dragFeature.isDragging()?this.dragFeature.drag(e,c):i(!0)}onDragEnd(e,i){this.setCursor(this.cursors.dragEnd),this.dragCoordinate.isDragging()?this.onFinish(this.selected[0],{mode:this.mode,action:"dragCoordinate"}):this.dragFeature.isDragging()?this.onFinish(this.selected[0],{mode:this.mode,action:"dragFeature"}):this.dragCoordinateResizeFeature.isDragging()&&this.onFinish(this.selected[0],{mode:this.mode,action:"dragCoordinateResize"}),this.dragCoordinate.stopDragging(),this.dragFeature.stopDragging(),this.dragCoordinateResizeFeature.stopDragging(),this.rotateFeature.reset(),this.scaleFeature.reset(),i(!0)}onMouseMove(e){if(!this.selected.length)return void this.setCursor("unset");if(this.dragFeature.isDragging())return;let i=!1;this.midPoints.ids.forEach(h=>{if(i)return;const l=this.store.getGeometryCopy(h);this.pixelDistance.measure(e,l.coordinates)<this.pointerDistance&&(i=!0)});let o=!1;if(this.selectionPoints.ids.forEach(h=>{const l=this.store.getGeometryCopy(h);this.pixelDistance.measure(e,l.coordinates)<this.pointerDistance&&(i=!1,o=!0)}),i)return void this.setCursor(this.cursors.insertMidpoint);const{clickedFeature:s}=this.featuresAtMouseEvent.find(e,!0);this.setCursor(this.selected.length>0&&(s&&s.id===this.selected[0]||o)?this.cursors.pointerOver:"unset")}styleFeature(e){const i=Qt({},{polygonFillColor:"#3f97e0",polygonOutlineColor:"#3f97e0",polygonOutlineWidth:4,polygonFillOpacity:.3,pointColor:"#3f97e0",pointOutlineColor:"#ffffff",pointOutlineWidth:0,pointWidth:6,lineStringColor:"#3f97e0",lineStringWidth:4,zIndex:0});if(e.properties.mode===this.mode&&e.geometry.type==="Point"){if(e.properties.selectionPoint)return i.pointColor=this.getHexColorStylingValue(this.styles.selectionPointColor,i.pointColor,e),i.pointOutlineColor=this.getHexColorStylingValue(this.styles.selectionPointOutlineColor,i.pointOutlineColor,e),i.pointWidth=this.getNumericStylingValue(this.styles.selectionPointWidth,i.pointWidth,e),i.pointOutlineWidth=this.getNumericStylingValue(this.styles.selectionPointOutlineWidth,2,e),i.zIndex=30,i;if(e.properties.midPoint)return i.pointColor=this.getHexColorStylingValue(this.styles.midPointColor,i.pointColor,e),i.pointOutlineColor=this.getHexColorStylingValue(this.styles.midPointOutlineColor,i.pointOutlineColor,e),i.pointWidth=this.getNumericStylingValue(this.styles.midPointWidth,4,e),i.pointOutlineWidth=this.getNumericStylingValue(this.styles.midPointOutlineWidth,2,e),i.zIndex=40,i}else if(e.properties[xr]){if(e.geometry.type==="Polygon")return i.polygonFillColor=this.getHexColorStylingValue(this.styles.selectedPolygonColor,i.polygonFillColor,e),i.polygonOutlineWidth=this.getNumericStylingValue(this.styles.selectedPolygonOutlineWidth,i.polygonOutlineWidth,e),i.polygonOutlineColor=this.getHexColorStylingValue(this.styles.selectedPolygonOutlineColor,i.polygonOutlineColor,e),i.polygonFillOpacity=this.getNumericStylingValue(this.styles.selectedPolygonFillOpacity,i.polygonFillOpacity,e),i.zIndex=10,i;if(e.geometry.type==="LineString")return i.lineStringColor=this.getHexColorStylingValue(this.styles.selectedLineStringColor,i.lineStringColor,e),i.lineStringWidth=this.getNumericStylingValue(this.styles.selectedLineStringWidth,i.lineStringWidth,e),i.zIndex=10,i;if(e.geometry.type==="Point")return i.pointWidth=this.getNumericStylingValue(this.styles.selectedPointWidth,i.pointWidth,e),i.pointColor=this.getHexColorStylingValue(this.styles.selectedPointColor,i.pointColor,e),i.pointOutlineColor=this.getHexColorStylingValue(this.styles.selectedPointOutlineColor,i.pointOutlineColor,e),i.pointOutlineWidth=this.getNumericStylingValue(this.styles.selectedPointOutlineWidth,i.pointOutlineWidth,e),i.zIndex=10,i}return i}}class sc extends Fr{constructor(...e){super(...e),this.type=je.Static,this.mode="static"}start(){}stop(){}onKeyUp(){}onKeyDown(){}onClick(){}onDragStart(){}onDrag(){}onDragEnd(){}onMouseMove(){}cleanUp(){}styleFeature(){return Qt({},{polygonFillColor:"#3f97e0",polygonOutlineColor:"#3f97e0",polygonOutlineWidth:4,polygonFillOpacity:.3,pointColor:"#3f97e0",pointOutlineColor:"#ffffff",pointOutlineWidth:0,pointWidth:6,lineStringColor:"#3f97e0",lineStringWidth:4,zIndex:0})}}function Na(n,e,i,o,s){for(;o>i;){if(o-i>600){const d=o-i+1,_=e-i+1,f=Math.log(d),m=.5*Math.exp(2*f/3),y=.5*Math.sqrt(f*m*(d-m)/d)*(_-d/2<0?-1:1);Na(n,e,Math.max(i,Math.floor(e-_*m/d+y)),Math.min(o,Math.floor(e+(d-_)*m/d+y)),s)}const h=n[e];let l=i,c=o;for(ri(n,i,e),s(n[o],h)>0&&ri(n,i,o);l<c;){for(ri(n,l,c),l++,c--;s(n[l],h)<0;)l++;for(;s(n[c],h)>0;)c--}s(n[i],h)===0?ri(n,i,c):(c++,ri(n,c,o)),c<=e&&(i=c+1),e<=c&&(o=c-1)}}function ri(n,e,i){const o=n[e];n[e]=n[i],n[i]=o}function ke(n,e){ui(n,0,n.children.length,e,n)}function ui(n,e,i,o,s){s||(s=ze([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let h=e;h<i;h++){const l=n.children[h];ci(s,n.leaf?o(l):l)}return s}function ci(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function ac(n,e){return n.minX-e.minX}function hc(n,e){return n.minY-e.minY}function ur(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function Ji(n){return n.maxX-n.minX+(n.maxY-n.minY)}function lc(n,e){const i=Math.max(n.minX,e.minX),o=Math.max(n.minY,e.minY),s=Math.min(n.maxX,e.maxX),h=Math.min(n.maxY,e.maxY);return Math.max(0,s-i)*Math.max(0,h-o)}function cr(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function Qi(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function ze(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ks(n,e,i,o,s){const h=[e,i];for(;h.length;){if((i=h.pop())-(e=h.pop())<=o)continue;const l=e+Math.ceil((i-e)/o/2)*o;Na(n,l,e,i,s),h.push(e,l,l,i)}}class uc{constructor(e){this._maxEntries=void 0,this._minEntries=void 0,this.data=void 0,this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}search(e){let i=this.data;const o=[];if(!Qi(e,i))return o;const s=this.toBBox,h=[];for(;i;){for(let l=0;l<i.children.length;l++){const c=i.children[l],d=i.leaf?s(c):c;Qi(e,d)&&(i.leaf?o.push(c):cr(e,d)?this._all(c,o):h.push(c))}i=h.pop()}return o}collides(e){let i=this.data;if(Qi(e,i)){const o=[];for(;i;){for(let s=0;s<i.children.length;s++){const h=i.children[s],l=i.leaf?this.toBBox(h):h;if(Qi(e,l)){if(i.leaf||cr(e,l))return!0;o.push(h)}}i=o.pop()}}return!1}load(e){if(e.length<this._minEntries){for(let o=0;o<e.length;o++)this.insert(e[o]);return}let i=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const o=this.data;this.data=i,i=o}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i}insert(e){this._insert(e,this.data.height-1)}clear(){this.data=ze([])}remove(e){let i=this.data;const o=this.toBBox(e),s=[],h=[];let l,c,d=!1;for(;i||s.length;){if(i||(i=s.pop(),c=s[s.length-1],l=h.pop(),d=!0),i.leaf){const _=i.children.indexOf(e);_!==-1&&(i.children.splice(_,1),s.push(i),this._condense(s))}d||i.leaf||!cr(i,o)?c?(l++,i=c.children[l],d=!1):i=null:(s.push(i),h.push(l),l=0,c=i,i=i.children[0])}}toBBox(e){return e}compareMinX(e,i){return e.minX-i.minX}compareMinY(e,i){return e.minY-i.minY}_all(e,i){const o=[];for(;e;)e.leaf?i.push(...e.children):o.push(...e.children),e=o.pop();return i}_build(e,i,o,s){const h=o-i+1;let l,c=this._maxEntries;if(h<=c)return l=ze(e.slice(i,o+1)),ke(l,this.toBBox),l;s||(s=Math.ceil(Math.log(h)/Math.log(c)),c=Math.ceil(h/Math.pow(c,s-1))),l=ze([]),l.leaf=!1,l.height=s;const d=Math.ceil(h/c),_=d*Math.ceil(Math.sqrt(c));ks(e,i,o,_,this.compareMinX);for(let f=i;f<=o;f+=_){const m=Math.min(f+_-1,o);ks(e,f,m,d,this.compareMinY);for(let y=f;y<=m;y+=d){const w=Math.min(y+d-1,m);l.children.push(this._build(e,y,w,s-1))}}return ke(l,this.toBBox),l}_chooseSubtree(e,i,o,s){for(;s.push(i),!i.leaf&&s.length-1!==o;){let c,d=1/0,_=1/0;for(let f=0;f<i.children.length;f++){const m=i.children[f],y=ur(m),w=(h=e,l=m,(Math.max(l.maxX,h.maxX)-Math.min(l.minX,h.minX))*(Math.max(l.maxY,h.maxY)-Math.min(l.minY,h.minY))-y);w<_?(_=w,d=y<d?y:d,c=m):w===_&&y<d&&(d=y,c=m)}i=c||i.children[0]}var h,l;return i}_insert(e,i,o){const s=o?e:this.toBBox(e),h=[],l=this._chooseSubtree(s,this.data,i,h);for(l.children.push(e),ci(l,s);i>=0&&h[i].children.length>this._maxEntries;)this._split(h,i),i--;this._adjustParentBBoxes(s,h,i)}_split(e,i){const o=e[i],s=o.children.length,h=this._minEntries;this._chooseSplitAxis(o,h,s);const l=this._chooseSplitIndex(o,h,s),c=ze(o.children.splice(l,o.children.length-l));c.height=o.height,c.leaf=o.leaf,ke(o,this.toBBox),ke(c,this.toBBox),i?e[i-1].children.push(c):this._splitRoot(o,c)}_splitRoot(e,i){this.data=ze([e,i]),this.data.height=e.height+1,this.data.leaf=!1,ke(this.data,this.toBBox)}_chooseSplitIndex(e,i,o){let s,h=1/0,l=1/0;for(let c=i;c<=o-i;c++){const d=ui(e,0,c,this.toBBox),_=ui(e,c,o,this.toBBox),f=lc(d,_),m=ur(d)+ur(_);f<h?(h=f,s=c,l=m<l?m:l):f===h&&m<l&&(l=m,s=c)}return s||o-i}_chooseSplitAxis(e,i,o){const s=e.leaf?this.compareMinX:ac,h=e.leaf?this.compareMinY:hc;this._allDistMargin(e,i,o,s)<this._allDistMargin(e,i,o,h)&&e.children.sort(s)}_allDistMargin(e,i,o,s){e.children.sort(s);const h=this.toBBox,l=ui(e,0,i,h),c=ui(e,o-i,o,h);let d=Ji(l)+Ji(c);for(let _=i;_<o-i;_++){const f=e.children[_];ci(l,e.leaf?h(f):f),d+=Ji(l)}for(let _=o-i-1;_>=i;_--){const f=e.children[_];ci(c,e.leaf?h(f):f),d+=Ji(c)}return d}_adjustParentBBoxes(e,i,o){for(let s=o;s>=0;s--)ci(i[s],e)}_condense(e){for(let i,o=e.length-1;o>=0;o--)e[o].children.length===0?o>0?(i=e[o-1].children,i.splice(i.indexOf(e[o]),1)):this.clear():ke(e[o],this.toBBox)}}class cc{constructor(e){this.tree=void 0,this.idToNode=void 0,this.nodeToId=void 0,this.tree=new uc(e&&e.maxEntries?e.maxEntries:9),this.idToNode=new Map,this.nodeToId=new Map}setMaps(e,i){this.idToNode.set(e.id,i),this.nodeToId.set(i,e.id)}toBBox(e){const i=[],o=[];let s;if(e.geometry.type==="Polygon")s=e.geometry.coordinates[0];else if(e.geometry.type==="LineString")s=e.geometry.coordinates;else{if(e.geometry.type!=="Point")throw new Error("Not a valid feature to turn into a bounding box");s=[e.geometry.coordinates]}for(let c=0;c<s.length;c++)o.push(s[c][1]),i.push(s[c][0]);const h=Math.min(...o),l=Math.max(...o);return{minX:Math.min(...i),minY:h,maxX:Math.max(...i),maxY:l}}insert(e){if(this.idToNode.get(String(e.id)))throw new Error("Feature already exists");const i=this.toBBox(e);this.setMaps(e,i),this.tree.insert(i)}load(e){const i=[],o=new Set;e.forEach(s=>{const h=this.toBBox(s);if(this.setMaps(s,h),o.has(String(s.id)))throw new Error(`Duplicate feature ID found ${s.id}`);o.add(String(s.id)),i.push(h)}),this.tree.load(i)}update(e){this.remove(e.id);const i=this.toBBox(e);this.setMaps(e,i),this.tree.insert(i)}remove(e){const i=this.idToNode.get(e);if(!i)throw new Error(`${e} not inserted into the spatial index`);this.tree.remove(i)}clear(){this.tree.clear()}search(e){return this.tree.search(this.toBBox(e)).map(i=>this.nodeToId.get(i))}collides(e){return this.tree.collides(this.toBBox(e))}}const dc={getId:()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=16*Math.random()|0;return(n=="x"?e:3&e|8).toString(16)}),isValidId:n=>typeof n=="string"&&n.length===36};class fc{constructor(e){this.idStrategy=void 0,this.tracked=void 0,this.spatialIndex=void 0,this.store=void 0,this._onChange=()=>{},this.store={},this.spatialIndex=new cc,this.tracked=!e||e.tracked!==!1,this.idStrategy=e&&e.idStrategy?e.idStrategy:dc}clone(e){return JSON.parse(JSON.stringify(e))}getId(){return this.idStrategy.getId()}has(e){return!!this.store[e]}load(e,i){if(e.length===0)return;const o=this.clone(e);o.forEach(h=>{h.id==null&&(h.id=this.idStrategy.getId()),this.tracked&&(h.properties.createdAt?Ps(h.properties.createdAt):h.properties.createdAt=+new Date,h.properties.updatedAt?Ps(h.properties.updatedAt):h.properties.updatedAt=+new Date)});const s=[];o.forEach(h=>{const l=h.id;if(i&&!i(h))throw new Error(`Feature ${l} is not valid: ${JSON.stringify(h)}`);if(this.has(l))throw new Error(`Feature already exists with this id: ${l}`);this.store[l]=h,s.push(l)}),this.spatialIndex.load(o),this._onChange(s,"create")}search(e,i){const o=this.spatialIndex.search(e).map(s=>this.store[s]);return this.clone(i?o.filter(i):o)}registerOnChange(e){this._onChange=(i,o)=>{e(i,o)}}getGeometryCopy(e){const i=this.store[e];if(!i)throw new Error(`No feature with this id (${e}), can not get geometry copy`);return this.clone(i.geometry)}getPropertiesCopy(e){const i=this.store[e];if(!i)throw new Error(`No feature with this id (${e}), can not get properties copy`);return this.clone(i.properties)}updateProperty(e){const i=[];e.forEach(({id:o,property:s,value:h})=>{const l=this.store[o];if(!l)throw new Error(`No feature with this (${o}), can not update geometry`);i.push(o),l.properties[s]=h,this.tracked&&(l.properties.updatedAt=+new Date)}),this._onChange&&this._onChange(i,"update")}updateGeometry(e){const i=[];e.forEach(({id:o,geometry:s})=>{i.push(o);const h=this.store[o];if(!h)throw new Error(`No feature with this (${o}), can not update geometry`);h.geometry=this.clone(s),this.spatialIndex.update(h),this.tracked&&(h.properties.updatedAt=+new Date)}),this._onChange&&this._onChange(i,"update")}create(e){const i=[];return e.forEach(({geometry:o,properties:s})=>{let h,l=Qt({},s);this.tracked&&(h=+new Date,s?(l.createdAt=typeof s.createdAt=="number"?s.createdAt:h,l.updatedAt=typeof s.updatedAt=="number"?s.updatedAt:h):l={createdAt:h,updatedAt:h});const c=this.getId(),d={id:c,type:"Feature",geometry:o,properties:l};this.store[c]=d,this.spatialIndex.insert(d),i.push(c)}),this._onChange&&this._onChange([...i],"create"),i}delete(e){e.forEach(i=>{if(!this.store[i])throw new Error("No feature with this id, can not delete");delete this.store[i],this.spatialIndex.remove(i)}),this._onChange&&this._onChange([...e],"delete")}copyAll(){return this.clone(Object.keys(this.store).map(e=>this.store[e]))}clear(){this.store={},this.spatialIndex.clear()}size(){return Object.keys(this.store).length}}var pc={__proto__:null,TerraDrawBaseDrawMode:Fr};class _c{constructor(e){this._modes=void 0,this._mode=void 0,this._adapter=void 0,this._enabled=!1,this._store=void 0,this._eventListeners=void 0,this._instanceSelectMode=void 0,this._adapter=e.adapter,this._mode=new sc;const i=new Set,o=e.modes.reduce((f,m)=>{if(i.has(m.mode))throw new Error(`There is already a ${m.mode} mode provided`);return i.add(m.mode),f[m.mode]=m,f},{}),s=Object.keys(o);if(s.length===0)throw new Error("No modes provided");s.forEach(f=>{if(o[f].type===je.Select){if(this._instanceSelectMode)throw new Error("only one type of select mode can be provided");this._instanceSelectMode=f}}),this._modes=Qt({},o,{static:this._mode}),this._eventListeners={change:[],select:[],deselect:[],finish:[],ready:[]},this._store=new fc({tracked:!!e.tracked,idStrategy:e.idStrategy?e.idStrategy:void 0});const h=f=>{const m=[],y=this._store.copyAll().filter(w=>!f.includes(w.id)||(m.push(w),!1));return{changed:m,unchanged:y}},l=(f,m)=>{this._enabled&&this._eventListeners.finish.forEach(y=>{y(f,m)})},c=(f,m)=>{if(!this._enabled)return;this._eventListeners.change.forEach(b=>{b(f,m)});const{changed:y,unchanged:w}=h(f);m==="create"?this._adapter.render({created:y,deletedIds:[],unchanged:w,updated:[]},this.getModeStyles()):m==="update"?this._adapter.render({created:[],deletedIds:[],unchanged:w,updated:y},this.getModeStyles()):m==="delete"?this._adapter.render({created:[],deletedIds:f,unchanged:w,updated:[]},this.getModeStyles()):m==="styling"&&this._adapter.render({created:[],deletedIds:[],unchanged:w,updated:[]},this.getModeStyles())},d=f=>{if(!this._enabled)return;this._eventListeners.select.forEach(w=>{w(f)});const{changed:m,unchanged:y}=h([f]);this._adapter.render({created:[],deletedIds:[],unchanged:y,updated:m},this.getModeStyles())},_=f=>{if(!this._enabled)return;this._eventListeners.deselect.forEach(w=>{w()});const{changed:m,unchanged:y}=h([f]);m&&this._adapter.render({created:[],deletedIds:[],unchanged:y,updated:m},this.getModeStyles())};Object.keys(this._modes).forEach(f=>{this._modes[f].register({mode:f,store:this._store,setCursor:this._adapter.setCursor.bind(this._adapter),project:this._adapter.project.bind(this._adapter),unproject:this._adapter.unproject.bind(this._adapter),setDoubleClickToZoom:this._adapter.setDoubleClickToZoom.bind(this._adapter),onChange:c,onSelect:d,onDeselect:_,onFinish:l,coordinatePrecision:this._adapter.getCoordinatePrecision()})})}checkEnabled(){if(!this._enabled)throw new Error("Terra Draw is not enabled")}getModeStyles(){const e={};return Object.keys(this._modes).forEach(i=>{e[i]=o=>this._instanceSelectMode&&o.properties[xr]?this._modes[this._instanceSelectMode].styleFeature.bind(this._modes[this._instanceSelectMode])(o):this._modes[i].styleFeature.bind(this._modes[i])(o)}),e}featuresAtLocation({lng:e,lat:i},o){const s=o&&o.pointerDistance!==void 0?o.pointerDistance:30,h=!o||o.ignoreSelectFeatures===void 0||o.ignoreSelectFeatures,l=this._adapter.unproject.bind(this._adapter),c=this._adapter.project.bind(this._adapter),d=c(e,i),_=Oa({unproject:l,point:d,pointerDistance:s});return this._store.search(_).filter(f=>{if(h&&(f.properties[_i]||f.properties.selectionPoint))return!1;if(f.geometry.type==="Point"){const m=f.geometry.coordinates,y=c(m[0],m[1]);return me(d,y)<s}if(f.geometry.type==="LineString"){const m=f.geometry.coordinates;for(let y=0;y<m.length-1;y++){const w=m[y],b=m[y+1];if(Za(d,c(w[0],w[1]),c(b[0],b[1]))<s)return!0}return!1}return!!Fa([e,i],f.geometry.coordinates)||void 0})}getSelectMode(){if(this.checkEnabled(),!this._instanceSelectMode)throw new Error("No select mode defined in instance");return this.getMode()!==this._instanceSelectMode&&this.setMode(this._instanceSelectMode),this._modes[this._instanceSelectMode]}setModeStyles(e,i){if(this.checkEnabled(),!this._modes[e])throw new Error("No mode with this name present");this._modes[e].styles=i}getSnapshot(){return this._store.copyAll()}clear(){this.checkEnabled(),this._adapter.clear()}get enabled(){return this._enabled}set enabled(e){throw new Error("Enabled is read only")}getMode(){return this._mode.mode}setMode(e){if(this.checkEnabled(),!this._modes[e])throw new Error("No mode with this name present");this._mode.stop(),this._mode=this._modes[e],this._mode.start()}removeFeatures(e){this.checkEnabled(),this._store.delete(e)}selectFeature(e){this.getSelectMode().selectFeature(e)}deselectFeature(e){this.getSelectMode().deselectFeature(e)}getFeatureId(){return this._store.getId()}hasFeature(e){return this._store.has(e)}addFeatures(e){this.checkEnabled(),e.length!==0&&this._store.load(e,i=>{if(i&&typeof i=="object"&&"properties"in i&&typeof i.properties=="object"&&i.properties!==null&&"mode"in i.properties){const o=this._modes[i.properties.mode];return!!o&&o.validateFeature.bind(o)(i)}return!1})}start(){this._enabled=!0,this._adapter.register({onReady:()=>{this._eventListeners.ready.forEach(e=>{e()})},getState:()=>this._mode.state,onClick:e=>{this._mode.onClick(e)},onMouseMove:e=>{this._mode.onMouseMove(e)},onKeyDown:e=>{this._mode.onKeyDown(e)},onKeyUp:e=>{this._mode.onKeyUp(e)},onDragStart:(e,i)=>{this._mode.onDragStart(e,i)},onDrag:(e,i)=>{this._mode.onDrag(e,i)},onDragEnd:(e,i)=>{this._mode.onDragEnd(e,i)},onClear:()=>{this._mode.cleanUp(),this._store.clear()}})}getFeaturesAtLngLat(e,i){const{lng:o,lat:s}=e;return this.featuresAtLocation({lng:o,lat:s},i)}getFeaturesAtPointerEvent(e,i){const o=this._adapter.getLngLatFromEvent.bind(this._adapter)(e);return o===null?[]:this.featuresAtLocation(o,i)}stop(){this._enabled=!1,this._adapter.unregister()}on(e,i){const o=this._eventListeners[e];o.includes(i)||o.push(i)}off(e,i){const o=this._eventListeners[e];o.includes(i)&&o.splice(o.indexOf(i),1)}}const{TerraDrawBaseDrawMode:mc}=pc;class gc extends mc{constructor(e){if(super(e),this.mode="routesnap",this.currentCoordinate=0,this.currentPointIds=[],this.pixelDistance=(i,o)=>{const{x:s,y:h}=i,{x:l,y:c}=o,d=l-s,_=c-h;return Math.sqrt(_*_+d*d)},this.routing=e.routing,this.maxPoints=e.maxPoints||1,(e==null?void 0:e.keyEvents)===null)this.keyEvents={cancel:null,finish:null};else{const i={cancel:"Escape",finish:"Enter"};this.keyEvents=e&&e.keyEvents?{...i,...e.keyEvents}:i}}measure(e,i){const{x:o,y:s}=this.project(i[0],i[1]);return this.pixelDistance({x:o,y:s},{x:e.containerX,y:e.containerY})}close(){this.currentId&&(this.currentCoordinate=0,this.currentId=void 0,this.currentPointIds=[],this.state==="drawing"&&this.setStarted())}registerBehaviors(e){}start(){this.setStarted(),this.setCursor("crosshair")}stop(){this.cleanUp(),this.setStopped(),this.setCursor("unset")}onMouseMove(e){if(this.setCursor("crosshair"),!this.currentId||this.currentCoordinate===0)return;if(this.currentId){const c=this.store.getGeometryCopy(this.currentId);if(this.measure(e,c.coordinates[c.coordinates.length-1])<this.pointerDistance){this.setCursor("pointer"),this.moveLineId&&(this.store.delete([this.moveLineId]),this.moveLineId=void 0);return}}const i=this.store.getGeometryCopy(this.currentId),o=[e.lng,e.lat];let s=this.routing.getClosestNetworkCoordinate(o);if(!s)return;const h=i.coordinates.length-1,l=this.routing.getRoute(i.coordinates[h],s);if(l)if(this.moveLineId)this.store.updateGeometry([{id:this.moveLineId,geometry:l.geometry}]);else{const[c]=this.store.create([{geometry:l.geometry,properties:{mode:this.mode,isDrawnRoute:!0}}]);this.moveLineId=c}}onClick(e){if(e.button==="right")return;this.setCursor("pointer");const i=[e.lng,e.lat];if(this.currentId){const s=this.store.getGeometryCopy(this.currentId);if(this.measure(e,s.coordinates[s.coordinates.length-1])<this.pointerDistance){this.currentCoordinate===1&&this.store.delete(this.currentPointIds),this.close();return}}let o=this.routing.getClosestNetworkCoordinate(i);if(this.currentCoordinate===0){if(o){const[s,h]=this.store.create([{geometry:{type:"LineString",coordinates:[o]},properties:{mode:this.mode,isDrawnRoute:!0}},{geometry:{type:"Point",coordinates:o},properties:{mode:this.mode,isDrawnRoute:!0}}]);this.currentId=s,this.currentPointIds.push(h),this.currentCoordinate++,this.state==="started"&&this.setDrawing()}}else if(this.currentCoordinate===1&&this.currentId&&o){const s=this.store.getGeometryCopy(this.currentId),h=this.routing.getRoute(s.coordinates[0],o);if(h){this.store.updateGeometry([{id:this.currentId,geometry:h==null?void 0:h.geometry}]);const[l]=this.store.create([{geometry:{type:"Point",coordinates:o},properties:{mode:this.mode,isDrawnRoute:!0}}]);this.currentCoordinate=2,this.currentPointIds.push(l)}if(this.maxPoints===1){this.close();return}}else if(this.currentCoordinate>1&&this.currentId&&o&&this.currentCoordinate<=this.maxPoints){const s=this.store.getGeometryCopy(this.currentId),h=s.coordinates.length-1,l=this.routing.getRoute(s.coordinates[h],o);if(l){const c={...s,coordinates:[...s.coordinates,...l.geometry.coordinates]};this.store.updateGeometry([{id:this.currentId,geometry:c}]);const[d]=this.store.create([{geometry:{type:"Point",coordinates:o},properties:{mode:this.mode,isDrawnRoute:!0}}]);this.maxPoints===this.currentCoordinate?this.close():(this.currentCoordinate++,this.currentPointIds.push(d))}}}onKeyDown(){}onKeyUp(e){e.key===this.keyEvents.cancel&&this.cleanUp(),e.key===this.keyEvents.finish&&this.close()}onDragStart(){}onDrag(){}onDragEnd(){}cleanUp(){try{this.currentId&&this.store.delete([this.currentId,...this.currentPointIds])}catch{}this.currentId=void 0,this.currentCoordinate=0,this.state==="drawing"&&this.setStarted()}styleFeature(e){const i={polygonFillColor:"#3f97e0",polygonOutlineColor:"#3f97e0",polygonOutlineWidth:4,polygonFillOpacity:.3,pointColor:"#B90E0A",pointOutlineColor:"#ffffff",pointOutlineWidth:2,pointWidth:5,lineStringColor:"#B90E0A",lineStringWidth:4,zIndex:0};return e.type==="Feature"&&e.geometry.type==="LineString"&&e.properties.mode===this.mode?(i.lineStringColor=this.styles.lineStringColor?this.styles.lineStringColor:i.lineStringColor,i.zIndex=10,i.lineStringWidth=this.styles.lineStringWidth?this.styles.lineStringWidth:i.lineStringWidth,i):(e.type==="Feature"&&e.geometry.type==="Point"&&e.properties.mode===this.mode&&(i.pointOutlineColor=this.styles.routePointColor!==void 0?this.styles.routePointColor:i.pointOutlineColor,i.pointOutlineWidth=this.styles.routePointOutlineWidth!==void 0?this.styles.routePointOutlineWidth:i.pointOutlineWidth),i)}}var bt=63710088e-1,vc={centimeters:bt*100,centimetres:bt*100,degrees:bt/111325,feet:bt*3.28084,inches:bt*39.37,kilometers:bt/1e3,kilometres:bt/1e3,meters:bt,metres:bt,miles:bt/1609.344,millimeters:bt*1e3,millimetres:bt*1e3,nauticalmiles:bt/1852,radians:1,yards:bt*1.0936};function ja(n,e,i){i===void 0&&(i={});var o={type:"Feature"};return(i.id===0||i.id)&&(o.id=i.id),i.bbox&&(o.bbox=i.bbox),o.properties=e||{},o.geometry=n,o}function yn(n,e,i){if(i===void 0&&(i={}),!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ss(n[0])||!Ss(n[1]))throw new Error("coordinates must contain numbers");var o={type:"Point",coordinates:n};return ja(o,e,i)}function yc(n,e,i){if(i===void 0&&(i={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");var o={type:"LineString",coordinates:n};return ja(o,e,i)}function Wa(n,e){e===void 0&&(e={});var i={type:"FeatureCollection"};return e.id&&(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.features=n,i}function wc(n,e){e===void 0&&(e="kilometers");var i=vc[e];if(!i)throw new Error(e+" units is invalid");return n*i}function tn(n){var e=n%360;return e*Math.PI/180}function Ss(n){return!isNaN(n)&&n!==null&&!Array.isArray(n)}function xc(n,e,i,o={}){const{progress:s,compact:h=!0}=o,l=Object.keys(n).reduce(c,{});return Object.keys(l).reduce(d,{graph:{},coordinates:{},reducedEdges:{}});function c(_,f,m,y){const w=n[f],b=Object.keys(w),C=b.length;let S;return h?C===1?S=n[b[0]][f]:C===2?S=b.some(z=>!n[z][f]):S=!0:S=!0,S&&(_[f]=w),m%1e3===0&&s&&s("compact:ends",m,y.length),_}function d(_,f,m,y){var w=Ua(f,n,l,e,i,!1,o);return _.graph[f]=w.edges,_.coordinates[f]=w.coordinates,_.reducedEdges[f]=w.reducedEdges,m%1e3===0&&s&&s("compact:nodes",m,y.length),_}}function Ua(n,e,i,o,s,h,l={}){const c=e[n];return Object.keys(c).reduce(d,{edges:{},incomingEdges:{},coordinates:{},incomingCoordinates:{},reducedEdges:{}});function d(_,f){const m=bc(n,f,e,i,o,s,h,l),y=m.weight,w=m.reverseWeight;if(m.vertexKey!==n&&((!_.edges[m.vertexKey]||_.edges[m.vertexKey]>y)&&(_.edges[m.vertexKey]=y,_.coordinates[m.vertexKey]=[o[n]].concat(m.coordinates),_.reducedEdges[m.vertexKey]=m.reducedEdge),h&&!isNaN(w)&&(!_.incomingEdges[m.vertexKey]||_.incomingEdges[m.vertexKey]>w))){_.incomingEdges[m.vertexKey]=w;var b=[o[n]].concat(m.coordinates);b.reverse(),_.incomingCoordinates[m.vertexKey]=b}return _}}function bc(n,e,i,o,s,h,l,c={}){let d=i[n][e],_=i[e][n];const f=[],m=[];let y="edgeDataReducer"in c?h[e][n]:void 0;for(;!o[e];){var w=i[e];if(!w)break;var b=Object.keys(w).filter(function(z){return z!==n})[0];if(d+=w[b],l){if(_+=i[b][e],m.indexOf(e)>=0){o[e]=i[e];break}m.push(e)}const C=h[e]&&h[e][b];"edgeDataReducer"in c&&y&&C&&(y=c.edgeDataReducer(y,C)),f.push(s[e]),n=e,e=b}return{vertexKey:e,weight:d,reverseWeight:_,coordinates:f,reducedEdge:y}}let Pc=class{constructor(e=[],i=Mc){if(this.data=e,this.length=this.data.length,this.compare=i,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],i=this.data.pop();return this.length--,this.length>0&&(this.data[0]=i,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:i,compare:o}=this,s=i[e];for(;e>0;){const h=e-1>>1,l=i[h];if(o(s,l)>=0)break;i[e]=l,e=h}i[e]=s}_down(e){const{data:i,compare:o}=this,s=this.length>>1,h=i[e];for(;e<s;){let l=(e<<1)+1,c=i[l];const d=l+1;if(d<this.length&&o(i[d],c)<0&&(l=d,c=i[d]),o(c,h)>=0)break;i[e]=c,e=l}i[e]=h}};function Mc(n,e){return n<e?-1:n>e?1:0}function Lc(n,e,i){const o={[e]:0},s=[0,[e],e],h=new Pc([s],(l,c)=>l[0]-c[0]);for(;;){const l=h.pop();if(!l)return;const c=l[0],d=l[2];if(d===i)return[l[0],l[1]];const _=n[d];Object.keys(_).forEach(function(f){var m=c+_[f];if(!(f in o)||m<o[f]){o[f]=m;const y=[m,l[1].concat([f]),f];h.push(y)}})}}function Ts(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return n.geometry.coordinates;if(n.type==="Point")return n.coordinates}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return n;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Cc(n,e,i){i===void 0&&(i={});var o=Ts(n),s=Ts(e),h=tn(s[1]-o[1]),l=tn(s[0]-o[0]),c=tn(o[1]),d=tn(s[1]),_=Math.pow(Math.sin(h/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(c)*Math.cos(d);return wc(2*Math.atan2(Math.sqrt(_),Math.sqrt(1-_)),i.units)}function br(n,e,i){if(n!==null)for(var o,s,h,l,c,d,_,f=0,m=0,y,w=n.type,b=w==="FeatureCollection",C=w==="Feature",S=b?n.features.length:1,z=0;z<S;z++){_=b?n.features[z].geometry:C?n.geometry:n,y=_?_.type==="GeometryCollection":!1,c=y?_.geometries.length:1;for(var x=0;x<c;x++){var M=0,k=0;if(l=y?_.geometries[x]:_,l!==null){d=l.coordinates;var B=l.type;switch(f=0,B){case null:break;case"Point":if(e(d,m,z,M,k)===!1)return!1;m++,M++;break;case"LineString":case"MultiPoint":for(o=0;o<d.length;o++){if(e(d[o],m,z,M,k)===!1)return!1;m++,B==="MultiPoint"&&M++}B==="LineString"&&M++;break;case"Polygon":case"MultiLineString":for(o=0;o<d.length;o++){for(s=0;s<d[o].length-f;s++){if(e(d[o][s],m,z,M,k)===!1)return!1;m++}B==="MultiLineString"&&M++,B==="Polygon"&&k++}B==="Polygon"&&M++;break;case"MultiPolygon":for(o=0;o<d.length;o++){for(k=0,s=0;s<d[o].length;s++){for(h=0;h<d[o][s].length-f;h++){if(e(d[o][s][h],m,z,M,k)===!1)return!1;m++}k++}M++}break;case"GeometryCollection":for(o=0;o<l.geometries.length;o++)if(br(l.geometries[o],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ec(n,e){if(n.type==="Feature")e(n,0);else if(n.type==="FeatureCollection")for(var i=0;i<n.features.length&&e(n.features[i],i)!==!1;i++);}function kc(n){var e=[];return n.type==="FeatureCollection"?Ec(n,function(i){br(i,function(o){e.push(yn(o,i.properties))})}):br(n,function(i){e.push(yn(i,n.properties))}),Wa(e)}function gi(n,e){return[Math.round(n[0]/e)*e,Math.round(n[1]/e)*e]}function Sc(n,e={}){const{key:i=Ya}=e,{tolerance:o=1e-5}=e,s=Wa(n.features.filter(_=>_.geometry.type==="LineString")),l=kc(s).features.reduce(function(f,m,y,w){var b=gi(m.geometry.coordinates,o);return f[i(b)]=m.geometry.coordinates,y%1e3===0&&e.progress&&e.progress("topo:vertices",y,w.length),f},{}),c=Va(s,d,[]);return{vertices:l,edges:c};function d(_,f){return f.geometry.coordinates.forEach(function(y,w,b){if(w>0){var C=i(gi(b[w-1],o)),S=i(gi(y,o));_.push([C,S,f.properties])}}),_}}function Va(n,e,i){return n.type==="FeatureCollection"?n.features.reduce(function(s,h){return Va(h,e,s)},i):e(i,n)}function Ya(n){return n.join(",")}function Tc(n,e={}){const i=Sc(n,e),{weight:o=Dc}=e,s=i.edges.reduce(d,{edgeData:{},vertices:{}}),{graph:h,coordinates:l,reducedEdges:c}=xc(s.vertices,i.vertices,s.edgeData,e);return{vertices:s.vertices,edgeData:s.edgeData,sourceCoordinates:i.vertices,compactedVertices:h,compactedCoordinates:l,compactedEdges:c};function d(_,f,m,y){const[w,b,C]=f,S=o(i.vertices[w],i.vertices[b],C);return S&&(z(w),z(b),S instanceof Object?(S.forward&&x(w,b,S.forward),S.backward&&x(b,w,S.backward)):(x(w,b,S),x(b,w,S))),m%1e3===0&&e.progress&&e.progress("edgeweights",m,y.length),_;function z(M){_.vertices[M]||(_.vertices[M]={},_.edgeData[M]={})}function x(M,k,B){var O=_.vertices[M];O[k]=B,_.edgeData[M][k]="edgeDataReducer"in e?e.edgeDataSeed(C):void 0}}}function Dc(n,e){return Cc(yn(n),yn(e))}class zc{constructor(e,i={}){this.graph=Tc(e,i),this.options=i}findPath(e,i){const{key:o=Ya,tolerance:s=1e-5}=this.options,h=o(gi(e.geometry.coordinates,s)),l=o(gi(i.geometry.coordinates,s));if(!this.graph.vertices[h]||!this.graph.vertices[l])return;const c=this._createPhantom(h),d=this._createPhantom(l);try{const _=Lc(this.graph.compactedVertices,h,l);if(_){const[f,m]=_;return{path:m.reduce((y,w,b,C)=>(b>0&&(y=y.concat(this.graph.compactedCoordinates[C[b-1]][w])),y),[]).concat([this.graph.sourceCoordinates[l]]),weight:f,edgeDatas:this.graph.compactedEdges?m.reduce((y,w,b,C)=>(b>0&&y.push(this.graph.compactedEdges[C[b-1]][w]),y),[]):void 0}}else return}finally{this._removePhantom(c),this._removePhantom(d)}}_createPhantom(e){if(this.graph.compactedVertices[e])return;const i=Ua(e,this.graph.vertices,this.graph.compactedVertices,this.graph.sourceCoordinates,this.graph.edgeData,!0,this.options);return this.graph.compactedVertices[e]=i.edges,this.graph.compactedCoordinates[e]=i.coordinates,this.graph.compactedEdges&&(this.graph.compactedEdges[e]=i.reducedEdges),Object.keys(i.incomingEdges).forEach(o=>{this.graph.compactedVertices[o][e]=i.incomingEdges[o],this.graph.compactedCoordinates[o]||(this.graph.compactedCoordinates[o]={}),this.graph.compactedCoordinates[o][e]=[this.graph.sourceCoordinates[o],...i.incomingCoordinates[o].slice(0,-1)],this.graph.compactedEdges&&(this.graph.compactedEdges[o]||(this.graph.compactedEdges[o]={}),this.graph.compactedEdges[o][e]=i.reducedEdges[o])}),e}_removePhantom(e){e&&(Object.keys(this.graph.compactedVertices[e]).forEach(i=>{delete this.graph.compactedVertices[i][e]}),Object.keys(this.graph.compactedCoordinates[e]).forEach(i=>{delete this.graph.compactedCoordinates[i][e]}),this.graph.compactedEdges&&Object.keys(this.graph.compactedEdges[e]).forEach(i=>{delete this.graph.compactedEdges[i][e]}),delete this.graph.compactedVertices[e],delete this.graph.compactedCoordinates[e],this.graph.compactedEdges&&delete this.graph.compactedEdges[e])}}function Ac(n){if(n){const{weight:e,edgeDatas:i}=n;return yc(n.path,{weight:e,edgeDatas:i})}}function Pr(n,e,i,o,s,h){if(s-o<=i)return;const l=o+s>>1;Xa(n,e,l,o,s,h%2),Pr(n,e,i,o,l-1,h+1),Pr(n,e,i,l+1,s,h+1)}function Xa(n,e,i,o,s,h){for(;s>o;){if(s-o>600){const _=s-o+1,f=i-o+1,m=Math.log(_),y=.5*Math.exp(2*m/3),w=.5*Math.sqrt(m*y*(_-y)/_)*(f-_/2<0?-1:1),b=Math.max(o,Math.floor(i-f*y/_+w)),C=Math.min(s,Math.floor(i+(_-f)*y/_+w));Xa(n,e,i,b,C,h)}const l=e[2*i+h];let c=o,d=s;for(oi(n,e,o,i),e[2*s+h]>l&&oi(n,e,o,s);c<d;){for(oi(n,e,c,d),c++,d--;e[2*c+h]<l;)c++;for(;e[2*d+h]>l;)d--}e[2*o+h]===l?oi(n,e,o,d):(d++,oi(n,e,d,s)),d<=i&&(o=d+1),i<=d&&(s=d-1)}}function oi(n,e,i,o){dr(n,i,o),dr(e,2*i,2*o),dr(e,2*i+1,2*o+1)}function dr(n,e,i){const o=n[e];n[e]=n[i],n[i]=o}function Bc(n,e,i,o,s,h,l){const c=[0,n.length-1,0],d=[];let _,f;for(;c.length;){const m=c.pop(),y=c.pop(),w=c.pop();if(y-w<=l){for(let S=w;S<=y;S++)_=e[2*S],f=e[2*S+1],_>=i&&_<=s&&f>=o&&f<=h&&d.push(n[S]);continue}const b=Math.floor((w+y)/2);_=e[2*b],f=e[2*b+1],_>=i&&_<=s&&f>=o&&f<=h&&d.push(n[b]);const C=(m+1)%2;(m===0?i<=_:o<=f)&&(c.push(w),c.push(b-1),c.push(C)),(m===0?s>=_:h>=f)&&(c.push(b+1),c.push(y),c.push(C))}return d}function Ic(n,e,i,o,s,h){const l=[0,n.length-1,0],c=[],d=s*s;for(;l.length;){const _=l.pop(),f=l.pop(),m=l.pop();if(f-m<=h){for(let S=m;S<=f;S++)Ds(e[2*S],e[2*S+1],i,o)<=d&&c.push(n[S]);continue}const y=Math.floor((m+f)/2),w=e[2*y],b=e[2*y+1];Ds(w,b,i,o)<=d&&c.push(n[y]);const C=(_+1)%2;(_===0?i-s<=w:o-s<=b)&&(l.push(m),l.push(y-1),l.push(C)),(_===0?i+s>=w:o+s>=b)&&(l.push(y+1),l.push(f),l.push(C))}return c}function Ds(n,e,i,o){const s=n-i,h=e-o;return s*s+h*h}const Oc=n=>n[0],Fc=n=>n[1];class Zc{constructor(e,i=Oc,o=Fc,s=64,h=Float64Array){this.nodeSize=s,this.points=e;const l=e.length<65536?Uint16Array:Uint32Array,c=this.ids=new l(e.length),d=this.coords=new h(e.length*2);for(let _=0;_<e.length;_++)c[_]=_,d[2*_]=i(e[_]),d[2*_+1]=o(e[_]);Pr(c,d,s,0,c.length-1,0)}range(e,i,o,s){return Bc(this.ids,this.coords,e,i,o,s,this.nodeSize)}within(e,i,o){return Ic(this.ids,this.coords,e,i,o,this.nodeSize)}}var Rr={},Nr={exports:{}};Nr.exports=Pi;Nr.exports.default=Pi;function Pi(n,e){if(!(this instanceof Pi))return new Pi(n,e);if(this.data=n||[],this.length=this.data.length,this.compare=e||Rc,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)}function Rc(n,e){return n<e?-1:n>e?1:0}Pi.prototype={push:function(n){this.data.push(n),this.length++,this._up(this.length-1)},pop:function(){if(this.length!==0){var n=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),n}},peek:function(){return this.data[0]},_up:function(n){for(var e=this.data,i=this.compare,o=e[n];n>0;){var s=n-1>>1,h=e[s];if(i(o,h)>=0)break;e[n]=h,n=s}e[n]=o},_down:function(n){for(var e=this.data,i=this.compare,o=this.length>>1,s=e[n];n<o;){var h=(n<<1)+1,l=h+1,c=e[h];if(l<this.length&&i(e[l],c)<0&&(h=l,c=e[l]),i(c,s)>=0)break;e[n]=c,n=h}e[n]=s}};var Nc=Nr.exports,jc=Nc;Rr.around=Wc;Rr.distance=Vc;var Ha=6371,zs=40007,ee=Math.PI/180;function Wc(n,e,i,o,s,h){var l=[];o===void 0&&(o=1/0),s===void 0&&(s=1/0);for(var c=Math.cos(i*ee),d=Math.sin(i*ee),_=jc(null,Uc),f={left:0,right:n.ids.length-1,axis:0,minLng:-180,minLat:-90,maxLng:180,maxLat:90};f;){var m=f.right,y=f.left;if(m-y<=n.nodeSize)for(var w=y;w<=m;w++){var b=n.points[n.ids[w]];(!h||h(b))&&_.push({item:b,dist:Mr(e,i,n.coords[2*w],n.coords[2*w+1],c,d)})}else{var C=y+m>>1,S=n.coords[2*C],z=n.coords[2*C+1];b=n.points[n.ids[C]],(!h||h(b))&&_.push({item:b,dist:Mr(e,i,S,z,c,d)});var x=(f.axis+1)%2,M={left:y,right:C-1,axis:x,minLng:f.minLng,minLat:f.minLat,maxLng:f.axis===0?S:f.maxLng,maxLat:f.axis===1?z:f.maxLat,dist:0},k={left:C+1,right:m,axis:x,minLng:f.axis===0?S:f.minLng,minLat:f.axis===1?z:f.minLat,maxLng:f.maxLng,maxLat:f.maxLat,dist:0};M.dist=As(e,i,M,c,d),k.dist=As(e,i,k,c,d),_.push(M),_.push(k)}for(;_.length&&_.peek().item;){var B=_.pop();if(B.dist>s||(l.push(B.item),l.length===o))return l}f=_.pop()}return l}function As(n,e,i,o,s){var h=i.minLng,l=i.maxLng,c=i.minLat,d=i.maxLat;if(n>=h&&n<=l)return e<=c?zs*(c-e)/360:e>=d?zs*(e-d)/360:0;var _=(h-n+360)%360<=(n-l+360)%360?h:l,f=Math.cos((_-n)*ee),m=Math.atan(s/(o*f))/ee,y=Math.max(an(c,o,s,f),an(d,o,s,f));return m>c&&m<d&&(y=Math.max(y,an(m,o,s,f))),Ha*Math.acos(y)}function Uc(n,e){return n.dist-e.dist}function Mr(n,e,i,o,s,h){var l=Math.cos((i-n)*ee);return Ha*Math.acos(an(o,s,h,l))}function an(n,e,i,o){var s=i*Math.sin(n*ee)+e*Math.cos(n*ee)*o;return Math.min(s,1)}function Vc(n,e,i,o){return Mr(n,e,i,o,Math.cos(e*ee),Math.sin(e*ee))}class Yc{constructor(e){this._routeCache={},this.network=e,this.pathFinder=new zc(e);const i=[];this.network.features.forEach(o=>{o.geometry.coordinates.forEach(s=>{i.push(s)})}),this.indexedNetworkPoints=new Zc(i)}getClosestNetworkCoordinate(e){const i=Rr.around(this.indexedNetworkPoints,e[0],e[1],1);return i?i[0]:void 0}getRoute(e,i){const o=`${e}-${i}`;if(this._routeCache[o])return this._routeCache[o];const s={type:"Feature",geometry:{type:"Point",coordinates:e},properties:{}},h={type:"Feature",geometry:{type:"Point",coordinates:i},properties:{}},l=this.pathFinder.findPath(s,h);if(l&&l.path.length>1){const c=Ac(l);if(c)return this._routeCache[o]=c,c}}}function Xc(n,e,i){return new _c({adapter:new Ou({lib:e,map:n,coordinatePrecision:9}),modes:[new gc({routing:new Yc(i),maxPoints:5}),new oc({flags:{routesnap:{feature:{coordinates:{}}}}})]})}var Hc=Object.create,Mn=Object.defineProperty,Gc=Object.getOwnPropertyDescriptor,qc=Object.getOwnPropertyNames,Bs=Object.getOwnPropertySymbols,$c=Object.getPrototypeOf,Ga=Object.prototype.hasOwnProperty,Kc=Object.prototype.propertyIsEnumerable,Is=(n,e,i)=>e in n?Mn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[e]=i,Jc=(n,e)=>{for(var i in e||(e={}))Ga.call(e,i)&&Is(n,i,e[i]);if(Bs)for(var i of Bs(e))Kc.call(e,i)&&Is(n,i,e[i]);return n},Qc=n=>Mn(n,"__esModule",{value:!0}),Rt=(n,e)=>function(){return e||(0,n[Object.keys(n)[0]])((e={exports:{}}).exports,e),e.exports},td=(n,e,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of qc(e))!Ga.call(n,o)&&o!=="default"&&Mn(n,o,{get:()=>e[o],enumerable:!(i=Gc(e,o))||i.enumerable});return n},Et=n=>td(Qc(Mn(n!=null?Hc($c(n)):{},"default",n&&n.__esModule&&"default"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n),We=(n,e,i)=>new Promise((o,s)=>{var h=d=>{try{c(i.next(d))}catch(_){s(_)}},l=d=>{try{c(i.throw(d))}catch(_){s(_)}},c=d=>d.done?o(d.value):Promise.resolve(d.value).then(h,l);c((i=i.apply(n,e)).next())}),ie=Rt({"node_modules/@mapbox/point-geometry/index.js"(n,e){e.exports=i;function i(o,s){this.x=o,this.y=s}i.prototype={clone:function(){return new i(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,s){return this.clone()._rotateAround(o,s)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var s=o.x-this.x,h=o.y-this.y;return s*s+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,s){return Math.atan2(this.x*s-this.y*o,this.x*o+this.y*s)},_matMult:function(o){var s=o[0]*this.x+o[1]*this.y,h=o[2]*this.x+o[3]*this.y;return this.x=s,this.y=h,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var s=Math.cos(o),h=Math.sin(o),l=s*this.x-h*this.y,c=h*this.x+s*this.y;return this.x=l,this.y=c,this},_rotateAround:function(o,s){var h=Math.cos(o),l=Math.sin(o),c=s.x+h*(this.x-s.x)-l*(this.y-s.y),d=s.y+l*(this.x-s.x)+h*(this.y-s.y);return this.x=c,this.y=d,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(o){return o instanceof i?o:Array.isArray(o)?new i(o[0],o[1]):o}}}),qa=Rt({"node_modules/@mapbox/vector-tile/lib/vectortilefeature.js"(n,e){var i=ie();e.exports=o;function o(d,_,f,m,y){this.properties={},this.extent=f,this.type=0,this._pbf=d,this._geometry=-1,this._keys=m,this._values=y,d.readFields(s,this,_)}function s(d,_,f){d==1?_.id=f.readVarint():d==2?h(f,_):d==3?_.type=f.readVarint():d==4&&(_._geometry=f.pos)}function h(d,_){for(var f=d.readVarint()+d.pos;d.pos<f;){var m=_._keys[d.readVarint()],y=_._values[d.readVarint()];_.properties[m]=y}}o.types=["Unknown","Point","LineString","Polygon"],o.prototype.loadGeometry=function(){var d=this._pbf;d.pos=this._geometry;for(var _=d.readVarint()+d.pos,f=1,m=0,y=0,w=0,b=[],C;d.pos<_;){if(m<=0){var S=d.readVarint();f=S&7,m=S>>3}if(m--,f===1||f===2)y+=d.readSVarint(),w+=d.readSVarint(),f===1&&(C&&b.push(C),C=[]),C.push(new i(y,w));else if(f===7)C&&C.push(C[0].clone());else throw new Error("unknown command "+f)}return C&&b.push(C),b},o.prototype.bbox=function(){var d=this._pbf;d.pos=this._geometry;for(var _=d.readVarint()+d.pos,f=1,m=0,y=0,w=0,b=1/0,C=-1/0,S=1/0,z=-1/0;d.pos<_;){if(m<=0){var x=d.readVarint();f=x&7,m=x>>3}if(m--,f===1||f===2)y+=d.readSVarint(),w+=d.readSVarint(),y<b&&(b=y),y>C&&(C=y),w<S&&(S=w),w>z&&(z=w);else if(f!==7)throw new Error("unknown command "+f)}return[b,S,C,z]},o.prototype.toGeoJSON=function(d,_,f){var m=this.extent*Math.pow(2,f),y=this.extent*d,w=this.extent*_,b=this.loadGeometry(),C=o.types[this.type],S,z;function x(B){for(var O=0;O<B.length;O++){var I=B[O],F=180-(I.y+w)*360/m;B[O]=[(I.x+y)*360/m-180,360/Math.PI*Math.atan(Math.exp(F*Math.PI/180))-90]}}switch(this.type){case 1:var M=[];for(S=0;S<b.length;S++)M[S]=b[S][0];b=M,x(b);break;case 2:for(S=0;S<b.length;S++)x(b[S]);break;case 3:for(b=l(b),S=0;S<b.length;S++)for(z=0;z<b[S].length;z++)x(b[S][z]);break}b.length===1?b=b[0]:C="Multi"+C;var k={type:"Feature",geometry:{type:C,coordinates:b},properties:this.properties};return"id"in this&&(k.id=this.id),k};function l(d){var _=d.length;if(_<=1)return[d];for(var f=[],m,y,w=0;w<_;w++){var b=c(d[w]);b!==0&&(y===void 0&&(y=b<0),y===b<0?(m&&f.push(m),m=[d[w]]):m.push(d[w]))}return m&&f.push(m),f}function c(d){for(var _=0,f=0,m=d.length,y=m-1,w,b;f<m;y=f++)w=d[f],b=d[y],_+=(b.x-w.x)*(w.y+b.y);return _}}}),$a=Rt({"node_modules/@mapbox/vector-tile/lib/vectortilelayer.js"(n,e){var i=qa();e.exports=o;function o(l,c){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(s,this,c),this.length=this._features.length}function s(l,c,d){l===15?c.version=d.readVarint():l===1?c.name=d.readString():l===5?c.extent=d.readVarint():l===2?c._features.push(d.pos):l===3?c._keys.push(d.readString()):l===4&&c._values.push(h(d))}function h(l){for(var c=null,d=l.readVarint()+l.pos;l.pos<d;){var _=l.readVarint()>>3;c=_===1?l.readString():_===2?l.readFloat():_===3?l.readDouble():_===4?l.readVarint64():_===5?l.readVarint():_===6?l.readSVarint():_===7?l.readBoolean():null}return c}o.prototype.feature=function(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];var c=this._pbf.readVarint()+this._pbf.pos;return new i(this._pbf,c,this.extent,this._keys,this._values)}}}),ed=Rt({"node_modules/@mapbox/vector-tile/lib/vectortile.js"(n,e){var i=$a();e.exports=o;function o(h,l){this.layers=h.readFields(s,{},l)}function s(h,l,c){if(h===3){var d=new i(c,c.readVarint()+c.pos);d.length&&(l[d.name]=d)}}}}),id=Rt({"node_modules/@mapbox/vector-tile/index.js"(n,e){e.exports.VectorTile=ed(),e.exports.VectorTileFeature=qa(),e.exports.VectorTileLayer=$a()}}),nd=Rt({"node_modules/ieee754/index.js"(n){n.read=function(e,i,o,s,h){var l,c,d=h*8-s-1,_=(1<<d)-1,f=_>>1,m=-7,y=o?h-1:0,w=o?-1:1,b=e[i+y];for(y+=w,l=b&(1<<-m)-1,b>>=-m,m+=d;m>0;l=l*256+e[i+y],y+=w,m-=8);for(c=l&(1<<-m)-1,l>>=-m,m+=s;m>0;c=c*256+e[i+y],y+=w,m-=8);if(l===0)l=1-f;else{if(l===_)return c?NaN:(b?-1:1)*(1/0);c=c+Math.pow(2,s),l=l-f}return(b?-1:1)*c*Math.pow(2,l-s)},n.write=function(e,i,o,s,h,l){var c,d,_,f=l*8-h-1,m=(1<<f)-1,y=m>>1,w=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=s?0:l-1,C=s?1:-1,S=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(d=isNaN(i)?1:0,c=m):(c=Math.floor(Math.log(i)/Math.LN2),i*(_=Math.pow(2,-c))<1&&(c--,_*=2),c+y>=1?i+=w/_:i+=w*Math.pow(2,1-y),i*_>=2&&(c++,_/=2),c+y>=m?(d=0,c=m):c+y>=1?(d=(i*_-1)*Math.pow(2,h),c=c+y):(d=i*Math.pow(2,y-1)*Math.pow(2,h),c=0));h>=8;e[o+b]=d&255,b+=C,d/=256,h-=8);for(c=c<<h|d,f+=h;f>0;e[o+b]=c&255,b+=C,c/=256,f-=8);e[o+b-C]|=S*128}}}),rd=Rt({"node_modules/pbf/index.js"(n,e){e.exports=o;var i=nd();function o(v){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(v)?v:new Uint8Array(v||0),this.pos=0,this.type=0,this.length=this.buf.length}o.Varint=0,o.Fixed64=1,o.Bytes=2,o.Fixed32=5;var s=65536*65536,h=1/s,l=12,c=typeof TextDecoder>"u"?null:new TextDecoder("utf8");o.prototype={destroy:function(){this.buf=null},readFields:function(v,E,T){for(T=T||this.length;this.pos<T;){var U=this.readVarint(),R=U>>3,$=this.pos;this.type=U&7,v(R,E,this),this.pos===$&&this.skip(U)}return E},readMessage:function(v,E){return this.readFields(v,E,this.readVarint()+this.pos)},readFixed32:function(){var v=F(this.buf,this.pos);return this.pos+=4,v},readSFixed32:function(){var v=V(this.buf,this.pos);return this.pos+=4,v},readFixed64:function(){var v=F(this.buf,this.pos)+F(this.buf,this.pos+4)*s;return this.pos+=8,v},readSFixed64:function(){var v=F(this.buf,this.pos)+V(this.buf,this.pos+4)*s;return this.pos+=8,v},readFloat:function(){var v=i.read(this.buf,this.pos,!0,23,4);return this.pos+=4,v},readDouble:function(){var v=i.read(this.buf,this.pos,!0,52,8);return this.pos+=8,v},readVarint:function(v){var E=this.buf,T,U;return U=E[this.pos++],T=U&127,U<128||(U=E[this.pos++],T|=(U&127)<<7,U<128)||(U=E[this.pos++],T|=(U&127)<<14,U<128)||(U=E[this.pos++],T|=(U&127)<<21,U<128)?T:(U=E[this.pos],T|=(U&15)<<28,d(T,v,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var v=this.readVarint();return v%2===1?(v+1)/-2:v/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var v=this.readVarint()+this.pos,E=this.pos;return this.pos=v,v-E>=l&&c?G(this.buf,E,v):Y(this.buf,E,v)},readBytes:function(){var v=this.readVarint()+this.pos,E=this.buf.subarray(this.pos,v);return this.pos=v,E},readPackedVarint:function(v,E){if(this.type!==o.Bytes)return v.push(this.readVarint(E));var T=_(this);for(v=v||[];this.pos<T;)v.push(this.readVarint(E));return v},readPackedSVarint:function(v){if(this.type!==o.Bytes)return v.push(this.readSVarint());var E=_(this);for(v=v||[];this.pos<E;)v.push(this.readSVarint());return v},readPackedBoolean:function(v){if(this.type!==o.Bytes)return v.push(this.readBoolean());var E=_(this);for(v=v||[];this.pos<E;)v.push(this.readBoolean());return v},readPackedFloat:function(v){if(this.type!==o.Bytes)return v.push(this.readFloat());var E=_(this);for(v=v||[];this.pos<E;)v.push(this.readFloat());return v},readPackedDouble:function(v){if(this.type!==o.Bytes)return v.push(this.readDouble());var E=_(this);for(v=v||[];this.pos<E;)v.push(this.readDouble());return v},readPackedFixed32:function(v){if(this.type!==o.Bytes)return v.push(this.readFixed32());var E=_(this);for(v=v||[];this.pos<E;)v.push(this.readFixed32());return v},readPackedSFixed32:function(v){if(this.type!==o.Bytes)return v.push(this.readSFixed32());var E=_(this);for(v=v||[];this.pos<E;)v.push(this.readSFixed32());return v},readPackedFixed64:function(v){if(this.type!==o.Bytes)return v.push(this.readFixed64());var E=_(this);for(v=v||[];this.pos<E;)v.push(this.readFixed64());return v},readPackedSFixed64:function(v){if(this.type!==o.Bytes)return v.push(this.readSFixed64());var E=_(this);for(v=v||[];this.pos<E;)v.push(this.readSFixed64());return v},skip:function(v){var E=v&7;if(E===o.Varint)for(;this.buf[this.pos++]>127;);else if(E===o.Bytes)this.pos=this.readVarint()+this.pos;else if(E===o.Fixed32)this.pos+=4;else if(E===o.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+E)},writeTag:function(v,E){this.writeVarint(v<<3|E)},realloc:function(v){for(var E=this.length||16;E<this.pos+v;)E*=2;if(E!==this.length){var T=new Uint8Array(E);T.set(this.buf),this.buf=T,this.length=E}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(v){this.realloc(4),W(this.buf,v,this.pos),this.pos+=4},writeSFixed32:function(v){this.realloc(4),W(this.buf,v,this.pos),this.pos+=4},writeFixed64:function(v){this.realloc(8),W(this.buf,v&-1,this.pos),W(this.buf,Math.floor(v*h),this.pos+4),this.pos+=8},writeSFixed64:function(v){this.realloc(8),W(this.buf,v&-1,this.pos),W(this.buf,Math.floor(v*h),this.pos+4),this.pos+=8},writeVarint:function(v){if(v=+v||0,v>268435455||v<0){m(v,this);return}this.realloc(4),this.buf[this.pos++]=v&127|(v>127?128:0),!(v<=127)&&(this.buf[this.pos++]=(v>>>=7)&127|(v>127?128:0),!(v<=127)&&(this.buf[this.pos++]=(v>>>=7)&127|(v>127?128:0),!(v<=127)&&(this.buf[this.pos++]=v>>>7&127)))},writeSVarint:function(v){this.writeVarint(v<0?-v*2-1:v*2)},writeBoolean:function(v){this.writeVarint(!!v)},writeString:function(v){v=String(v),this.realloc(v.length*4),this.pos++;var E=this.pos;this.pos=X(this.buf,v,this.pos);var T=this.pos-E;T>=128&&b(E,T,this),this.pos=E-1,this.writeVarint(T),this.pos+=T},writeFloat:function(v){this.realloc(4),i.write(this.buf,v,this.pos,!0,23,4),this.pos+=4},writeDouble:function(v){this.realloc(8),i.write(this.buf,v,this.pos,!0,52,8),this.pos+=8},writeBytes:function(v){var E=v.length;this.writeVarint(E),this.realloc(E);for(var T=0;T<E;T++)this.buf[this.pos++]=v[T]},writeRawMessage:function(v,E){this.pos++;var T=this.pos;v(E,this);var U=this.pos-T;U>=128&&b(T,U,this),this.pos=T-1,this.writeVarint(U),this.pos+=U},writeMessage:function(v,E,T){this.writeTag(v,o.Bytes),this.writeRawMessage(E,T)},writePackedVarint:function(v,E){E.length&&this.writeMessage(v,C,E)},writePackedSVarint:function(v,E){E.length&&this.writeMessage(v,S,E)},writePackedBoolean:function(v,E){E.length&&this.writeMessage(v,M,E)},writePackedFloat:function(v,E){E.length&&this.writeMessage(v,z,E)},writePackedDouble:function(v,E){E.length&&this.writeMessage(v,x,E)},writePackedFixed32:function(v,E){E.length&&this.writeMessage(v,k,E)},writePackedSFixed32:function(v,E){E.length&&this.writeMessage(v,B,E)},writePackedFixed64:function(v,E){E.length&&this.writeMessage(v,O,E)},writePackedSFixed64:function(v,E){E.length&&this.writeMessage(v,I,E)},writeBytesField:function(v,E){this.writeTag(v,o.Bytes),this.writeBytes(E)},writeFixed32Field:function(v,E){this.writeTag(v,o.Fixed32),this.writeFixed32(E)},writeSFixed32Field:function(v,E){this.writeTag(v,o.Fixed32),this.writeSFixed32(E)},writeFixed64Field:function(v,E){this.writeTag(v,o.Fixed64),this.writeFixed64(E)},writeSFixed64Field:function(v,E){this.writeTag(v,o.Fixed64),this.writeSFixed64(E)},writeVarintField:function(v,E){this.writeTag(v,o.Varint),this.writeVarint(E)},writeSVarintField:function(v,E){this.writeTag(v,o.Varint),this.writeSVarint(E)},writeStringField:function(v,E){this.writeTag(v,o.Bytes),this.writeString(E)},writeFloatField:function(v,E){this.writeTag(v,o.Fixed32),this.writeFloat(E)},writeDoubleField:function(v,E){this.writeTag(v,o.Fixed64),this.writeDouble(E)},writeBooleanField:function(v,E){this.writeVarintField(v,!!E)}};function d(v,E,T){var U=T.buf,R,$;if($=U[T.pos++],R=($&112)>>4,$<128||($=U[T.pos++],R|=($&127)<<3,$<128)||($=U[T.pos++],R|=($&127)<<10,$<128)||($=U[T.pos++],R|=($&127)<<17,$<128)||($=U[T.pos++],R|=($&127)<<24,$<128)||($=U[T.pos++],R|=($&1)<<31,$<128))return f(v,R,E);throw new Error("Expected varint not more than 10 bytes")}function _(v){return v.type===o.Bytes?v.readVarint()+v.pos:v.pos+1}function f(v,E,T){return T?E*4294967296+(v>>>0):(E>>>0)*4294967296+(v>>>0)}function m(v,E){var T,U;if(v>=0?(T=v%4294967296|0,U=v/4294967296|0):(T=~(-v%4294967296),U=~(-v/4294967296),T^4294967295?T=T+1|0:(T=0,U=U+1|0)),v>=18446744073709552e3||v<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");E.realloc(10),y(T,U,E),w(U,E)}function y(v,E,T){T.buf[T.pos++]=v&127|128,v>>>=7,T.buf[T.pos++]=v&127|128,v>>>=7,T.buf[T.pos++]=v&127|128,v>>>=7,T.buf[T.pos++]=v&127|128,v>>>=7,T.buf[T.pos]=v&127}function w(v,E){var T=(v&7)<<4;E.buf[E.pos++]|=T|((v>>>=3)?128:0),v&&(E.buf[E.pos++]=v&127|((v>>>=7)?128:0),v&&(E.buf[E.pos++]=v&127|((v>>>=7)?128:0),v&&(E.buf[E.pos++]=v&127|((v>>>=7)?128:0),v&&(E.buf[E.pos++]=v&127|((v>>>=7)?128:0),v&&(E.buf[E.pos++]=v&127)))))}function b(v,E,T){var U=E<=16383?1:E<=2097151?2:E<=268435455?3:Math.floor(Math.log(E)/(Math.LN2*7));T.realloc(U);for(var R=T.pos-1;R>=v;R--)T.buf[R+U]=T.buf[R]}function C(v,E){for(var T=0;T<v.length;T++)E.writeVarint(v[T])}function S(v,E){for(var T=0;T<v.length;T++)E.writeSVarint(v[T])}function z(v,E){for(var T=0;T<v.length;T++)E.writeFloat(v[T])}function x(v,E){for(var T=0;T<v.length;T++)E.writeDouble(v[T])}function M(v,E){for(var T=0;T<v.length;T++)E.writeBoolean(v[T])}function k(v,E){for(var T=0;T<v.length;T++)E.writeFixed32(v[T])}function B(v,E){for(var T=0;T<v.length;T++)E.writeSFixed32(v[T])}function O(v,E){for(var T=0;T<v.length;T++)E.writeFixed64(v[T])}function I(v,E){for(var T=0;T<v.length;T++)E.writeSFixed64(v[T])}function F(v,E){return(v[E]|v[E+1]<<8|v[E+2]<<16)+v[E+3]*16777216}function W(v,E,T){v[T]=E,v[T+1]=E>>>8,v[T+2]=E>>>16,v[T+3]=E>>>24}function V(v,E){return(v[E]|v[E+1]<<8|v[E+2]<<16)+(v[E+3]<<24)}function Y(v,E,T){for(var U="",R=E;R<T;){var $=v[R],N=null,tt=$>239?4:$>223?3:$>191?2:1;if(R+tt>T)break;var J,ut,ht;tt===1?$<128&&(N=$):tt===2?(J=v[R+1],(J&192)===128&&(N=($&31)<<6|J&63,N<=127&&(N=null))):tt===3?(J=v[R+1],ut=v[R+2],(J&192)===128&&(ut&192)===128&&(N=($&15)<<12|(J&63)<<6|ut&63,(N<=2047||N>=55296&&N<=57343)&&(N=null))):tt===4&&(J=v[R+1],ut=v[R+2],ht=v[R+3],(J&192)===128&&(ut&192)===128&&(ht&192)===128&&(N=($&15)<<18|(J&63)<<12|(ut&63)<<6|ht&63,(N<=65535||N>=1114112)&&(N=null))),N===null?(N=65533,tt=1):N>65535&&(N-=65536,U+=String.fromCharCode(N>>>10&1023|55296),N=56320|N&1023),U+=String.fromCharCode(N),R+=tt}return U}function G(v,E,T){return c.decode(v.subarray(E,T))}function X(v,E,T){for(var U=0,R,$;U<E.length;U++){if(R=E.charCodeAt(U),R>55295&&R<57344)if($)if(R<56320){v[T++]=239,v[T++]=191,v[T++]=189,$=R;continue}else R=$-55296<<10|R-56320|65536,$=null;else{R>56319||U+1===E.length?(v[T++]=239,v[T++]=191,v[T++]=189):$=R;continue}else $&&(v[T++]=239,v[T++]=191,v[T++]=189,$=null);R<128?v[T++]=R:(R<2048?v[T++]=R>>6|192:(R<65536?v[T++]=R>>12|224:(v[T++]=R>>18|240,v[T++]=R>>12&63|128),v[T++]=R>>6&63|128),v[T++]=R&63|128)}return T}}}),od=Rt({"node_modules/rbush/rbush.min.js"(n,e){(function(i,o){typeof n=="object"&&typeof e<"u"?e.exports=o():typeof define=="function"&&define.amd?define(o):(i=i||self).RBush=o()})(n,function(){function i(x,M,k,B,O){(function I(F,W,V,Y,G){for(;Y>V;){if(Y-V>600){var X=Y-V+1,v=W-V+1,E=Math.log(X),T=.5*Math.exp(2*E/3),U=.5*Math.sqrt(E*T*(X-T)/X)*(v-X/2<0?-1:1),R=Math.max(V,Math.floor(W-v*T/X+U)),$=Math.min(Y,Math.floor(W+(X-v)*T/X+U));I(F,W,R,$,G)}var N=F[W],tt=V,J=Y;for(o(F,V,W),G(F[Y],N)>0&&o(F,V,Y);tt<J;){for(o(F,tt,J),tt++,J--;G(F[tt],N)<0;)tt++;for(;G(F[J],N)>0;)J--}G(F[V],N)===0?o(F,V,J):o(F,++J,Y),J<=W&&(V=J+1),W<=J&&(Y=J-1)}})(x,M,k||0,B||x.length-1,O||s)}function o(x,M,k){var B=x[M];x[M]=x[k],x[k]=B}function s(x,M){return x<M?-1:x>M?1:0}var h=function(x){x===void 0&&(x=9),this._maxEntries=Math.max(4,x),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function l(x,M,k){if(!k)return M.indexOf(x);for(var B=0;B<M.length;B++)if(k(x,M[B]))return B;return-1}function c(x,M){d(x,0,x.children.length,M,x)}function d(x,M,k,B,O){O||(O=S(null)),O.minX=1/0,O.minY=1/0,O.maxX=-1/0,O.maxY=-1/0;for(var I=M;I<k;I++){var F=x.children[I];_(O,x.leaf?B(F):F)}return O}function _(x,M){return x.minX=Math.min(x.minX,M.minX),x.minY=Math.min(x.minY,M.minY),x.maxX=Math.max(x.maxX,M.maxX),x.maxY=Math.max(x.maxY,M.maxY),x}function f(x,M){return x.minX-M.minX}function m(x,M){return x.minY-M.minY}function y(x){return(x.maxX-x.minX)*(x.maxY-x.minY)}function w(x){return x.maxX-x.minX+(x.maxY-x.minY)}function b(x,M){return x.minX<=M.minX&&x.minY<=M.minY&&M.maxX<=x.maxX&&M.maxY<=x.maxY}function C(x,M){return M.minX<=x.maxX&&M.minY<=x.maxY&&M.maxX>=x.minX&&M.maxY>=x.minY}function S(x){return{children:x,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function z(x,M,k,B,O){for(var I=[M,k];I.length;)if(!((k=I.pop())-(M=I.pop())<=B)){var F=M+Math.ceil((k-M)/B/2)*B;i(x,F,M,k,O),I.push(M,F,F,k)}}return h.prototype.all=function(){return this._all(this.data,[])},h.prototype.search=function(x){var M=this.data,k=[];if(!C(x,M))return k;for(var B=this.toBBox,O=[];M;){for(var I=0;I<M.children.length;I++){var F=M.children[I],W=M.leaf?B(F):F;C(x,W)&&(M.leaf?k.push(F):b(x,W)?this._all(F,k):O.push(F))}M=O.pop()}return k},h.prototype.collides=function(x){var M=this.data;if(!C(x,M))return!1;for(var k=[];M;){for(var B=0;B<M.children.length;B++){var O=M.children[B],I=M.leaf?this.toBBox(O):O;if(C(x,I)){if(M.leaf||b(x,I))return!0;k.push(O)}}M=k.pop()}return!1},h.prototype.load=function(x){if(!x||!x.length)return this;if(x.length<this._minEntries){for(var M=0;M<x.length;M++)this.insert(x[M]);return this}var k=this._build(x.slice(),0,x.length-1,0);if(this.data.children.length)if(this.data.height===k.height)this._splitRoot(this.data,k);else{if(this.data.height<k.height){var B=this.data;this.data=k,k=B}this._insert(k,this.data.height-k.height-1,!0)}else this.data=k;return this},h.prototype.insert=function(x){return x&&this._insert(x,this.data.height-1),this},h.prototype.clear=function(){return this.data=S([]),this},h.prototype.remove=function(x,M){if(!x)return this;for(var k,B,O,I=this.data,F=this.toBBox(x),W=[],V=[];I||W.length;){if(I||(I=W.pop(),B=W[W.length-1],k=V.pop(),O=!0),I.leaf){var Y=l(x,I.children,M);if(Y!==-1)return I.children.splice(Y,1),W.push(I),this._condense(W),this}O||I.leaf||!b(I,F)?B?(k++,I=B.children[k],O=!1):I=null:(W.push(I),V.push(k),k=0,B=I,I=I.children[0])}return this},h.prototype.toBBox=function(x){return x},h.prototype.compareMinX=function(x,M){return x.minX-M.minX},h.prototype.compareMinY=function(x,M){return x.minY-M.minY},h.prototype.toJSON=function(){return this.data},h.prototype.fromJSON=function(x){return this.data=x,this},h.prototype._all=function(x,M){for(var k=[];x;)x.leaf?M.push.apply(M,x.children):k.push.apply(k,x.children),x=k.pop();return M},h.prototype._build=function(x,M,k,B){var O,I=k-M+1,F=this._maxEntries;if(I<=F)return c(O=S(x.slice(M,k+1)),this.toBBox),O;B||(B=Math.ceil(Math.log(I)/Math.log(F)),F=Math.ceil(I/Math.pow(F,B-1))),(O=S([])).leaf=!1,O.height=B;var W=Math.ceil(I/F),V=W*Math.ceil(Math.sqrt(F));z(x,M,k,V,this.compareMinX);for(var Y=M;Y<=k;Y+=V){var G=Math.min(Y+V-1,k);z(x,Y,G,W,this.compareMinY);for(var X=Y;X<=G;X+=W){var v=Math.min(X+W-1,G);O.children.push(this._build(x,X,v,B-1))}}return c(O,this.toBBox),O},h.prototype._chooseSubtree=function(x,M,k,B){for(;B.push(M),!M.leaf&&B.length-1!==k;){for(var O=1/0,I=1/0,F=void 0,W=0;W<M.children.length;W++){var V=M.children[W],Y=y(V),G=(X=x,v=V,(Math.max(v.maxX,X.maxX)-Math.min(v.minX,X.minX))*(Math.max(v.maxY,X.maxY)-Math.min(v.minY,X.minY))-Y);G<I?(I=G,O=Y<O?Y:O,F=V):G===I&&Y<O&&(O=Y,F=V)}M=F||M.children[0]}var X,v;return M},h.prototype._insert=function(x,M,k){var B=k?x:this.toBBox(x),O=[],I=this._chooseSubtree(B,this.data,M,O);for(I.children.push(x),_(I,B);M>=0&&O[M].children.length>this._maxEntries;)this._split(O,M),M--;this._adjustParentBBoxes(B,O,M)},h.prototype._split=function(x,M){var k=x[M],B=k.children.length,O=this._minEntries;this._chooseSplitAxis(k,O,B);var I=this._chooseSplitIndex(k,O,B),F=S(k.children.splice(I,k.children.length-I));F.height=k.height,F.leaf=k.leaf,c(k,this.toBBox),c(F,this.toBBox),M?x[M-1].children.push(F):this._splitRoot(k,F)},h.prototype._splitRoot=function(x,M){this.data=S([x,M]),this.data.height=x.height+1,this.data.leaf=!1,c(this.data,this.toBBox)},h.prototype._chooseSplitIndex=function(x,M,k){for(var B,O,I,F,W,V,Y,G=1/0,X=1/0,v=M;v<=k-M;v++){var E=d(x,0,v,this.toBBox),T=d(x,v,k,this.toBBox),U=(O=E,I=T,F=void 0,W=void 0,V=void 0,Y=void 0,F=Math.max(O.minX,I.minX),W=Math.max(O.minY,I.minY),V=Math.min(O.maxX,I.maxX),Y=Math.min(O.maxY,I.maxY),Math.max(0,V-F)*Math.max(0,Y-W)),R=y(E)+y(T);U<G?(G=U,B=v,X=R<X?R:X):U===G&&R<X&&(X=R,B=v)}return B||k-M},h.prototype._chooseSplitAxis=function(x,M,k){var B=x.leaf?this.compareMinX:f,O=x.leaf?this.compareMinY:m;this._allDistMargin(x,M,k,B)<this._allDistMargin(x,M,k,O)&&x.children.sort(B)},h.prototype._allDistMargin=function(x,M,k,B){x.children.sort(B);for(var O=this.toBBox,I=d(x,0,M,O),F=d(x,k-M,k,O),W=w(I)+w(F),V=M;V<k-M;V++){var Y=x.children[V];_(I,x.leaf?O(Y):Y),W+=w(I)}for(var G=k-M-1;G>=M;G--){var X=x.children[G];_(F,x.leaf?O(X):X),W+=w(F)}return W},h.prototype._adjustParentBBoxes=function(x,M,k){for(var B=k;B>=0;B--)_(M[B],x)},h.prototype._condense=function(x){for(var M=x.length-1,k=void 0;M>=0;M--)x[M].children.length===0?M>0?(k=x[M-1].children).splice(k.indexOf(x[M]),1):this.clear():c(x[M],this.toBBox)},h})}}),sd=Rt({"src/types/unitbezier.d.ts"(){}}),ad=Rt({"node_modules/tinyqueue/tinyqueue.js"(n,e){(function(i,o){typeof n=="object"&&typeof e<"u"?e.exports=o():typeof define=="function"&&define.amd?define(o):(i=i||self,i.TinyQueue=o())})(n,function(){var i=function(h,l){if(h===void 0&&(h=[]),l===void 0&&(l=o),this.data=h,this.length=this.data.length,this.compare=l,this.length>0)for(var c=(this.length>>1)-1;c>=0;c--)this._down(c)};i.prototype.push=function(h){this.data.push(h),this.length++,this._up(this.length-1)},i.prototype.pop=function(){if(this.length!==0){var h=this.data[0],l=this.data.pop();return this.length--,this.length>0&&(this.data[0]=l,this._down(0)),h}},i.prototype.peek=function(){return this.data[0]},i.prototype._up=function(h){for(var l=this,c=l.data,d=l.compare,_=c[h];h>0;){var f=h-1>>1,m=c[f];if(d(_,m)>=0)break;c[h]=m,h=f}c[h]=_},i.prototype._down=function(h){for(var l=this,c=l.data,d=l.compare,_=this.length>>1,f=c[h];h<_;){var m=(h<<1)+1,y=c[m],w=m+1;if(w<this.length&&d(c[w],y)<0&&(m=w,y=c[w]),d(y,f)>=0)break;c[h]=y,h=m}c[h]=f};function o(s,h){return s<h?-1:s>h?1:0}return i})}}),hd=Rt({"node_modules/polylabel/polylabel.js"(n,e){var i=ad();i.default&&(i=i.default),e.exports=o,e.exports.default=o;function o(_,f,m){f=f||1;for(var y,w,b,C,S=0;S<_[0].length;S++){var z=_[0][S];(!S||z[0]<y)&&(y=z[0]),(!S||z[1]<w)&&(w=z[1]),(!S||z[0]>b)&&(b=z[0]),(!S||z[1]>C)&&(C=z[1])}var x=b-y,M=C-w,k=Math.min(x,M),B=k/2;if(k===0){var O=[y,w];return O.distance=0,O}for(var I=new i(void 0,s),F=y;F<b;F+=k)for(var W=w;W<C;W+=k)I.push(new h(F+B,W+B,B,_));var V=c(_),Y=new h(y+x/2,w+M/2,0,_);Y.d>V.d&&(V=Y);for(var G=I.length;I.length;){var X=I.pop();X.d>V.d&&(V=X,m&&console.log("found best %d after %d probes",Math.round(1e4*X.d)/1e4,G)),!(X.max-V.d<=f)&&(B=X.h/2,I.push(new h(X.x-B,X.y-B,B,_)),I.push(new h(X.x+B,X.y-B,B,_)),I.push(new h(X.x-B,X.y+B,B,_)),I.push(new h(X.x+B,X.y+B,B,_)),G+=4)}m&&(console.log("num probes: "+G),console.log("best distance: "+V.d));var v=[V.x,V.y];return v.distance=V.d,v}function s(_,f){return f.max-_.max}function h(_,f,m,y){this.x=_,this.y=f,this.h=m,this.d=l(_,f,y),this.max=this.d+this.h*Math.SQRT2}function l(_,f,m){for(var y=!1,w=1/0,b=0;b<m.length;b++)for(var C=m[b],S=0,z=C.length,x=z-1;S<z;x=S++){var M=C[S],k=C[x];M[1]>f!=k[1]>f&&_<(k[0]-M[0])*(f-M[1])/(k[1]-M[1])+M[0]&&(y=!y),w=Math.min(w,d(_,f,M,k))}return w===0?0:(y?1:-1)*Math.sqrt(w)}function c(_){for(var f=0,m=0,y=0,w=_[0],b=0,C=w.length,S=C-1;b<C;S=b++){var z=w[b],x=w[S],M=z[0]*x[1]-x[0]*z[1];m+=(z[0]+x[0])*M,y+=(z[1]+x[1])*M,f+=M*3}return f===0?new h(w[0][0],w[0][1],0,_):new h(m/f,y/f,0,_)}function d(_,f,m,y){var w=m[0],b=m[1],C=y[0]-w,S=y[1]-b;if(C!==0||S!==0){var z=((_-w)*C+(f-b)*S)/(C*C+S*S);z>1?(w=y[0],b=y[1]):z>0&&(w+=C*z,b+=S*z)}return C=_-w,S=f-b,C*C+S*S}}});Et(ie());var Se=Et(ie()),Mi=Et(ie()),ld=Et(id()),ud=Et(rd()),xt=(n,e,i)=>new Promise((o,s)=>{var h=d=>{try{c(i.next(d))}catch(_){s(_)}},l=d=>{try{c(i.throw(d))}catch(_){s(_)}},c=d=>d.done?o(d.value):Promise.resolve(d.value).then(h,l);c((i=i.apply(n,e)).next())}),Ct=Uint8Array,Fe=Uint16Array,Ka=Uint32Array,Ja=new Ct([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Qa=new Ct([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),cd=new Ct([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),th=function(n,e){for(var i=new Fe(31),o=0;o<31;++o)i[o]=e+=1<<n[o-1];for(var s=new Ka(i[30]),o=1;o<30;++o)for(var h=i[o];h<i[o+1];++h)s[h]=h-i[o]<<5|o;return[i,s]},eh=th(Ja,2),ih=eh[0],dd=eh[1];ih[28]=258,dd[258]=28;var fd=th(Qa,0),pd=fd[0],nh=new Fe(32768);for(st=0;st<32768;++st)Kt=(st&43690)>>>1|(st&21845)<<1,Kt=(Kt&52428)>>>2|(Kt&13107)<<2,Kt=(Kt&61680)>>>4|(Kt&3855)<<4,nh[st]=((Kt&65280)>>>8|(Kt&255)<<8)>>>1;var Kt,st,vi=function(n,e,i){for(var o=n.length,s=0,h=new Fe(e);s<o;++s)n[s]&&++h[n[s]-1];var l=new Fe(e);for(s=0;s<e;++s)l[s]=l[s-1]+h[s-1]<<1;var c;{c=new Fe(1<<e);var d=15-e;for(s=0;s<o;++s)if(n[s])for(var _=s<<4|n[s],f=e-n[s],m=l[n[s]-1]++<<f,y=m|(1<<f)-1;m<=y;++m)c[nh[m]>>>d]=_}return c},Si=new Ct(288);for(st=0;st<144;++st)Si[st]=8;var st;for(st=144;st<256;++st)Si[st]=9;var st;for(st=256;st<280;++st)Si[st]=7;var st;for(st=280;st<288;++st)Si[st]=8;var st,rh=new Ct(32);for(st=0;st<32;++st)rh[st]=5;var st,_d=vi(Si,9),md=vi(rh,5),fr=function(n){for(var e=n[0],i=1;i<n.length;++i)n[i]>e&&(e=n[i]);return e},It=function(n,e,i){var o=e/8|0;return(n[o]|n[o+1]<<8)>>(e&7)&i},pr=function(n,e){var i=e/8|0;return(n[i]|n[i+1]<<8|n[i+2]<<16)>>(e&7)},gd=function(n){return(n+7)/8|0},vd=function(n,e,i){(i==null||i>n.length)&&(i=n.length);var o=new(n.BYTES_PER_ELEMENT==2?Fe:n.BYTES_PER_ELEMENT==4?Ka:Ct)(i-e);return o.set(n.subarray(e,i)),o},yd=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ft=function(n,e,i){var o=new Error(e||yd[n]);if(o.code=n,Error.captureStackTrace&&Error.captureStackTrace(o,Ft),!i)throw o;return o},jr=function(n,e,i){var o=n.length;if(!o||i&&i.f&&!i.l)return e||new Ct(0);var s=!e||i,h=!i||i.i;i||(i={}),e||(e=new Ct(o*3));var l=function(at){var kt=e.length;if(at>kt){var zt=new Ct(Math.max(kt*2,at));zt.set(e),e=zt}},c=i.f||0,d=i.p||0,_=i.b||0,f=i.l,m=i.d,y=i.m,w=i.n,b=o*8;do{if(!f){c=It(n,d,1);var C=It(n,d+1,3);if(d+=3,C)if(C==1)f=_d,m=md,y=9,w=5;else if(C==2){var M=It(n,d,31)+257,k=It(n,d+10,15)+4,B=M+It(n,d+5,31)+1;d+=14;for(var O=new Ct(B),I=new Ct(19),F=0;F<k;++F)I[cd[F]]=It(n,d+F*3,7);d+=k*3;for(var W=fr(I),V=(1<<W)-1,Y=vi(I,W),F=0;F<B;){var G=Y[It(n,d,V)];d+=G&15;var S=G>>>4;if(S<16)O[F++]=S;else{var X=0,v=0;for(S==16?(v=3+It(n,d,3),d+=2,X=O[F-1]):S==17?(v=3+It(n,d,7),d+=3):S==18&&(v=11+It(n,d,127),d+=7);v--;)O[F++]=X}}var E=O.subarray(0,M),T=O.subarray(M);y=fr(E),w=fr(T),f=vi(E,y),m=vi(T,w)}else Ft(1);else{var S=gd(d)+4,z=n[S-4]|n[S-3]<<8,x=S+z;if(x>o){h&&Ft(0);break}s&&l(_+z),e.set(n.subarray(S,x),_),i.b=_+=z,i.p=d=x*8,i.f=c;continue}if(d>b){h&&Ft(0);break}}s&&l(_+131072);for(var U=(1<<y)-1,R=(1<<w)-1,$=d;;$=d){var X=f[pr(n,d)&U],N=X>>>4;if(d+=X&15,d>b){h&&Ft(0);break}if(X||Ft(2),N<256)e[_++]=N;else if(N==256){$=d,f=null;break}else{var tt=N-254;if(N>264){var F=N-257,J=Ja[F];tt=It(n,d,(1<<J)-1)+ih[F],d+=J}var ut=m[pr(n,d)&R],ht=ut>>>4;ut||Ft(3),d+=ut&15;var T=pd[ht];if(ht>3){var J=Qa[ht];T+=pr(n,d)&(1<<J)-1,d+=J}if(d>b){h&&Ft(0);break}s&&l(_+131072);for(var ot=_+tt;_<ot;_+=4)e[_]=e[_-T],e[_+1]=e[_+1-T],e[_+2]=e[_+2-T],e[_+3]=e[_+3-T];_=ot}}i.l=f,i.p=$,i.b=_,i.f=c,f&&(c=1,i.m=y,i.d=m,i.n=w)}while(!c);return _==e.length?e:vd(e,0,_)},wd=new Ct(0),xd=function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&Ft(6,"invalid gzip data");var e=n[3],i=10;e&4&&(i+=n[10]|(n[11]<<8)+2);for(var o=(e>>3&1)+(e>>4&1);o>0;o-=!n[i++]);return i+(e&2)},bd=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},Pd=function(n){((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)&&Ft(6,"invalid zlib data"),n[1]&32&&Ft(6,"invalid zlib data: preset dictionaries not supported")};function Md(n,e){return jr(n,e)}function Ld(n,e){return jr(n.subarray(xd(n),-8),new Ct(bd(n)))}function Cd(n,e){return jr((Pd(n),n.subarray(2,-4)),e)}function Lr(n,e){return n[0]==31&&n[1]==139&&n[2]==8?Ld(n):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?Md(n,e):Cd(n,e)}var Ed=typeof TextDecoder<"u"&&new TextDecoder,kd=0;try{Ed.decode(wd,{stream:!0}),kd=1}catch{}var oh=(n,e)=>n*Math.pow(2,e),si=(n,e)=>Math.floor(n/Math.pow(2,e)),wn=(n,e)=>oh(n.getUint16(e+1,!0),8)+n.getUint8(e),sh=(n,e)=>oh(n.getUint32(e+2,!0),16)+n.getUint16(e,!0),Sd=(n,e,i,o,s)=>{if(n!=o.getUint8(s))return n-o.getUint8(s);const h=wn(o,s+1);if(e!=h)return e-h;const l=wn(o,s+4);return i!=l?i-l:0},Td=(n,e,i,o)=>{const s=ah(n,e|128,i,o);return s?{z:e,x:i,y:o,offset:s[0],length:s[1],is_dir:!0}:null},Os=(n,e,i,o)=>{const s=ah(n,e,i,o);return s?{z:e,x:i,y:o,offset:s[0],length:s[1],is_dir:!1}:null},ah=(n,e,i,o)=>{let s=0,h=n.byteLength/17-1;for(;s<=h;){const l=h+s>>1,c=Sd(e,i,o,n,l*17);if(c>0)s=l+1;else if(c<0)h=l-1;else return[sh(n,l*17+7),n.getUint32(l*17+13,!0)]}return null},Dd=(n,e)=>n.is_dir&&!e.is_dir?1:!n.is_dir&&e.is_dir?-1:n.z!==e.z?n.z-e.z:n.x!==e.x?n.x-e.x:n.y-e.y,hh=(n,e)=>{const i=n.getUint8(e*17);return{z:i&127,x:wn(n,e*17+1),y:wn(n,e*17+4),offset:sh(n,e*17+7),length:n.getUint32(e*17+13,!0),is_dir:i>>7===1}},Fs=n=>{const e=[],i=new DataView(n);for(let o=0;o<i.byteLength/17;o++)e.push(hh(i,o));return zd(e)},zd=n=>{n.sort(Dd);const e=new ArrayBuffer(17*n.length),i=new Uint8Array(e);for(let o=0;o<n.length;o++){const s=n[o];let h=s.z;s.is_dir&&(h=h|128),i[o*17]=h,i[o*17+1]=s.x&255,i[o*17+2]=s.x>>8&255,i[o*17+3]=s.x>>16&255,i[o*17+4]=s.y&255,i[o*17+5]=s.y>>8&255,i[o*17+6]=s.y>>16&255,i[o*17+7]=s.offset&255,i[o*17+8]=si(s.offset,8)&255,i[o*17+9]=si(s.offset,16)&255,i[o*17+10]=si(s.offset,24)&255,i[o*17+11]=si(s.offset,32)&255,i[o*17+12]=si(s.offset,48)&255,i[o*17+13]=s.length&255,i[o*17+14]=s.length>>8&255,i[o*17+15]=s.length>>16&255,i[o*17+16]=s.length>>24&255}return e},Ad=(n,e)=>{if(n.byteLength<17)return null;const i=n.byteLength/17,o=hh(n,i-1);if(o.is_dir){const s=o.z,h=e.z-s,l=Math.trunc(e.x/(1<<h)),c=Math.trunc(e.y/(1<<h));return{z:s,x:l,y:c}}return null};function Bd(n){return xt(this,null,function*(){const e=yield n.getBytes(0,512e3),i=new DataView(e.data),o=i.getUint32(4,!0),s=i.getUint16(8,!0),h=new TextDecoder("utf-8"),l=JSON.parse(h.decode(new DataView(e.data,10,o)));let c=0;l.compression==="gzip"&&(c=2);let d=0;"minzoom"in l&&(d=+l.minzoom);let _=0;"maxzoom"in l&&(_=+l.maxzoom);let f=0,m=0,y=0,w=-180,b=-85,C=180,S=85;if(l.bounds){const x=l.bounds.split(",");w=+x[0],b=+x[1],C=+x[2],S=+x[3]}if(l.center){const x=l.center.split(",");f=+x[0],m=+x[1],y=+x[2]}return{specVersion:i.getUint16(2,!0),rootDirectoryOffset:10+o,rootDirectoryLength:s*17,jsonMetadataOffset:10,jsonMetadataLength:o,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:c,tileType:1,minZoom:d,maxZoom:_,minLon:w,minLat:b,maxLon:C,maxLat:S,centerZoom:y,centerLon:f,centerLat:m,etag:e.etag}})}function Id(n,e,i,o,s,h,l){return xt(this,null,function*(){let c=yield i.getArrayBuffer(e,n.rootDirectoryOffset,n.rootDirectoryLength,n);n.specVersion===1&&(c=Fs(c));const d=Os(new DataView(c),o,s,h);if(d){let m=(yield e.getBytes(d.offset,d.length,l)).data;const y=new DataView(m);return y.getUint8(0)==31&&y.getUint8(1)==139&&(m=Lr(new Uint8Array(m))),{data:m}}const _=Ad(new DataView(c),{z:o,x:s,y:h});if(_){const f=Td(new DataView(c),_.z,_.x,_.y);if(f){let m=yield i.getArrayBuffer(e,f.offset,f.length,n);n.specVersion===1&&(m=Fs(m));const y=Os(new DataView(m),o,s,h);if(y){let b=(yield e.getBytes(y.offset,y.length,l)).data;const C=new DataView(b);return C.getUint8(0)==31&&C.getUint8(1)==139&&(b=Lr(new Uint8Array(b))),{data:b}}}}})}var lh={getHeader:Bd,getZxy:Id};function Te(n,e){return(e>>>0)*4294967296+(n>>>0)}function Od(n,e){const i=e.buf;let o,s;if(s=i[e.pos++],o=(s&112)>>4,s<128||(s=i[e.pos++],o|=(s&127)<<3,s<128)||(s=i[e.pos++],o|=(s&127)<<10,s<128)||(s=i[e.pos++],o|=(s&127)<<17,s<128)||(s=i[e.pos++],o|=(s&127)<<24,s<128)||(s=i[e.pos++],o|=(s&1)<<31,s<128))return Te(n,o);throw new Error("Expected varint not more than 10 bytes")}function ai(n){const e=n.buf;let i,o;return o=e[n.pos++],i=o&127,o<128||(o=e[n.pos++],i|=(o&127)<<7,o<128)||(o=e[n.pos++],i|=(o&127)<<14,o<128)||(o=e[n.pos++],i|=(o&127)<<21,o<128)?i:(o=e[n.pos],i|=(o&15)<<28,Od(i,n))}function Fd(n,e,i,o){if(o==0){i==1&&(e[0]=n-1-e[0],e[1]=n-1-e[1]);const s=e[0];e[0]=e[1],e[1]=s}}function Zd(n,e,i){if(n>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(e>Math.pow(2,n)-1||i>Math.pow(2,n)-1)throw Error("tile x/y outside zoom level bounds");let o=0,s=0;for(;s<n;)o+=Math.pow(2,s)*Math.pow(2,s),s++;const h=Math.pow(2,n);let l=0,c=0,d=0;const _=[e,i];let f=h/2;for(;f>0;)l=(_[0]&f)>0?1:0,c=(_[1]&f)>0?1:0,d+=f*f*(3*l^c),Fd(f,_,l,c),f=f/2;return o+d}function uh(n,e){return xt(this,null,function*(){if(e===1||e===0)return n;if(e===2)return Lr(new Uint8Array(n));throw Error("Compression method not supported")})}var Rd=127;function Nd(n,e){let i=0,o=n.length-1;for(;i<=o;){const s=o+i>>1,h=e-n[s].tileId;if(h>0)i=s+1;else if(h<0)o=s-1;else return n[s]}return o>=0&&(n[o].runLength===0||e-n[o].tileId<n[o].runLength)?n[o]:null}var jd=class{constructor(n){this.url=n}getKey(){return this.url}getBytes(n,e,i){return xt(this,null,function*(){let o;i||(o=new AbortController,i=o.signal);let s=yield fetch(this.url,{signal:i,headers:{Range:"bytes="+n+"-"+(n+e-1)}});if(s.status===416&&n===0){const c=s.headers.get("Content-Range");if(!c||!c.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const d=+c.substr(8);s=yield fetch(this.url,{signal:i,headers:{Range:"bytes=0-"+(d-1)}})}if(s.status>=300)throw Error("Bad response code: "+s.status);const h=s.headers.get("Content-Length");if(s.status===200&&(!h||+h>e))throw o&&o.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield s.arrayBuffer(),etag:s.headers.get("ETag")||void 0,cacheControl:s.headers.get("Cache-Control")||void 0,expires:s.headers.get("Expires")||void 0}})}};function Ot(n,e){const i=n.getUint32(e+4,!0),o=n.getUint32(e+0,!0);return i*Math.pow(2,32)+o}function Wd(n,e){const i=new DataView(n),o=i.getUint8(7);if(o>3)throw Error(`Archive is spec version ${o} but this library supports up to spec version 3`);return{specVersion:o,rootDirectoryOffset:Ot(i,8),rootDirectoryLength:Ot(i,16),jsonMetadataOffset:Ot(i,24),jsonMetadataLength:Ot(i,32),leafDirectoryOffset:Ot(i,40),leafDirectoryLength:Ot(i,48),tileDataOffset:Ot(i,56),tileDataLength:Ot(i,64),numAddressedTiles:Ot(i,72),numTileEntries:Ot(i,80),numTileContents:Ot(i,88),clustered:i.getUint8(96)===1,internalCompression:i.getUint8(97),tileCompression:i.getUint8(98),tileType:i.getUint8(99),minZoom:i.getUint8(100),maxZoom:i.getUint8(101),minLon:i.getInt32(102,!0)/1e7,minLat:i.getInt32(106,!0)/1e7,maxLon:i.getInt32(110,!0)/1e7,maxLat:i.getInt32(114,!0)/1e7,centerZoom:i.getUint8(118),centerLon:i.getInt32(119,!0)/1e7,centerLat:i.getInt32(123,!0)/1e7,etag:e}}function ch(n){const e={buf:new Uint8Array(n),pos:0},i=ai(e),o=[];let s=0;for(let h=0;h<i;h++){const l=ai(e);o.push({tileId:s+l,offset:0,length:0,runLength:1}),s+=l}for(let h=0;h<i;h++)o[h].runLength=ai(e);for(let h=0;h<i;h++)o[h].length=ai(e);for(let h=0;h<i;h++){const l=ai(e);l===0&&h>0?o[h].offset=o[h-1].offset+o[h-1].length:o[h].offset=l-1}return o}function Ud(n){const e=new DataView(n);return e.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):e.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var Be=class extends Error{};function Vd(n,e,i,o){return xt(this,null,function*(){const s=yield n.getBytes(0,16384);if(new DataView(s.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(Ud(s.data)<3)return[yield lh.getHeader(n)];const l=s.data.slice(0,Rd);let c=s.etag;o&&s.etag!=o&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+n.getKey()),c=void 0);const d=Wd(l,c);if(i){const _=s.data.slice(d.rootDirectoryOffset,d.rootDirectoryOffset+d.rootDirectoryLength),f=n.getKey()+"|"+(d.etag||"")+"|"+d.rootDirectoryOffset+"|"+d.rootDirectoryLength,m=ch(yield e(_,d.internalCompression));return[d,[f,m.length,m]]}return[d,void 0]})}function Yd(n,e,i,o,s){return xt(this,null,function*(){const h=yield n.getBytes(i,o);if(s.etag&&s.etag!==h.etag)throw new Be(h.etag);const l=yield e(h.data,s.internalCompression),c=ch(l);if(c.length===0)throw new Error("Empty directory is invalid");return c})}var Xd=class{constructor(n=100,e=!0,i=uh){this.cache=new Map,this.maxCacheEntries=n,this.counter=1,this.prefetch=e,this.decompress=i}getHeader(n,e){return xt(this,null,function*(){const i=n.getKey();if(this.cache.has(i))return this.cache.get(i).lastUsed=this.counter++,yield this.cache.get(i).data;const o=new Promise((s,h)=>{Vd(n,this.decompress,this.prefetch,e).then(l=>{l[1]&&this.cache.set(l[1][0],{lastUsed:this.counter++,data:Promise.resolve(l[1][2])}),s(l[0]),this.prune()}).catch(l=>{h(l)})});return this.cache.set(i,{lastUsed:this.counter++,data:o}),o})}getDirectory(n,e,i,o){return xt(this,null,function*(){const s=n.getKey()+"|"+(o.etag||"")+"|"+e+"|"+i;if(this.cache.has(s))return this.cache.get(s).lastUsed=this.counter++,yield this.cache.get(s).data;const h=new Promise((l,c)=>{Yd(n,this.decompress,e,i,o).then(d=>{l(d),this.prune()}).catch(d=>{c(d)})});return this.cache.set(s,{lastUsed:this.counter++,data:h}),h})}getArrayBuffer(n,e,i,o){return xt(this,null,function*(){const s=n.getKey()+"|"+(o.etag||"")+"|"+e+"|"+i;if(this.cache.has(s))return this.cache.get(s).lastUsed=this.counter++,yield this.cache.get(s).data;const h=new Promise((l,c)=>{n.getBytes(e,i).then(d=>{if(o.etag&&o.etag!==d.etag)throw new Be(d.etag);l(d.data),this.cache.has(s),this.prune()}).catch(d=>{c(d)})});return this.cache.set(s,{lastUsed:this.counter++,data:h}),h})}prune(){if(this.cache.size>=this.maxCacheEntries){let n=1/0,e;this.cache.forEach((i,o)=>{i.lastUsed<n&&(n=i.lastUsed,e=o)}),e&&this.cache.delete(e)}}invalidate(n,e){return xt(this,null,function*(){this.cache.delete(n.getKey()),yield this.getHeader(n,e)})}},Hd=class{constructor(n,e,i){typeof n=="string"?this.source=new jd(n):this.source=n,i?this.decompress=i:this.decompress=uh,e?this.cache=e:this.cache=new Xd}getHeader(){return xt(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(n,e,i,o){return xt(this,null,function*(){const s=Zd(n,e,i),h=yield this.cache.getHeader(this.source);if(h.specVersion<3)return lh.getZxy(h,this.source,this.cache,n,e,i,o);if(n<h.minZoom||n>h.maxZoom)return;let l=h.rootDirectoryOffset,c=h.rootDirectoryLength;for(let d=0;d<=3;d++){const _=yield this.cache.getDirectory(this.source,l,c,h),f=Nd(_,s);if(f)if(f.runLength>0){const m=yield this.source.getBytes(h.tileDataOffset+f.offset,f.length,o);if(h.etag&&h.etag!==m.etag)throw new Be(m.etag);return{data:yield this.decompress(m.data,h.tileCompression),cacheControl:m.cacheControl,expires:m.expires}}else l=h.leafDirectoryOffset+f.offset,c=f.length;else return}throw Error("Maximum directory depth exceeded")})}getZxy(n,e,i,o){return xt(this,null,function*(){try{return yield this.getZxyAttempt(n,e,i,o)}catch(s){if(s instanceof Be)return this.cache.invalidate(this.source,s.message),yield this.getZxyAttempt(n,e,i,o);throw s}})}getMetadataAttempt(){return xt(this,null,function*(){const n=yield this.cache.getHeader(this.source),e=yield this.source.getBytes(n.jsonMetadataOffset,n.jsonMetadataLength);if(n.etag&&n.etag!==e.etag)throw new Be(e.etag);const i=yield this.decompress(e.data,n.internalCompression),o=new TextDecoder("utf-8");return JSON.parse(o.decode(i))})}getMetadata(){return xt(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(n){if(n instanceof Be)return this.cache.invalidate(this.source,n.message),yield this.getMetadataAttempt();throw n}})}},Ze;(function(n){n[n.Point=1]="Point",n[n.Line=2]="Line",n[n.Polygon=3]="Polygon"})(Ze||(Ze={}));function ge(n){return n.x+":"+n.y+":"+n.z}var Gd=(n,e,i)=>{n.pos=e;for(var o=n.readVarint()+n.pos,s=1,h=0,l=0,c=0,d=1/0,_=-1/0,f=1/0,m=-1/0,y=[],w=[];n.pos<o;){if(h<=0){var b=n.readVarint();s=b&7,h=b>>3}if(h--,s===1||s===2)l+=n.readSVarint()*i,c+=n.readSVarint()*i,l<d&&(d=l),l>_&&(_=l),c<f&&(f=c),c>m&&(m=c),s===1&&(w.length>0&&y.push(w),w=[]),w.push(new Mi.default(l,c));else if(s===7)w&&w.push(w[0].clone());else throw new Error("unknown command "+s)}return w&&y.push(w),{geom:y,bbox:{minX:d,minY:f,maxX:_,maxY:m}}};function dh(n,e){let i=new ld.VectorTile(new ud.default(n)),o=new Map;for(let[s,h]of Object.entries(i.layers)){let l=[],c=h;for(let d=0;d<c.length;d++){let _=Gd(c.feature(d)._pbf,c.feature(d)._geometry,e/c.extent),f=0;for(let m of _.geom)f+=m.length;l.push({id:c.feature(d).id,geomType:c.feature(d).type,geom:_.geom,numVertices:f,bbox:_.bbox,props:c.feature(d).properties})}o.set(s,l)}return o}var Zs=class{constructor(n,e){typeof n=="string"?this.p=new Hd(n):this.p=n,this.controllers=[],this.shouldCancelZooms=e}get(n,e){return We(this,null,function*(){this.shouldCancelZooms&&(this.controllers=this.controllers.filter(h=>h[0]!=n.z?(h[1].abort(),!1):!0));const i=new AbortController;this.controllers.push([n.z,i]);const o=i.signal;let s=yield this.p.getZxy(n.z,n.x,n.y,o);return s?dh(s.data,e):new Map})}},qd=class{constructor(n,e){this.url=n,this.controllers=[],this.shouldCancelZooms=e}get(n,e){return We(this,null,function*(){this.shouldCancelZooms&&(this.controllers=this.controllers.filter(h=>h[0]!=n.z?(h[1].abort(),!1):!0));let i=this.url.replace("{z}",n.z.toString()).replace("{x}",n.x.toString()).replace("{y}",n.y.toString());const o=new AbortController;this.controllers.push([n.z,o]);const s=o.signal;return new Promise((h,l)=>{fetch(i,{signal:s}).then(c=>c.arrayBuffer()).then(c=>{let d=dh(c,e);h(d)}).catch(c=>{l(c)})})})}},Cr=6378137,$d=85.0511287798,en=Cr*Math.PI,Kd=n=>{let e=Math.PI/180,i=Math.max(Math.min($d,n[0]),-85.0511287798),o=Math.sin(i*e);return new Mi.default(Cr*n[1]*e,Cr*Math.log((1+o)/(1-o))/2)};function Rs(n){return n*n}function hn(n,e){return Rs(n.x-e.x)+Rs(n.y-e.y)}function Jd(n,e,i){var o=hn(e,i);if(o===0)return hn(n,e);var s=((n.x-e.x)*(i.x-e.x)+(n.y-e.y)*(i.y-e.y))/o;return s=Math.max(0,Math.min(1,s)),hn(n,new Mi.default(e.x+s*(i.x-e.x),e.y+s*(i.y-e.y)))}function Ns(n,e){for(var i=!1,o=0,s=e.length-1;o<e.length;s=o++){var h=e[o].x,l=e[o].y,c=e[s].x,d=e[s].y,_=l>n.y!=d>n.y&&n.x<(c-h)*(n.y-l)/(d-l)+h;_&&(i=!i)}return i}function Qd(n){for(var e=0,i=0;i<n.length;i++){let o=(i+1)%n.length;e+=n[i].x*n[o].y,e-=n[o].x*n[i].y}return e<0}function tf(n,e){var i=!1;for(let o of e)if(Qd(o))Ns(n,o)&&(i=!1);else{if(i)return!0;Ns(n,o)&&(i=!0)}return i}function ef(n,e){let i=1/0;for(let o of e){let s=Math.sqrt(hn(n,o[0]));s<i&&(i=s)}return i}function nf(n,e){let i=1/0;for(let s of e)for(var o=0;o<s.length-1;o++){let h=Math.sqrt(Jd(n,s[o],s[o+1]));h<i&&(i=h)}return i}var rf=class{constructor(n,e){this.source=n,this.cache=new Map,this.inflight=new Map,this.tileSize=e}queryFeatures(n,e,i,o){let s=Kd([e,n]);var h=new Mi.default((s.x+en)/(en*2),1-(s.y+en)/(en*2));h.x>1&&(h.x=h.x-Math.floor(h.x));let l=h.mult(1<<i),c=Math.floor(l.x),d=Math.floor(l.y);const _=ge({z:i,x:c,y:d});let f=[],m=this.cache.get(_);if(m){const y=new Mi.default((l.x-c)*this.tileSize,(l.y-d)*this.tileSize);for(let[w,b]of m.data.entries())for(let C of b)C.geomType==1?ef(y,C.geom)<o&&f.push({feature:C,layerName:w}):C.geomType==2?nf(y,C.geom)<o&&f.push({feature:C,layerName:w}):tf(y,C.geom)&&f.push({feature:C,layerName:w})}return f}get(n){return We(this,null,function*(){const e=ge(n);return new Promise((i,o)=>{let s=this.cache.get(e);if(s)s.used=performance.now(),i(s.data);else{let h=this.inflight.get(e);h?h.push([i,o]):(this.inflight.set(e,[]),this.source.get(n,this.tileSize).then(l=>{this.cache.set(e,{used:performance.now(),data:l});let c=this.inflight.get(e);if(c&&c.forEach(d=>d[0](l)),this.inflight.delete(e),i(l),this.cache.size>=64){let d=1/0,_;this.cache.forEach((f,m)=>{f.used<d&&(d=f.used,_=m)}),_&&this.cache.delete(_)}}).catch(l=>{let c=this.inflight.get(e);c&&c.forEach(d=>d[1](l)),this.inflight.delete(e),o(l)}))}})})}},fh=(n,e,i)=>{let o=[];for(let s of n){let h=[];for(let l of s)h.push(l.clone().mult(e).add(i));o.push(h)}return o},nn=(n,e)=>{let i=1<<e;return n<0&&(n=i+n),n>=i&&(n=n%i),n},of=class{constructor(n,e,i){this.tileCache=n,this.maxDataLevel=e,this.levelDiff=i}dataTilesForBounds(n,e){let i=Math.pow(2,n)/Math.pow(2,Math.ceil(n)),o=[];var s=1,h=this.tileCache.tileSize;if(n<this.levelDiff)s=1/(1<<this.levelDiff-n)*i,o.push({data_tile:{z:0,x:0,y:0},origin:new Se.default(0,0),scale:s,dim:h*s});else if(n<=this.levelDiff+this.maxDataLevel){let d=1<<this.levelDiff,_=256*i,f=Math.ceil(n)-this.levelDiff,m=Math.floor(e.minX/d/_),y=Math.floor(e.minY/d/_),w=Math.floor(e.maxX/d/_),b=Math.floor(e.maxY/d/_);for(var l=m;l<=w;l++)for(var c=y;c<=b;c++){let C=new Se.default(l*d*_,c*d*_);o.push({data_tile:{z:f,x:nn(l,f),y:nn(c,f)},origin:C,scale:i,dim:h*i})}}else{let d=1<<this.levelDiff;s=(1<<Math.ceil(n)-this.maxDataLevel-this.levelDiff)*i;let _=Math.floor(e.minX/d/256/s),f=Math.floor(e.minY/d/256/s),m=Math.floor(e.maxX/d/256/s),y=Math.floor(e.maxY/d/256/s);for(var l=_;l<=m;l++)for(var c=f;c<=y;c++){let C=new Se.default(l*d*256*s,c*d*256*s);o.push({data_tile:{z:this.maxDataLevel,x:nn(l,this.maxDataLevel),y:nn(c,this.maxDataLevel)},origin:C,scale:s,dim:h*s})}}return o}dataTileForDisplayTile(n){var e,i=1,o=this.tileCache.tileSize,s;if(n.z<this.levelDiff)e={z:0,x:0,y:0},i=1/(1<<this.levelDiff-n.z),s=new Se.default(0,0),o=o*i;else if(n.z<=this.levelDiff+this.maxDataLevel){let h=1<<this.levelDiff;e={z:n.z-this.levelDiff,x:Math.floor(n.x/h),y:Math.floor(n.y/h)},s=new Se.default(e.x*h*256,e.y*h*256)}else{i=1<<n.z-this.maxDataLevel-this.levelDiff;let h=1<<this.levelDiff;e={z:this.maxDataLevel,x:Math.floor(n.x/h/i),y:Math.floor(n.y/h/i)},s=new Se.default(e.x*h*i*256,e.y*h*i*256),o=o*i}return{data_tile:e,scale:i,origin:s,dim:o}}getBbox(n,e){return We(this,null,function*(){let i=this.dataTilesForBounds(n,e);return(yield Promise.all(i.map(s=>this.tileCache.get(s.data_tile)))).map((s,h)=>{let l=i[h];return{data:s,z:n,data_tile:l.data_tile,scale:l.scale,dim:l.dim,origin:l.origin}})})}getDisplayTile(n){return We(this,null,function*(){let e=this.dataTileForDisplayTile(n);return{data:yield this.tileCache.get(e.data_tile),z:n.z,data_tile:e.data_tile,scale:e.scale,origin:e.origin,dim:e.dim}})}queryFeatures(n,e,i){let o=Math.round(i),s=Math.min(o-this.levelDiff,this.maxDataLevel),h=16/(1<<o-s);return this.tileCache.queryFeatures(n,e,s,h)}},sf=n=>{let e=o=>{let s=o.levelDiff===void 0?2:o.levelDiff,h=o.maxDataZoom||14,l;typeof o.url=="string"?o.url.endsWith(".pmtiles")?l=new Zs(o.url,!0):l=new qd(o.url,!0):l=new Zs(o.url,!0);let c=new rf(l,256*1<<s);return new of(c,h,s)},i=new Map;if(n.sources)for(const o in n.sources)i.set(o,e(n.sources[o]));else i.set("",e(n));return i},af=Et(ie());function hf(n,e,i,o,s,h,l,c,d){let _=performance.now();n.save(),n.miterLimit=2;for(var f of s){if(f.minzoom&&e<f.minzoom||f.maxzoom&&e>f.maxzoom)continue;let b=i.get(f.dataSource||"");if(b)for(let C of b){var m=C.data.get(f.dataLayer);if(m===void 0)continue;f.symbolizer.before&&f.symbolizer.before(n,C.z);let S=C.origin;C.dim;let z=C.scale;n.save(),n.translate(S.x-l.x,S.y-l.y);for(var y of m){let x=y.geom,M=y.bbox;M.maxX*z+S.x<h.minX||M.minX*z+S.x>h.maxX||M.minY*z+S.y>h.maxY||M.maxY*z+S.y<h.minY||f.filter&&!f.filter(C.z,y)||(z!=1&&(x=fh(x,z,new af.default(0,0))),f.symbolizer.draw(n,x,C.z,y))}n.restore()}}if(o){let b=o.searchBbox(h,1/0);for(var w of b)if(n.save(),n.translate(w.anchor.x-l.x,w.anchor.y-l.y),w.draw(n),n.restore(),d){n.lineWidth=.5,n.strokeStyle=d,n.fillStyle=d,n.globalAlpha=1,n.fillRect(w.anchor.x-l.x-2,w.anchor.y-l.y-2,4,4);for(let C of w.bboxes)n.strokeRect(C.minX-l.x,C.minY-l.y,C.maxX-C.minX,C.maxY-C.minY)}}return n.restore(),performance.now()-_}var lf=Et(ie()),uf=Et(od()),cf=(n,e,i)=>{let o=256,s=e/o,h=Math.floor(i.minX/o),l=Math.floor(i.minY/o),c=Math.floor(i.maxX/o),d=Math.floor(i.maxY/o),_=Math.log2(s),f=[];for(let m=h;m<=c;m++){let y=m%(1<<n);for(let w=l;w<=d;w++)f.push({display:ge({z:n,x:y,y:w}),key:ge({z:n-_,x:Math.floor(y/s),y:Math.floor(w/s)})})}return f},df=class{constructor(n,e){this.tree=new uf.default,this.current=new Map,this.dim=n,this.maxLabeledTiles=e}hasPrefix(n){for(let e of this.current.keys())if(e.startsWith(n))return!0;return!1}has(n){return this.current.has(n)}size(){return this.current.size}keys(){return this.current.keys()}searchBbox(n,e){let i=new Set;for(let o of this.tree.search(n))o.indexed_label.order<=e&&i.add(o.indexed_label);return i}searchLabel(n,e){let i=new Set;for(let o of n.bboxes)for(let s of this.tree.search(o))s.indexed_label.order<=e&&i.add(s.indexed_label);return i}bboxCollides(n,e){for(let i of this.tree.search(n))if(i.indexed_label.order<=e)return!0;return!1}labelCollides(n,e){for(let i of n.bboxes)for(let o of this.tree.search(i))if(o.indexed_label.order<=e)return!0;return!1}deduplicationCollides(n){if(!n.deduplicationKey||!n.deduplicationDistance)return!1;let e=n.deduplicationDistance,i={minX:n.anchor.x-e,minY:n.anchor.y-e,maxX:n.anchor.x+e,maxY:n.anchor.y+e};for(let o of this.tree.search(i))if(o.indexed_label.deduplicationKey===n.deduplicationKey&&o.indexed_label.anchor.dist(n.anchor)<e)return!0;return!1}makeEntry(n){this.current.get(n)&&console.log("consistency error 1");let e=new Set;this.current.set(n,e)}insert(n,e,i){let o={anchor:n.anchor,bboxes:n.bboxes,draw:n.draw,order:e,tileKey:i,deduplicationKey:n.deduplicationKey,deduplicationDistance:n.deduplicationDistance},s=this.current.get(i);if(!s){let f=new Set;this.current.set(i,f),s=f}s.add(o);var h=!1,l=!1;for(let f of n.bboxes){var c=f;c.indexed_label=o,this.tree.insert(c),f.minX<0&&(h=!0),f.maxX>this.dim&&(l=!0)}if(h||l){var d=h?this.dim:-this.dim,_=[];for(let y of n.bboxes)_.push({minX:y.minX+d,minY:y.minY,maxX:y.maxX+d,maxY:y.maxY});let f={anchor:new lf.default(n.anchor.x+d,n.anchor.y),bboxes:_,draw:n.draw,order:e,tileKey:i},m=this.current.get(i);m&&m.add(f);for(let y of _){var c=y;c.indexed_label=f,this.tree.insert(c)}}}pruneOrNoop(n){let e=n.split(":"),i,o=0,s=0;for(var h of this.current.keys()){let l=h.split(":");if(l[3]===e[3]){s++;let c=Math.sqrt(Math.pow(+l[0]-+e[0],2)+Math.pow(+l[1]-+e[1],2));c>o&&(o=c,i=h)}i&&s>this.maxLabeledTiles&&this.pruneKey(i)}}pruneKey(n){let e=this.current.get(n);if(!e)return;let i=[];for(let o of this.tree.all())e.has(o.indexed_label)&&i.push(o);i.forEach(o=>{this.tree.remove(o)}),this.current.delete(n)}removeLabel(n){let e=[];for(let o of this.tree.all())n==o.indexed_label&&e.push(o);e.forEach(o=>{this.tree.remove(o)});let i=this.current.get(n.tileKey);i&&i.delete(n)}},ff=class{constructor(n,e,i,o,s){this.index=new df(256*1<<n,o),this.z=n,this.scratch=e,this.labelRules=i,this.callback=s}layout(n){let e=performance.now(),i=new Set;for(let[l,c]of n)for(let d of c){let _=ge(d.data_tile)+":"+l;this.index.has(_)||(this.index.makeEntry(_),i.add(_))}let o=new Set;for(let[l,c]of this.labelRules.entries()){if(c.visible==!1||c.minzoom&&this.z<c.minzoom||c.maxzoom&&this.z>c.maxzoom)continue;let d=c.dataSource||"",_=n.get(d);if(_)for(let f of _){let m=ge(f.data_tile)+":"+d;if(!i.has(m))continue;let y=f.data.get(c.dataLayer);if(y===void 0)continue;let w=y;c.sort&&w.sort((C,S)=>c.sort?c.sort(C.props,S.props):0);let b={index:this.index,zoom:this.z,scratch:this.scratch,order:l,overzoom:this.z-f.data_tile.z};for(let C of w){if(c.filter&&!c.filter(this.z,C))continue;let S=fh(C.geom,f.scale,f.origin),z=c.symbolizer.place(b,S,C);if(z)for(let x of z){var s=!1;if(!(x.deduplicationKey&&this.index.deduplicationCollides(x))){if(this.index.labelCollides(x,1/0)){if(!this.index.labelCollides(x,l)){let M=this.index.searchLabel(x,1/0);for(let k of M){this.index.removeLabel(k);for(let B of k.bboxes)this.findInvalidatedTiles(o,f.dim,B,m)}this.index.insert(x,l,m),s=!0}}else this.index.insert(x,l,m),s=!0;if(s)for(let M of x.bboxes)(M.maxX>f.origin.x+f.dim||M.minX<f.origin.x||M.minY<f.origin.y||M.maxY>f.origin.y+f.dim)&&this.findInvalidatedTiles(o,f.dim,M,m)}}}}}for(var h of i)this.index.pruneOrNoop(h);return o.size>0&&this.callback&&this.callback(o),performance.now()-e}findInvalidatedTiles(n,e,i,o){let s=cf(this.z,e,i);for(let h of s)h.key!=o&&this.index.hasPrefix(h.key)&&n.add(h.display)}add(n){var e=!0;for(let[i,o]of n)for(let s of o)this.index.has(ge(s.data_tile)+":"+i)||(e=!1);return e?0:this.layout(n)}},js=class{constructor(n,e,i,o){this.labelers=new Map,this.scratch=n,this.labelRules=e,this.maxLabeledTiles=i,this.callback=o}add(n,e){var i=this.labelers.get(n);return i||(i=new ff(n,this.scratch,this.labelRules,this.maxLabeledTiles,this.callback),this.labelers.set(n,i)),i.add(e)}getIndex(n){let e=this.labelers.get(n);if(e)return e.index}},Ws={earth:"#FFFBF6",glacier:"#ffffff",residential:"#F4F4F8",hospital:"#FFF6F6",cemetery:"#EFF2EE",school:"#F7F6FF",industrial:"#FFF9EF",wood:"#F4F9EF",grass:"#EBF9E3",park:"#E5F9D5",water:"#B7DFF2",sand:"#ebebeb",buildings:"#F2EDE8",highwayCasing:"#FFC3C3",majorRoadCasing:"#FFB9B9",mediumRoadCasing:"#FFCE8E",minorRoadCasing:"#cccccc",highway:"#FFCEBB",majorRoad:"#FFE4B3",mediumRoad:"#FFF2C8",minorRoad:"#ffffff",boundaries:"#9e9e9e",mask:"#dddddd",countryLabel:"#aaaaaa",cityLabel:"#6C6C6C",stateLabel:"#999999",neighbourhoodLabel:"#888888",landuseLabel:"#898989",waterLabel:"#41ABDC",naturalLabel:"#4B8F14",roadsLabel:"#888888",poisLabel:"#606060"},Us={earth:"#151515",glacier:"#1c1c1c",residential:"#252B2F",hospital:"#3E2C2C",cemetery:"#36483D",school:"#2C3440",industrial:"#33312C",wood:"#3A3E38",grass:"#4E604D",park:"#2C4034",water:"#4D5B73",sand:"#777777",buildings:"#464545",highwayCasing:"#000000",majorRoadCasing:"#1C1B1B",mediumRoadCasing:"#3E3E3E",minorRoadCasing:"#000000",highway:"#5B5B5B",majorRoad:"#595959",mediumRoad:"#4F4F4F",minorRoad:"#393939",boundaries:"#666666",mask:"#dddddd",countryLabel:"#ffffff",cityLabel:"#FFFFFF",stateLabel:"#ffffff",neighbourhoodLabel:"#FDFDFD",landuseLabel:"#DDDDDD",waterLabel:"#707E95",naturalLabel:"#4c4c4c",roadsLabel:"#C4C4C4",poisLabel:"#959393"};function yi(n,e,i){return Math.min(Math.max(n,i),e)}var hi=class extends Error{constructor(n){super(`Failed to parse color: "${n}"`)}};function pf(n){if(typeof n!="string")throw new hi(n);if(n.trim().toLowerCase()==="transparent")return[0,0,0,0];let e=n.trim();e=wf.test(n)?function(l){const c=l.toLowerCase().trim(),d=_f[function(_){let f=5381,m=_.length;for(;m;)f=33*f^_.charCodeAt(--m);return(f>>>0)%2341}(c)];if(!d)throw new hi(l);return`#${d}`}(n):n;const i=mf.exec(e);if(i){const l=Array.from(i).slice(1);return[...l.slice(0,3).map(c=>parseInt(Li(c,2),16)),parseInt(Li(l[3]||"f",2),16)/255]}const o=gf.exec(e);if(o){const l=Array.from(o).slice(1);return[...l.slice(0,3).map(c=>parseInt(c,16)),parseInt(l[3]||"ff",16)/255]}const s=vf.exec(e);if(s){const l=Array.from(s).slice(1);return[...l.slice(0,3).map(c=>parseInt(c,10)),parseFloat(l[3]||"1")]}const h=yf.exec(e);if(h){const[l,c,d,_]=Array.from(h).slice(1).map(parseFloat);if(yi(0,100,c)!==c)throw new hi(n);if(yi(0,100,d)!==d)throw new hi(n);return[...xf(l,c,d),_||1]}throw new hi(n)}var Vs=n=>parseInt(n.replace(/_/g,""),36),_f="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((n,e)=>{const i=Vs(e.substring(0,3)),o=Vs(e.substring(3)).toString(16);let s="";for(let h=0;h<6-o.length;h++)s+="0";return n[i]=`${s}${o}`,n},{}),Li=(n,e)=>Array.from(Array(e)).map(()=>n).join(""),mf=new RegExp(`^#${Li("([a-f0-9])",3)}([a-f0-9])?$`,"i"),gf=new RegExp(`^#${Li("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),vf=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${Li(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),yf=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,wf=/^[a-z]+$/i,Ys=n=>Math.round(255*n),xf=(n,e,i)=>{let o=i/100;if(e===0)return[o,o,o].map(Ys);const s=(n%360+360)%360/60,h=(1-Math.abs(2*o-1))*(e/100),l=h*(1-Math.abs(s%2-1));let c=0,d=0,_=0;s>=0&&s<1?(c=h,d=l):s>=1&&s<2?(c=l,d=h):s>=2&&s<3?(d=h,_=l):s>=3&&s<4?(d=l,_=h):s>=4&&s<5?(c=l,_=h):s>=5&&s<6&&(c=h,_=l);const f=o-h/2;return[c+f,d+f,_+f].map(Ys)};function Xs(n){const[e,i,o,s]=pf(n).map((_,f)=>f===3?_:_/255),h=Math.max(e,i,o),l=Math.min(e,i,o),c=(h+l)/2;if(h===l)return[0,0,c,s];const d=h-l;return[60*(e===h?(i-o)/d+(i<o?6:0):i===h?(o-e)/d+2:(e-i)/d+4),c>.5?d/(2-h-l):d/(h+l),c,s]}function bf(n,e,i,o){return`hsla(${(n%360).toFixed()}, ${yi(0,100,100*e).toFixed()}%, ${yi(0,100,100*i).toFixed()}%, ${parseFloat(yi(0,1,o).toFixed(3))})`}var Zt=Et(ie());Et(sd());var Pf=Et(hd()),Pt=class{constructor(n,e){this.str=n??e,this.per_feature=typeof this.str=="function"&&this.str.length==2}get(n,e){return typeof this.str=="function"?this.str(n,e):this.str}},pt=class{constructor(n,e=1){this.value=n??e,this.per_feature=typeof this.value=="function"&&this.value.length==2}get(n,e){return typeof this.value=="function"?this.value(n,e):this.value}},Wr=class{constructor(n){var e;this.label_props=(e=n==null?void 0:n.label_props)!=null?e:["name"],this.textTransform=n==null?void 0:n.textTransform}get(n,e){let i,o;typeof this.label_props=="function"?o=this.label_props(n,e):o=this.label_props;for(let h of o)if(e.props.hasOwnProperty(h)&&typeof e.props[h]=="string"){i=e.props[h];break}let s;return typeof this.textTransform=="function"?s=this.textTransform(n,e):s=this.textTransform,i&&s==="uppercase"?i=i.toUpperCase():i&&s==="lowercase"?i=i.toLowerCase():i&&s==="capitalize"&&(i=i.toLowerCase().split(" ").map(c=>c[0].toUpperCase()+c.slice(1)).join(" ")),i}},Ur=class{constructor(n){var e,i;n!=null&&n.font?this.font=n.font:(this.family=(e=n==null?void 0:n.fontFamily)!=null?e:"sans-serif",this.size=(i=n==null?void 0:n.fontSize)!=null?i:12,this.weight=n==null?void 0:n.fontWeight,this.style=n==null?void 0:n.fontStyle)}get(n,e){if(this.font)return typeof this.font=="function"?this.font(n,e):this.font;var i="";this.style&&(typeof this.style=="function"?i=this.style(n,e)+" ":i=this.style+" ");var o="";this.weight&&(typeof this.weight=="function"?o=this.weight(n,e)+" ":o=this.weight+" ");var s;typeof this.size=="function"?s=this.size(n,e):s=this.size;var h;return typeof this.family=="function"?h=this.family(n,e):h=this.family,`${i}${o}${s}px ${h}`}},Mf=class{constructor(n,e=[]){this.value=n??e,this.per_feature=typeof this.value=="function"&&this.value.length==2}get(n,e){return typeof this.value=="function"?this.value(n,e):this.value}},Hs=Et(ie()),Lf=(n,e,i)=>{var o=[],s,h,l,c=0,d=0,_=0,f=0,m=0,y=0,w=0,b=0,C=0,S=0,z=0,x=0;if(n.length<2)return[];if(n.length===2)return _=Math.sqrt(Math.pow(n[1].x-n[0].x,2)+Math.pow(n[1].y-n[0].y,2)),[{length:_,beginIndex:0,beginDistance:0,endIndex:2,endDistance:_}];for(f=Math.sqrt(Math.pow(n[1].x-n[0].x,2)+Math.pow(n[1].y-n[0].y,2)),c=1,d=n.length-1;c<d;c++)s=n[c-1],h=n[c],l=n[c+1],y=h.x-s.x,w=h.y-s.y,b=l.x-h.x,C=l.y-h.y,m=Math.sqrt(b*b+C*C),_+=f,S=Math.acos((y*b+w*C)/(f*m)),(S>e||_-x>i)&&(o.push({length:_-x,beginDistance:x,beginIndex:z,endIndex:c+1,endDistance:_}),z=c,x=_),f=m;return c-z>0&&o.push({length:_-x+m,beginIndex:z,beginDistance:x,endIndex:c+1,endDistance:_+m}),o};function Cf(n,e,i,o){let s=[];for(let l of n){let c=Lf(l,Math.PI/45,e);for(let d of c)if(d.length>=e+o){let _=new Hs.default(l[d.beginIndex].x,l[d.beginIndex].y),f=l[d.endIndex-1],m=new Hs.default((f.x-_.x)/d.length,(f.y-_.y)/d.length);for(var h=o;h<d.length-e;h+=i)s.push({start:_.add(m.mult(h)),end:_.add(m.mult(h+e))})}}return s}function Ef(n,e,i,o){let s=e.x-n.x,h=e.y-n.y,l=Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)),c=[];for(var d=0;d<i+o;d+=2*o){let _=d*1/l;c.push({x:n.x+_*s,y:n.y+_*h})}return c}function ph(n,e){if(n.length<=e)return[n];let i=e-1,o=n.lastIndexOf(" ",i),s=n.indexOf(" ",i);if(o==-1&&s==-1)return[n];let h,l;return s==-1||o>=0&&i-o<s-i?(h=n.substring(0,o),l=n.substring(o+1,n.length)):(h=n.substring(0,s),l=n.substring(s+1,n.length)),[h,...ph(l,e)]}var _h=5400,Gs;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=3]="Right"})(Gs||(Gs={}));var qs;(function(n){n[n.N=1]="N",n[n.NE=2]="NE",n[n.E=3]="E",n[n.SE=4]="SE",n[n.S=5]="S",n[n.SW=6]="SW",n[n.W=7]="W",n[n.NW=8]="NW"})(qs||(qs={}));var wt=class{constructor(n){var e;this.pattern=n.pattern,this.fill=new Pt(n.fill,"black"),this.opacity=new pt(n.opacity,1),this.stroke=new Pt(n.stroke,"black"),this.width=new pt(n.width,0),this.per_feature=(e=this.fill.per_feature||this.opacity.per_feature||this.stroke.per_feature||this.width.per_feature||n.per_feature)!=null?e:!1,this.do_stroke=!1}before(n,e){if(!this.per_feature){n.globalAlpha=this.opacity.get(e),n.fillStyle=this.fill.get(e),n.strokeStyle=this.stroke.get(e);let i=this.width.get(e);i>0&&(this.do_stroke=!0),n.lineWidth=i}if(this.pattern){const i=n.createPattern(this.pattern,"repeat");i&&(n.fillStyle=i)}}draw(n,e,i,o){var s=!1;if(this.per_feature){n.globalAlpha=this.opacity.get(i,o),n.fillStyle=this.fill.get(i,o);var h=this.width.get(i,o);h&&(s=!0,n.strokeStyle=this.stroke.get(i,o),n.lineWidth=h)}let l=()=>{n.fill(),(s||this.do_stroke)&&n.stroke()};var c=0;n.beginPath();for(var d of e){c+d.length>_h&&(l(),c=0,n.beginPath());for(var _=0;_<d.length;_++){let f=d[_];_==0?n.moveTo(f.x,f.y):n.lineTo(f.x,f.y)}c+=d.length}c>0&&l()}};function kf(n,e){let i=0;for(;e[i+1][0]<n;)i++;return i}function Sf(n,e,i){return n*(i-e)+e}function Tf(n,e,i,o){const s=o[e+1][0]-o[e][0],h=n-o[e][0];return s===0?0:(Math.pow(i,h)-1)/(Math.pow(i,s)-1)}function se(n,e){return i=>{if(e.length<1)return 0;if(i<=e[0][0])return e[0][1];if(i>=e[e.length-1][0])return e[e.length-1][1];const o=kf(i,e),s=Tf(i,o,n,e);return Sf(s,e[o][1],e[o+1][1])}}var Vt=class{constructor(n){var e;this.color=new Pt(n.color,"black"),this.width=new pt(n.width),this.opacity=new pt(n.opacity),this.dash=n.dash?new Mf(n.dash):null,this.dashColor=new Pt(n.dashColor,"black"),this.dashWidth=new pt(n.dashWidth,1),this.lineCap=new Pt(n.lineCap,"butt"),this.lineJoin=new Pt(n.lineJoin,"miter"),this.skip=!1,this.per_feature=!!((e=this.dash)!=null&&e.per_feature||this.color.per_feature||this.opacity.per_feature||this.width.per_feature||this.lineCap.per_feature||this.lineJoin.per_feature||n.per_feature)}before(n,e){this.per_feature||(n.strokeStyle=this.color.get(e),n.lineWidth=this.width.get(e),n.globalAlpha=this.opacity.get(e),n.lineCap=this.lineCap.get(e),n.lineJoin=this.lineJoin.get(e))}draw(n,e,i,o){if(this.skip)return;let s=()=>{this.per_feature&&(n.globalAlpha=this.opacity.get(i,o),n.lineCap=this.lineCap.get(i,o),n.lineJoin=this.lineJoin.get(i,o)),this.dash?(n.save(),this.per_feature?(n.lineWidth=this.dashWidth.get(i,o),n.strokeStyle=this.dashColor.get(i,o),n.setLineDash(this.dash.get(i,o))):n.setLineDash(this.dash.get(i)),n.stroke(),n.restore()):(n.save(),this.per_feature&&(n.lineWidth=this.width.get(i,o),n.strokeStyle=this.color.get(i,o)),n.stroke(),n.restore())};var h=0;n.beginPath();for(var l of e){h+l.length>_h&&(s(),h=0,n.beginPath());for(var c=0;c<l.length;c++){let d=l[c];c==0?n.moveTo(d.x,d.y):n.lineTo(d.x,d.y)}h+=l.length}h>0&&s()}},Er=class{constructor(n){this.radius=new pt(n.radius,3),this.fill=new Pt(n.fill,"black"),this.stroke=new Pt(n.stroke,"white"),this.width=new pt(n.width,0),this.opacity=new pt(n.opacity)}draw(n,e,i,o){n.globalAlpha=this.opacity.get(i,o);let s=this.radius.get(i,o),h=this.width.get(i,o);h>0&&(n.strokeStyle=this.stroke.get(i,o),n.lineWidth=h,n.beginPath(),n.arc(e[0][0].x,e[0][0].y,s+h/2,0,2*Math.PI),n.stroke()),n.fillStyle=this.fill.get(i,o),n.beginPath(),n.arc(e[0][0].x,e[0][0].y,s,0,2*Math.PI),n.fill()}place(n,e,i){e[0];let o=new Zt.default(e[0][0].x,e[0][0].y),s=this.radius.get(n.zoom,i),h={minX:o.x-s,minY:o.y-s,maxX:o.x+s,maxY:o.y+s};return[{anchor:o,bboxes:[h],draw:c=>{this.draw(c,[[new Zt.default(0,0)]],n.zoom,i)}}]}},Df=class{constructor(n){this.font=new Ur(n),this.text=new Wr(n),this.fill=new Pt(n.fill,"black"),this.background=new Pt(n.background,"white"),this.padding=new pt(n.padding,0)}place(n,e,i){let o=this.text.get(n.zoom,i);if(!o)return;let s=this.font.get(n.zoom,i);n.scratch.font=s;let h=n.scratch.measureText(o),l=h.width,c=h.actualBoundingBoxAscent,d=h.actualBoundingBoxDescent;e[0];let _=new Zt.default(e[0][0].x,e[0][0].y),f=this.padding.get(n.zoom,i),m={minX:_.x-l/2-f,minY:_.y-c-f,maxX:_.x+l/2+f,maxY:_.y+d+f};return[{anchor:_,bboxes:[m],draw:w=>{w.globalAlpha=1,w.fillStyle=this.background.get(n.zoom,i),w.fillRect(-l/2-f,-c-f,l+2*f,c+d+2*f),w.fillStyle=this.fill.get(n.zoom,i),w.font=s,w.fillText(o,-l/2,0)}}]}},$s=class{constructor(n){this.list=n}place(n,e,i){var o=this.list[0].place(n,e,i);if(!o)return;var s=o[0];let h=s.anchor,l=s.bboxes[0],c=l.maxY-l.minY,d=[{draw:s.draw,translate:{x:0,y:0}}],_=[[new Zt.default(e[0][0].x,e[0][0].y+c)]];for(let m=1;m<this.list.length;m++)o=this.list[m].place(n,_,i),o&&(s=o[0],l=mh(l,s.bboxes[0]),d.push({draw:s.draw,translate:{x:0,y:c}}));return[{anchor:h,bboxes:[l],draw:m=>{for(let y of d)m.save(),m.translate(y.translate.x,y.translate.y),y.draw(m),m.restore()}}]}},mh=(n,e)=>({minX:Math.min(n.minX,e.minX),minY:Math.min(n.minY,e.minY),maxX:Math.max(n.maxX,e.maxX),maxY:Math.max(n.maxY,e.maxY)}),Ks=class{constructor(n){this.list=n}place(n,e,i){let o=this.list[0];if(!o)return;var s=o.place(n,e,i);if(!s)return;var h=s[0];let l=h.anchor,c=h.bboxes[0],d=[h.draw];for(let f=1;f<this.list.length;f++){if(s=this.list[f].place(n,e,i),!s)return;h=s[0],c=mh(c,h.bboxes[0]),d.push(h.draw)}return[{anchor:l,bboxes:[c],draw:f=>{d.forEach(m=>m(f))}}]}},zf=class{constructor(n){this.symbolizer=n}place(n,e,i){let o=e[0][0],s=this.symbolizer.place(n,[[new Zt.default(0,0)]],i);if(!s||s.length==0)return;let h=s[0],l=h.bboxes[0],c=l.maxX-l.minX,d=l.maxY-l.minY,_={minX:o.x-c/2,maxX:o.x+c/2,minY:o.y-d/2,maxY:o.y+d/2};return[{anchor:o,bboxes:[_],draw:m=>{m.translate(-c/2,d/2-l.maxY),h.draw(m,{justify:2})}}]}},Vr=class{constructor(n){this.font=new Ur(n),this.text=new Wr(n),this.fill=new Pt(n.fill,"black"),this.stroke=new Pt(n.stroke,"black"),this.width=new pt(n.width,0),this.lineHeight=new pt(n.lineHeight,1),this.letterSpacing=new pt(n.letterSpacing,0),this.maxLineCodeUnits=new pt(n.maxLineChars,15),this.justify=n.justify}place(n,e,i){let o=this.text.get(n.zoom,i);if(!o)return;let s=this.font.get(n.zoom,i);n.scratch.font=s;let h=this.letterSpacing.get(n.zoom,i),l=ph(o,this.maxLineCodeUnits.get(n.zoom,i));var c="",d=0;for(let z of l)z.length>d&&(d=z.length,c=z);let _=n.scratch.measureText(c),f=_.width+h*(d-1),m=_.actualBoundingBoxAscent,y=_.actualBoundingBoxDescent,w=(m+y)*this.lineHeight.get(n.zoom,i),b=new Zt.default(e[0][0].x,e[0][0].y),C={minX:b.x,minY:b.y-m,maxX:b.x+f,maxY:b.y+y+(l.length-1)*w};return[{anchor:b,bboxes:[C],draw:(z,x)=>{z.globalAlpha=1,z.font=s,z.fillStyle=this.fill.get(n.zoom,i);let M=this.width.get(n.zoom,i);var k=0;for(let F of l){var B=0;if(this.justify==2||x&&x.justify==2?B=(f-z.measureText(F).width)/2:(this.justify==3||x&&x.justify==3)&&(B=f-z.measureText(F).width),M)if(z.lineWidth=M*2,z.strokeStyle=this.stroke.get(n.zoom,i),h>0){var O=B;for(var I of F)z.strokeText(I,O,k),O+=z.measureText(I).width+h}else z.strokeText(F,B,k);if(h>0){var O=B;for(var I of F)z.fillText(I,O,k),O+=z.measureText(I).width+h}else z.fillText(F,B,k);k+=w}}}]}},li=class{constructor(n){this.centered=new zf(new Vr(n))}place(n,e,i){return this.centered.place(n,e,i)}},Af=class{constructor(n,e){var i,o,s;this.symbolizer=n,this.offsetX=new pt(e.offsetX,0),this.offsetY=new pt(e.offsetY,0),this.justify=(i=e.justify)!=null?i:void 0,this.placements=(o=e.placements)!=null?o:[2,6,8,4,1,3,5,7],this.ddValues=(s=e.ddValues)!=null?s:()=>({})}place(n,e,i){if(i.geomType!==Ze.Point)return;let o=e[0][0],s=this.symbolizer.place(n,[[new Zt.default(0,0)]],i);if(!s||s.length==0)return;let h=s[0],l=h.bboxes[0],c=this.offsetX,d=this.offsetY,_=this.justify,f=this.placements;const{offsetX:m,offsetY:y,justify:w,placements:b}=this.ddValues(n.zoom,i)||{};m&&(c=new pt(m,0)),y&&(d=new pt(y,0)),w&&(_=w),b&&(f=b);const C=c.get(n.zoom,i),S=d.get(n.zoom,i);let z=(O,I)=>({minX:O.x+I.x+l.minX,minY:O.y+I.y+l.minY,maxX:O.x+I.x+l.maxX,maxY:O.y+I.y+l.maxY});var x=new Zt.default(C,S),M;let k=O=>{O.translate(x.x,x.y),h.draw(O,{justify:M})};const B=(O,I)=>{const F=z(O,I);if(!n.index.bboxCollides(F,n.order))return[{anchor:o,bboxes:[F],draw:k}]};for(let O of f){const I=this.computeXAxisOffset(C,l,O),F=this.computeYAxisOffset(S,l,O);return M=this.computeJustify(_,O),x=new Zt.default(I,F),B(o,x)}}computeXAxisOffset(n,e,i){const o=e.maxX,s=o/2;return[1,5].includes(i)?n-s:[8,7,6].includes(i)?n-o:n}computeYAxisOffset(n,e,i){const o=Math.abs(e.minY),s=e.maxY,h=(e.minY+e.maxY)/2;return[3,7].includes(i)?n-h:[8,2,1].includes(i)?n-s:[6,4,5].includes(i)?n+o:n}computeJustify(n,e){return n||([1,5].includes(e)?2:[2,3,4].includes(e)?1:3)}},rn=class{constructor(n){this.symbolizer=new Af(new Vr(n),n)}place(n,e,i){return this.symbolizer.place(n,e,i)}},Js;(function(n){n[n.Above=1]="Above",n[n.Center=2]="Center",n[n.Below=3]="Below"})(Js||(Js={}));var Bf=class{constructor(n){var e;this.font=new Ur(n),this.text=new Wr(n),this.fill=new Pt(n.fill,"black"),this.stroke=new Pt(n.stroke,"black"),this.width=new pt(n.width,0),this.offset=new pt(n.offset,0),this.position=(e=n.position)!=null?e:1,this.maxLabelCodeUnits=new pt(n.maxLabelChars,40),this.repeatDistance=new pt(n.repeatDistance,250)}place(n,e,i){let o=this.text.get(n.zoom,i);if(!o||o.length>this.maxLabelCodeUnits.get(n.zoom,i))return;let s=20,h=i.bbox;if(h.maxY-h.minY<s&&h.maxX-h.minX<s)return;let l=this.font.get(n.zoom,i);n.scratch.font=l;let c=n.scratch.measureText(o),d=c.width,_=c.actualBoundingBoxAscent+c.actualBoundingBoxDescent;var f=this.repeatDistance.get(n.zoom,i);n.overzoom>4&&(f*=1<<n.overzoom-4);let m=_*2,y=Cf(e,d,f,m);if(y.length==0)return;let w=[];for(let b of y){let C=b.end.x-b.start.x,S=b.end.y-b.start.y,x=Ef(b.start,b.end,d,m/2).map(k=>({minX:k.x-m/2,minY:k.y-m/2,maxX:k.x+m/2,maxY:k.y+m/2})),M=k=>{k.globalAlpha=1,k.rotate(Math.atan2(S,C)),C<0&&(k.scale(-1,-1),k.translate(-d,0));let B=0;this.position===3?B+=_:this.position===2&&(B+=_/2),k.translate(0,B-this.offset.get(n.zoom,i)),k.font=l;let O=this.width.get(n.zoom,i);O&&(k.lineWidth=O,k.strokeStyle=this.stroke.get(n.zoom,i),k.strokeText(o,0,0)),k.fillStyle=this.fill.get(n.zoom,i),k.fillText(o,0,0)};w.push({anchor:b.start,bboxes:x,draw:M,deduplicationKey:o,deduplicationDistance:f})}return w}},_r=class{constructor(n){this.symbolizer=new Vr(n)}place(n,e,i){let o=i.bbox;if((o.maxY-o.minY)*(o.maxX-o.minX)<2e4)return;let h=this.symbolizer.place(n,[[new Zt.default(0,0)]],i);if(!h||h.length==0)return;let l=h[0],c=l.bboxes[0],d=e[0],_=(0,Pf.default)([d.map(w=>[w.x,w.y])]),f=new Zt.default(_[0],_[1]),m={minX:f.x-(c.maxX-c.minX)/2,minY:f.y-(c.maxY-c.minY)/2,maxX:f.x+(c.maxX-c.minX)/2,maxY:f.y+(c.maxY-c.minY)/2};return[{anchor:f,bboxes:[m],draw:w=>{w.translate(l.anchor.x-(c.maxX-c.minX)/2,l.anchor.y),l.draw(w)}}]}},gh=(n,e)=>{let i=Xs(e),o=Jc({},n);for(const[s,h]of Object.entries(n)){let l=Xs(h);o[s]=bf(i[0],i[1],l[2],l[3])}return o},Qs=(n,e)=>(e&&(n=gh(n,e)),[{dataLayer:"earth",symbolizer:new wt({fill:n.earth})},{dataLayer:"natural",symbolizer:new wt({fill:n.glacier}),filter:(i,o)=>o.props.natural=="glacier"},{dataLayer:"landuse",symbolizer:new wt({fill:n.residential}),filter:(i,o)=>o.props.landuse=="residential"||o.props.place=="neighbourhood"},{dataLayer:"landuse",symbolizer:new wt({fill:n.hospital}),filter:(i,o)=>o.props.amenity=="hospital"},{dataLayer:"landuse",symbolizer:new wt({fill:n.cemetery}),filter:(i,o)=>o.props.landuse=="cemetery"},{dataLayer:"landuse",symbolizer:new wt({fill:n.school}),filter:(i,o)=>o.props.amenity=="school"||o.props.amenity=="kindergarten"||o.props.amenity=="university"||o.props.amenity=="college"},{dataLayer:"landuse",symbolizer:new wt({fill:n.industrial}),filter:(i,o)=>o.props.landuse=="industrial"},{dataLayer:"natural",symbolizer:new wt({fill:n.wood}),filter:(i,o)=>o.props.natural=="wood"},{dataLayer:"landuse",symbolizer:new wt({fill:n.grass}),filter:(i,o)=>o.props.landuse=="grass"},{dataLayer:"landuse",symbolizer:new wt({fill:n.park}),filter:(i,o)=>o.props.leisure=="park"},{dataLayer:"water",symbolizer:new wt({fill:n.water})},{dataLayer:"natural",symbolizer:new wt({fill:n.sand}),filter:(i,o)=>o.props.natural=="sand"},{dataLayer:"buildings",symbolizer:new wt({fill:n.buildings})},{dataLayer:"roads",symbolizer:new Vt({color:n.highwayCasing,width:se(1.4,[[5,1.5],[11,4],[16,9],[20,40]])}),filter:(i,o)=>o.props["pmap:kind"]=="highway"},{dataLayer:"roads",symbolizer:new Vt({color:n.majorRoadCasing,width:se(1.4,[[9,3],[12,4],[17,8],[20,22]])}),filter:(i,o)=>o.props["pmap:kind"]=="major_road"},{dataLayer:"roads",symbolizer:new Vt({color:n.mediumRoadCasing,width:se(1.4,[[13,3],[17,6],[20,18]])}),filter:(i,o)=>o.props["pmap:kind"]=="medium_road"},{dataLayer:"roads",symbolizer:new Vt({color:n.minorRoadCasing,width:se(1.4,[[14,2],[17,5],[20,15]])}),filter:(i,o)=>o.props["pmap:kind"]=="minor_road"},{dataLayer:"roads",symbolizer:new Vt({color:n.minorRoad,width:se(1.4,[[14,1],[17,3],[20,13]])}),filter:(i,o)=>o.props["pmap:kind"]=="minor_road"},{dataLayer:"roads",symbolizer:new Vt({color:n.mediumRoad,width:se(1.4,[[13,2],[17,4],[20,15]])}),filter:(i,o)=>o.props["pmap:kind"]=="medium_road"},{dataLayer:"roads",symbolizer:new Vt({color:n.majorRoad,width:se(1.4,[[9,2],[12,3],[17,6],[20,20]])}),filter:(i,o)=>o.props["pmap:kind"]=="major_road"},{dataLayer:"roads",symbolizer:new Vt({color:n.highway,width:se(1.4,[[5,.5],[11,2.5],[16,7],[20,30]])}),filter:(i,o)=>o.props["pmap:kind"]=="highway"},{dataLayer:"boundaries",symbolizer:new Vt({color:n.boundaries,width:2,opacity:.4})},{dataLayer:"mask",symbolizer:new wt({fill:n.mask})}]),ta=(n,e,i,o)=>{e&&(n=gh(n,e));var s=["name"];i&&(s=i);let h=(l,c)=>o?l instanceof rn?new $s([l,new rn({fill:c,label_props:o})]):new $s([l,new li({fill:c,label_props:o})]):l;return[{dataLayer:"places",symbolizer:h(new li({label_props:s,fill:n.countryLabel,lineHeight:1.5,font:(l,c)=>l<6?"200 14px sans-serif":"200 20px sans-serif",textTransform:"uppercase"}),n.countryLabel),filter:(l,c)=>c.props["pmap:kind"]=="country"},{dataLayer:"places",symbolizer:h(new li({label_props:s,fill:n.stateLabel,font:"300 16px sans-serif"}),n.stateLabel),filter:(l,c)=>c.props["pmap:kind"]=="state"},{id:"cities_high",dataLayer:"places",filter:(l,c)=>c.props["pmap:kind"]=="city",minzoom:7,symbolizer:h(new li({label_props:s,fill:n.cityLabel,font:(l,c)=>(c==null?void 0:c.props["pmap:rank"])===1?l>8?"600 20px sans-serif":"600 12px sans-serif":l>8?"600 16px sans-serif":"600 10px sans-serif"}),n.cityLabel),sort:(l,c)=>l["pmap:rank"]-c["pmap:rank"]},{id:"cities_low",dataLayer:"places",filter:(l,c)=>c.props["pmap:kind"]=="city",maxzoom:6,symbolizer:new Ks([new Er({radius:2,fill:n.cityLabel}),h(new rn({label_props:s,fill:n.cityLabel,offsetX:2,offsetY:2,font:(l,c)=>(c==null?void 0:c.props["pmap:rank"])===1?l>8?"600 20px sans-serif":"600 12px sans-serif":l>8?"600 16px sans-serif":"600 10px sans-serif"}),n.cityLabel)]),sort:(l,c)=>l["pmap:rank"]-c["pmap:rank"]},{id:"neighbourhood",dataLayer:"places",symbolizer:h(new li({label_props:s,fill:n.neighbourhoodLabel,font:"500 10px sans-serif",textTransform:"uppercase"}),n.neighbourhoodLabel),filter:(l,c)=>c.props["pmap:kind"]=="neighbourhood"},{dataLayer:"landuse",symbolizer:h(new _r({label_props:s,fill:n.landuseLabel,font:"300 12px sans-serif"}),n.landuseLabel)},{dataLayer:"water",symbolizer:h(new _r({label_props:s,fill:n.waterLabel,font:"italic 600 12px sans-serif"}),n.waterLabel)},{dataLayer:"natural",symbolizer:h(new _r({label_props:s,fill:n.naturalLabel,font:"italic 300 12px sans-serif"}),n.naturalLabel)},{dataLayer:"roads",symbolizer:h(new Bf({label_props:s,fill:n.roadsLabel,font:"500 12px sans-serif"}),n.roadsLabel),minzoom:12},{dataLayer:"roads",symbolizer:new Df({label_props:["ref"],font:"600 9px sans-serif",background:n.highway,padding:2,fill:n.neighbourhoodLabel}),filter:(l,c)=>c.props["pmap:kind"]=="highway"},{dataLayer:"pois",symbolizer:new Ks([new Er({radius:2,fill:n.poisLabel}),h(new rn({label_props:s,fill:n.poisLabel,offsetX:2,offsetY:2,font:"300 10px sans-serif"}),n.poisLabel)])}]},ea=(n,e,i)=>[{dataSource:n,dataLayer:e,symbolizer:new Er({opacity:.2,fill:i,radius:4}),filter:(o,s)=>s.geomType==Ze.Point},{dataSource:n,dataLayer:e,symbolizer:new Vt({opacity:.2,color:i,width:2}),filter:(o,s)=>s.geomType==Ze.Line},{dataSource:n,dataLayer:e,symbolizer:new wt({opacity:.2,fill:i,stroke:i,width:1}),filter:(o,s)=>s.geomType==Ze.Polygon}],If=(n,e)=>{var i=[];for(var[o,s]of n)for(var h of s)for(var l of h.data.keys())o===e.dataSource&&l===e.dataLayer||(i=i.concat(ea(o,l,"steelblue")));return i=i.concat(ea(e.dataSource||"",e.dataLayer,"red")),i},Of=Et(ie()),Ff=n=>new Promise((e,i)=>{setTimeout(()=>{e()},n)}),Zf=n=>n.then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e})),Rf=(n={})=>{class e extends L.GridLayer{constructor(o={}){o.noWrap&&!o.bounds&&(o.bounds=[[-90,-180],[90,180]]),o.attribution==null&&(o.attribution='<a href="https://protomaps.com">Protomaps</a> © <a href="https://openstreetmap.org/copyright">OpenStreetMap</a>'),super(o);let s=o.dark?Us:Ws;this.paint_rules=o.paint_rules||Qs(s,o.shade),this.label_rules=o.label_rules||ta(s,o.shade,o.language1,o.language2),this.backgroundColor=o.backgroundColor,this.lastRequestedZ=void 0,this.xray=o.xray,this.tasks=o.tasks||[],this.views=sf(o),this.debug=o.debug;let h=document.createElement("canvas").getContext("2d");this.scratch=h,this.onTilesInvalidated=l=>{l.forEach(c=>{this.rerenderTile(c)})},this.labelers=new js(this.scratch,this.label_rules,16,this.onTilesInvalidated),this.tile_size=256*window.devicePixelRatio,this.tileDelay=o.tileDelay||3,this.lang=o.lang,this.inspector=this.inspect(this)}setDefaultStyle(o,s,h,l){let c=o?Us:Ws;this.paint_rules=Qs(c,s),this.label_rules=ta(c,s,h,l)}renderTile(o,s,h,l=()=>{}){return We(this,null,function*(){this.lastRequestedZ=o.z;let c=[];for(const[I,F]of this.views){let W=F.getDisplayTile(o);c.push({key:I,promise:W})}let d=yield Promise.all(c.map(I=>I.promise.then(F=>({status:"fulfilled",value:F,key:I.key}),F=>({status:"rejected",reason:F,key:I.key})))),_=new Map;for(const I of d)I.status==="fulfilled"?_.set(I.key,[I.value]):I.reason.name==="AbortError"||console.error(I.reason);if(s.key!=h||this.lastRequestedZ!==o.z||(yield Promise.all(this.tasks.map(Zf)),s.key!=h)||this.lastRequestedZ!==o.z)return;let f=this.labelers.add(o.z,_);if(s.key!=h||this.lastRequestedZ!==o.z)return;let m=this.labelers.getIndex(o.z);if(!this._map)return;let y=this._map.getCenter().wrap(),w=this._getTiledPixelBounds(y),b=this._pxBoundsToTileRange(w),C=b.getCenter(),S=o.distanceTo(C)*this.tileDelay;if(yield Ff(S),s.key!=h||this.lastRequestedZ!==o.z)return;let z=16,x={minX:256*o.x-z,minY:256*o.y-z,maxX:256*(o.x+1)+z,maxY:256*(o.y+1)+z},M=new Of.default(256*o.x,256*o.y);s.width=this.tile_size,s.height=this.tile_size;let k=s.getContext("2d");k.setTransform(this.tile_size/256,0,0,this.tile_size/256,0,0),k.clearRect(0,0,256,256),this.backgroundColor&&(k.save(),k.fillStyle=this.backgroundColor,k.fillRect(0,0,256,256),k.restore());var B=0;let O=this.paint_rules;if(this.xray&&(O=If(_,this.xray)),B=hf(k,o.z,_,this.xray?null:m,O,x,M,!1,this.debug),this.debug){k.save(),k.fillStyle=this.debug,k.font="600 12px sans-serif",k.fillText(o.z+" "+o.x+" "+o.y,4,14),k.font="12px sans-serif";let I=28;for(let[F,W]of _){let V=W[0].data_tile;k.fillText(F+(F?" ":"")+V.z+" "+V.x+" "+V.y,4,I),I+=14}k.font="600 10px sans-serif",B>8&&(k.fillText(B.toFixed()+" ms paint",4,I),I+=14),f>8&&k.fillText(f.toFixed()+" ms layout",4,I),k.strokeStyle=this.debug,k.lineWidth=.5,k.beginPath(),k.moveTo(0,0),k.lineTo(0,256),k.stroke(),k.lineWidth=.5,k.beginPath(),k.moveTo(0,0),k.lineTo(256,0),k.stroke(),k.restore()}l()})}rerenderTile(o){for(let s in this._tiles){let h=this._wrapCoords(this._keyToTileCoords(s));o===this._tileCoordsToKey(h)&&this.renderTile(h,this._tiles[s].el,o)}}clearLayout(){this.labelers=new js(this.scratch,this.label_rules,16,this.onTilesInvalidated)}rerenderTiles(){for(let o in this._tiles){let s=this._wrapCoords(this._keyToTileCoords(o)),h=this._tileCoordsToKey(s);this.renderTile(s,this._tiles[o].el,h)}}createTile(o,s){let h=L.DomUtil.create("canvas","leaflet-tile");h.lang=this.lang;let l=this._tileCoordsToKey(o);return h.key=l,this.renderTile(o,h,l,()=>{s(null,h)}),h}_removeTile(o){let s=this._tiles[o];s&&(s.el.removed=!0,s.el.key=void 0,L.DomUtil.removeClass(s.el,"leaflet-tile-loaded"),s.el.width=s.el.height=0,L.DomUtil.remove(s.el),delete this._tiles[o],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(o)}))}queryFeatures(o,s){let h=new Map;for(var[l,c]of this.views)h.set(l,c.queryFeatures(o,s,this._map.getZoom()));return h}inspect(o){return s=>{let h=["◎","⟍","◻"],l=o._map.wrapLatLng(s.latlng),c=o.queryFeatures(l.lng,l.lat);var d="";let _=!0;for(var[f,m]of c)for(var y of m)if(!(this.xray&&this.xray!==!0&&!((this.xray.dataSource||"")===f&&this.xray.dataLayer===y.layerName))){d=d+`<div style="margin-top:${_?0:.5}em">${h[y.feature.geomType-1]} <b>${f} ${f?"/":""} ${y.layerName}</b> ${y.feature.id||""}</div>`;for(const w in y.feature.props)d=d+`<div style="font-size:0.9em">${w} = ${y.feature.props[w]}</div>`;_=!1}_&&(d="No features."),L.popup().setLatLng(s.latlng).setContent('<div style="max-height:400px;overflow-y:scroll;padding-right:8px">'+d+"</div>").openOn(o._map)}}addInspector(o){return o.on("click",this.inspector)}removeInspector(o){return o.off("click",this.inspector)}}return new e(n)};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Nf({L:n,id:e,lat:i,lng:o,zoom:s}){const h=n.map(e,{center:[i,o],zoom:s,minZoom:3,maxZoom:20,tapTolerance:10});var c=Rf({url:"https://api.protomaps.com/tiles/v2/{z}/{x}/{y}.pbf?key=d23c43b7c56e123d"});return c.addTo(h),h}var kr={exports:{}};/* @preserve
 * Leaflet 1.9.3, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2022 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(n,e){(function(i,o){o(e)})(Jl,function(i){var o="1.9.3";function s(t){var r,a,u,p;for(a=1,u=arguments.length;a<u;a++){p=arguments[a];for(r in p)t[r]=p[r]}return t}var h=Object.create||function(){function t(){}return function(r){return t.prototype=r,new t}}();function l(t,r){var a=Array.prototype.slice;if(t.bind)return t.bind.apply(t,a.call(arguments,1));var u=a.call(arguments,2);return function(){return t.apply(r,u.length?u.concat(a.call(arguments)):arguments)}}var c=0;function d(t){return"_leaflet_id"in t||(t._leaflet_id=++c),t._leaflet_id}function _(t,r,a){var u,p,g,P;return P=function(){u=!1,p&&(g.apply(a,p),p=!1)},g=function(){u?p=arguments:(t.apply(a,arguments),setTimeout(P,r),u=!0)},g}function f(t,r,a){var u=r[1],p=r[0],g=u-p;return t===u&&a?t:((t-p)%g+g)%g+p}function m(){return!1}function y(t,r){if(r===!1)return t;var a=Math.pow(10,r===void 0?6:r);return Math.round(t*a)/a}function w(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function b(t){return w(t).split(/\s+/)}function C(t,r){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?h(t.options):{});for(var a in r)t.options[a]=r[a];return t.options}function S(t,r,a){var u=[];for(var p in t)u.push(encodeURIComponent(a?p.toUpperCase():p)+"="+encodeURIComponent(t[p]));return(!r||r.indexOf("?")===-1?"?":"&")+u.join("&")}var z=/\{ *([\w_ -]+) *\}/g;function x(t,r){return t.replace(z,function(a,u){var p=r[u];if(p===void 0)throw new Error("No value provided for variable "+a);return typeof p=="function"&&(p=p(r)),p})}var M=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function k(t,r){for(var a=0;a<t.length;a++)if(t[a]===r)return a;return-1}var B="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function O(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var I=0;function F(t){var r=+new Date,a=Math.max(0,16-(r-I));return I=r+a,window.setTimeout(t,a)}var W=window.requestAnimationFrame||O("RequestAnimationFrame")||F,V=window.cancelAnimationFrame||O("CancelAnimationFrame")||O("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function Y(t,r,a){if(a&&W===F)t.call(r);else return W.call(window,l(t,r))}function G(t){t&&V.call(window,t)}var X={__proto__:null,extend:s,create:h,bind:l,get lastId(){return c},stamp:d,throttle:_,wrapNum:f,falseFn:m,formatNum:y,trim:w,splitWords:b,setOptions:C,getParamString:S,template:x,isArray:M,indexOf:k,emptyImageUrl:B,requestFn:W,cancelFn:V,requestAnimFrame:Y,cancelAnimFrame:G};function v(){}v.extend=function(t){var r=function(){C(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},a=r.__super__=this.prototype,u=h(a);u.constructor=r,r.prototype=u;for(var p in this)Object.prototype.hasOwnProperty.call(this,p)&&p!=="prototype"&&p!=="__super__"&&(r[p]=this[p]);return t.statics&&s(r,t.statics),t.includes&&(E(t.includes),s.apply(null,[u].concat(t.includes))),s(u,t),delete u.statics,delete u.includes,u.options&&(u.options=a.options?h(a.options):{},s(u.options,t.options)),u._initHooks=[],u.callInitHooks=function(){if(!this._initHooksCalled){a.callInitHooks&&a.callInitHooks.call(this),this._initHooksCalled=!0;for(var g=0,P=u._initHooks.length;g<P;g++)u._initHooks[g].call(this)}},r},v.include=function(t){var r=this.prototype.options;return s(this.prototype,t),t.options&&(this.prototype.options=r,this.mergeOptions(t.options)),this},v.mergeOptions=function(t){return s(this.prototype.options,t),this},v.addInitHook=function(t){var r=Array.prototype.slice.call(arguments,1),a=typeof t=="function"?t:function(){this[t].apply(this,r)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(a),this};function E(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=M(t)?t:[t];for(var r=0;r<t.length;r++)t[r]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var T={on:function(t,r,a){if(typeof t=="object")for(var u in t)this._on(u,t[u],r);else{t=b(t);for(var p=0,g=t.length;p<g;p++)this._on(t[p],r,a)}return this},off:function(t,r,a){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var u in t)this._off(u,t[u],r);else{t=b(t);for(var p=arguments.length===1,g=0,P=t.length;g<P;g++)p?this._off(t[g]):this._off(t[g],r,a)}return this},_on:function(t,r,a,u){if(typeof r!="function"){console.warn("wrong listener type: "+typeof r);return}if(this._listens(t,r,a)===!1){a===this&&(a=void 0);var p={fn:r,ctx:a};u&&(p.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(p)}},_off:function(t,r,a){var u,p,g;if(this._events&&(u=this._events[t],!!u)){if(arguments.length===1){if(this._firingCount)for(p=0,g=u.length;p<g;p++)u[p].fn=m;delete this._events[t];return}if(typeof r!="function"){console.warn("wrong listener type: "+typeof r);return}var P=this._listens(t,r,a);if(P!==!1){var D=u[P];this._firingCount&&(D.fn=m,this._events[t]=u=u.slice()),u.splice(P,1)}}},fire:function(t,r,a){if(!this.listens(t,a))return this;var u=s({},r,{type:t,target:this,sourceTarget:r&&r.sourceTarget||this});if(this._events){var p=this._events[t];if(p){this._firingCount=this._firingCount+1||1;for(var g=0,P=p.length;g<P;g++){var D=p[g],A=D.fn;D.once&&this.off(t,A,D.ctx),A.call(D.ctx||this,u)}this._firingCount--}}return a&&this._propagateEvent(u),this},listens:function(t,r,a,u){typeof t!="string"&&console.warn('"string" type argument expected');var p=r;typeof r!="function"&&(u=!!r,p=void 0,a=void 0);var g=this._events&&this._events[t];if(g&&g.length&&this._listens(t,p,a)!==!1)return!0;if(u){for(var P in this._eventParents)if(this._eventParents[P].listens(t,r,a,u))return!0}return!1},_listens:function(t,r,a){if(!this._events)return!1;var u=this._events[t]||[];if(!r)return!!u.length;a===this&&(a=void 0);for(var p=0,g=u.length;p<g;p++)if(u[p].fn===r&&u[p].ctx===a)return p;return!1},once:function(t,r,a){if(typeof t=="object")for(var u in t)this._on(u,t[u],r,!0);else{t=b(t);for(var p=0,g=t.length;p<g;p++)this._on(t[p],r,a,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[d(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[d(t)],this},_propagateEvent:function(t){for(var r in this._eventParents)this._eventParents[r].fire(t.type,s({layer:t.target,propagatedFrom:t.target},t),!0)}};T.addEventListener=T.on,T.removeEventListener=T.clearAllEventListeners=T.off,T.addOneTimeEventListener=T.once,T.fireEvent=T.fire,T.hasEventListeners=T.listens;var U=v.extend(T);function R(t,r,a){this.x=a?Math.round(t):t,this.y=a?Math.round(r):r}var $=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};R.prototype={clone:function(){return new R(this.x,this.y)},add:function(t){return this.clone()._add(N(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(N(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new R(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new R(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=$(this.x),this.y=$(this.y),this},distanceTo:function(t){t=N(t);var r=t.x-this.x,a=t.y-this.y;return Math.sqrt(r*r+a*a)},equals:function(t){return t=N(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=N(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function N(t,r,a){return t instanceof R?t:M(t)?new R(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new R(t.x,t.y):new R(t,r,a)}function tt(t,r){if(t)for(var a=r?[t,r]:t,u=0,p=a.length;u<p;u++)this.extend(a[u])}tt.prototype={extend:function(t){var r,a;if(!t)return this;if(t instanceof R||typeof t[0]=="number"||"x"in t)r=a=N(t);else if(t=J(t),r=t.min,a=t.max,!r||!a)return this;return!this.min&&!this.max?(this.min=r.clone(),this.max=a.clone()):(this.min.x=Math.min(r.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(r.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)),this},getCenter:function(t){return N((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return N(this.min.x,this.max.y)},getTopRight:function(){return N(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var r,a;return typeof t[0]=="number"||t instanceof R?t=N(t):t=J(t),t instanceof tt?(r=t.min,a=t.max):r=a=t,r.x>=this.min.x&&a.x<=this.max.x&&r.y>=this.min.y&&a.y<=this.max.y},intersects:function(t){t=J(t);var r=this.min,a=this.max,u=t.min,p=t.max,g=p.x>=r.x&&u.x<=a.x,P=p.y>=r.y&&u.y<=a.y;return g&&P},overlaps:function(t){t=J(t);var r=this.min,a=this.max,u=t.min,p=t.max,g=p.x>r.x&&u.x<a.x,P=p.y>r.y&&u.y<a.y;return g&&P},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var r=this.min,a=this.max,u=Math.abs(r.x-a.x)*t,p=Math.abs(r.y-a.y)*t;return J(N(r.x-u,r.y-p),N(a.x+u,a.y+p))},equals:function(t){return t?(t=J(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function J(t,r){return!t||t instanceof tt?t:new tt(t,r)}function ut(t,r){if(t)for(var a=r?[t,r]:t,u=0,p=a.length;u<p;u++)this.extend(a[u])}ut.prototype={extend:function(t){var r=this._southWest,a=this._northEast,u,p;if(t instanceof ot)u=t,p=t;else if(t instanceof ut){if(u=t._southWest,p=t._northEast,!u||!p)return this}else return t?this.extend(at(t)||ht(t)):this;return!r&&!a?(this._southWest=new ot(u.lat,u.lng),this._northEast=new ot(p.lat,p.lng)):(r.lat=Math.min(u.lat,r.lat),r.lng=Math.min(u.lng,r.lng),a.lat=Math.max(p.lat,a.lat),a.lng=Math.max(p.lng,a.lng)),this},pad:function(t){var r=this._southWest,a=this._northEast,u=Math.abs(r.lat-a.lat)*t,p=Math.abs(r.lng-a.lng)*t;return new ut(new ot(r.lat-u,r.lng-p),new ot(a.lat+u,a.lng+p))},getCenter:function(){return new ot((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ot(this.getNorth(),this.getWest())},getSouthEast:function(){return new ot(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof ot||"lat"in t?t=at(t):t=ht(t);var r=this._southWest,a=this._northEast,u,p;return t instanceof ut?(u=t.getSouthWest(),p=t.getNorthEast()):u=p=t,u.lat>=r.lat&&p.lat<=a.lat&&u.lng>=r.lng&&p.lng<=a.lng},intersects:function(t){t=ht(t);var r=this._southWest,a=this._northEast,u=t.getSouthWest(),p=t.getNorthEast(),g=p.lat>=r.lat&&u.lat<=a.lat,P=p.lng>=r.lng&&u.lng<=a.lng;return g&&P},overlaps:function(t){t=ht(t);var r=this._southWest,a=this._northEast,u=t.getSouthWest(),p=t.getNorthEast(),g=p.lat>r.lat&&u.lat<a.lat,P=p.lng>r.lng&&u.lng<a.lng;return g&&P},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,r){return t?(t=ht(t),this._southWest.equals(t.getSouthWest(),r)&&this._northEast.equals(t.getNorthEast(),r)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ht(t,r){return t instanceof ut?t:new ut(t,r)}function ot(t,r,a){if(isNaN(t)||isNaN(r))throw new Error("Invalid LatLng object: ("+t+", "+r+")");this.lat=+t,this.lng=+r,a!==void 0&&(this.alt=+a)}ot.prototype={equals:function(t,r){if(!t)return!1;t=at(t);var a=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return a<=(r===void 0?1e-9:r)},toString:function(t){return"LatLng("+y(this.lat,t)+", "+y(this.lng,t)+")"},distanceTo:function(t){return zt.distance(this,at(t))},wrap:function(){return zt.wrapLatLng(this)},toBounds:function(t){var r=180*t/40075017,a=r/Math.cos(Math.PI/180*this.lat);return ht([this.lat-r,this.lng-a],[this.lat+r,this.lng+a])},clone:function(){return new ot(this.lat,this.lng,this.alt)}};function at(t,r,a){return t instanceof ot?t:M(t)&&typeof t[0]!="object"?t.length===3?new ot(t[0],t[1],t[2]):t.length===2?new ot(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new ot(t.lat,"lng"in t?t.lng:t.lon,t.alt):r===void 0?null:new ot(t,r,a)}var kt={latLngToPoint:function(t,r){var a=this.projection.project(t),u=this.scale(r);return this.transformation._transform(a,u)},pointToLatLng:function(t,r){var a=this.scale(r),u=this.transformation.untransform(t,a);return this.projection.unproject(u)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var r=this.projection.bounds,a=this.scale(t),u=this.transformation.transform(r.min,a),p=this.transformation.transform(r.max,a);return new tt(u,p)},infinite:!1,wrapLatLng:function(t){var r=this.wrapLng?f(t.lng,this.wrapLng,!0):t.lng,a=this.wrapLat?f(t.lat,this.wrapLat,!0):t.lat,u=t.alt;return new ot(a,r,u)},wrapLatLngBounds:function(t){var r=t.getCenter(),a=this.wrapLatLng(r),u=r.lat-a.lat,p=r.lng-a.lng;if(u===0&&p===0)return t;var g=t.getSouthWest(),P=t.getNorthEast(),D=new ot(g.lat-u,g.lng-p),A=new ot(P.lat-u,P.lng-p);return new ut(D,A)}},zt=s({},kt,{wrapLng:[-180,180],R:6371e3,distance:function(t,r){var a=Math.PI/180,u=t.lat*a,p=r.lat*a,g=Math.sin((r.lat-t.lat)*a/2),P=Math.sin((r.lng-t.lng)*a/2),D=g*g+Math.cos(u)*Math.cos(p)*P*P,A=2*Math.atan2(Math.sqrt(D),Math.sqrt(1-D));return this.R*A}}),Yr=6378137,Ln={R:Yr,MAX_LATITUDE:85.0511287798,project:function(t){var r=Math.PI/180,a=this.MAX_LATITUDE,u=Math.max(Math.min(a,t.lat),-a),p=Math.sin(u*r);return new R(this.R*t.lng*r,this.R*Math.log((1+p)/(1-p))/2)},unproject:function(t){var r=180/Math.PI;return new ot((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*r,t.x*r/this.R)},bounds:function(){var t=Yr*Math.PI;return new tt([-t,-t],[t,t])}()};function Cn(t,r,a,u){if(M(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=r,this._c=a,this._d=u}Cn.prototype={transform:function(t,r){return this._transform(t.clone(),r)},_transform:function(t,r){return r=r||1,t.x=r*(this._a*t.x+this._b),t.y=r*(this._c*t.y+this._d),t},untransform:function(t,r){return r=r||1,new R((t.x/r-this._b)/this._a,(t.y/r-this._d)/this._c)}};function Ue(t,r,a,u){return new Cn(t,r,a,u)}var En=s({},zt,{code:"EPSG:3857",projection:Ln,transformation:function(){var t=.5/(Math.PI*Ln.R);return Ue(t,.5,-t,.5)}()}),wh=s({},En,{code:"EPSG:900913"});function Xr(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Hr(t,r){var a="",u,p,g,P,D,A;for(u=0,g=t.length;u<g;u++){for(D=t[u],p=0,P=D.length;p<P;p++)A=D[p],a+=(p?"L":"M")+A.x+" "+A.y;a+=r?H.svg?"z":"x":""}return a||"M0 0"}var kn=document.documentElement.style,Ti="ActiveXObject"in window,xh=Ti&&!document.addEventListener,Gr="msLaunchUri"in navigator&&!("documentMode"in document),Sn=Nt("webkit"),qr=Nt("android"),$r=Nt("android 2")||Nt("android 3"),bh=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ph=qr&&Nt("Google")&&bh<537&&!("AudioNode"in window),Tn=!!window.opera,Kr=!Gr&&Nt("chrome"),Jr=Nt("gecko")&&!Sn&&!Tn&&!Ti,Mh=!Kr&&Nt("safari"),Qr=Nt("phantom"),to="OTransition"in kn,Lh=navigator.platform.indexOf("Win")===0,eo=Ti&&"transition"in kn,Dn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!$r,io="MozPerspective"in kn,Ch=!window.L_DISABLE_3D&&(eo||Dn||io)&&!to&&!Qr,Ve=typeof orientation<"u"||Nt("mobile"),Eh=Ve&&Sn,kh=Ve&&Dn,no=!window.PointerEvent&&window.MSPointerEvent,ro=!!(window.PointerEvent||no),oo="ontouchstart"in window||!!window.TouchEvent,Sh=!window.L_NO_TOUCH&&(oo||ro),Th=Ve&&Tn,Dh=Ve&&Jr,zh=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ah=function(){var t=!1;try{var r=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",m,r),window.removeEventListener("testPassiveEventSupport",m,r)}catch{}return t}(),Bh=function(){return!!document.createElement("canvas").getContext}(),zn=!!(document.createElementNS&&Xr("svg").createSVGRect),Ih=!!zn&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Oh=!zn&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var r=t.firstChild;return r.style.behavior="url(#default#VML)",r&&typeof r.adj=="object"}catch{return!1}}(),Fh=navigator.platform.indexOf("Mac")===0,Zh=navigator.platform.indexOf("Linux")===0;function Nt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var H={ie:Ti,ielt9:xh,edge:Gr,webkit:Sn,android:qr,android23:$r,androidStock:Ph,opera:Tn,chrome:Kr,gecko:Jr,safari:Mh,phantom:Qr,opera12:to,win:Lh,ie3d:eo,webkit3d:Dn,gecko3d:io,any3d:Ch,mobile:Ve,mobileWebkit:Eh,mobileWebkit3d:kh,msPointer:no,pointer:ro,touch:Sh,touchNative:oo,mobileOpera:Th,mobileGecko:Dh,retina:zh,passiveEvents:Ah,canvas:Bh,svg:zn,vml:Oh,inlineSvg:Ih,mac:Fh,linux:Zh},so=H.msPointer?"MSPointerDown":"pointerdown",ao=H.msPointer?"MSPointerMove":"pointermove",ho=H.msPointer?"MSPointerUp":"pointerup",lo=H.msPointer?"MSPointerCancel":"pointercancel",An={touchstart:so,touchmove:ao,touchend:ho,touchcancel:lo},uo={touchstart:Vh,touchmove:Di,touchend:Di,touchcancel:Di},ve={},co=!1;function Rh(t,r,a){return r==="touchstart"&&Uh(),uo[r]?(a=uo[r].bind(this,a),t.addEventListener(An[r],a,!1),a):(console.warn("wrong event specified:",r),m)}function Nh(t,r,a){if(!An[r]){console.warn("wrong event specified:",r);return}t.removeEventListener(An[r],a,!1)}function jh(t){ve[t.pointerId]=t}function Wh(t){ve[t.pointerId]&&(ve[t.pointerId]=t)}function fo(t){delete ve[t.pointerId]}function Uh(){co||(document.addEventListener(so,jh,!0),document.addEventListener(ao,Wh,!0),document.addEventListener(ho,fo,!0),document.addEventListener(lo,fo,!0),co=!0)}function Di(t,r){if(r.pointerType!==(r.MSPOINTER_TYPE_MOUSE||"mouse")){r.touches=[];for(var a in ve)r.touches.push(ve[a]);r.changedTouches=[r],t(r)}}function Vh(t,r){r.MSPOINTER_TYPE_TOUCH&&r.pointerType===r.MSPOINTER_TYPE_TOUCH&&vt(r),Di(t,r)}function Yh(t){var r={},a,u;for(u in t)a=t[u],r[u]=a&&a.bind?a.bind(t):a;return t=r,r.type="dblclick",r.detail=2,r.isTrusted=!1,r._simulated=!0,r}var Xh=200;function Hh(t,r){t.addEventListener("dblclick",r);var a=0,u;function p(g){if(g.detail!==1){u=g.detail;return}if(!(g.pointerType==="mouse"||g.sourceCapabilities&&!g.sourceCapabilities.firesTouchEvents)){var P=vo(g);if(!(P.some(function(A){return A instanceof HTMLLabelElement&&A.attributes.for})&&!P.some(function(A){return A instanceof HTMLInputElement||A instanceof HTMLSelectElement}))){var D=Date.now();D-a<=Xh?(u++,u===2&&r(Yh(g))):u=1,a=D}}}return t.addEventListener("click",p),{dblclick:r,simDblclick:p}}function Gh(t,r){t.removeEventListener("dblclick",r.dblclick),t.removeEventListener("click",r.simDblclick)}var Bn=Bi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ye=Bi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),po=Ye==="webkitTransition"||Ye==="OTransition"?Ye+"End":"transitionend";function _o(t){return typeof t=="string"?document.getElementById(t):t}function Xe(t,r){var a=t.style[r]||t.currentStyle&&t.currentStyle[r];if((!a||a==="auto")&&document.defaultView){var u=document.defaultView.getComputedStyle(t,null);a=u?u[r]:null}return a==="auto"?null:a}function rt(t,r,a){var u=document.createElement(t);return u.className=r||"",a&&a.appendChild(u),u}function ct(t){var r=t.parentNode;r&&r.removeChild(t)}function zi(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ye(t){var r=t.parentNode;r&&r.lastChild!==t&&r.appendChild(t)}function we(t){var r=t.parentNode;r&&r.firstChild!==t&&r.insertBefore(t,r.firstChild)}function In(t,r){if(t.classList!==void 0)return t.classList.contains(r);var a=Ai(t);return a.length>0&&new RegExp("(^|\\s)"+r+"(\\s|$)").test(a)}function et(t,r){if(t.classList!==void 0)for(var a=b(r),u=0,p=a.length;u<p;u++)t.classList.add(a[u]);else if(!In(t,r)){var g=Ai(t);On(t,(g?g+" ":"")+r)}}function ft(t,r){t.classList!==void 0?t.classList.remove(r):On(t,w((" "+Ai(t)+" ").replace(" "+r+" "," ")))}function On(t,r){t.className.baseVal===void 0?t.className=r:t.className.baseVal=r}function Ai(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function St(t,r){"opacity"in t.style?t.style.opacity=r:"filter"in t.style&&qh(t,r)}function qh(t,r){var a=!1,u="DXImageTransform.Microsoft.Alpha";try{a=t.filters.item(u)}catch{if(r===1)return}r=Math.round(r*100),a?(a.Enabled=r!==100,a.Opacity=r):t.style.filter+=" progid:"+u+"(opacity="+r+")"}function Bi(t){for(var r=document.documentElement.style,a=0;a<t.length;a++)if(t[a]in r)return t[a];return!1}function ae(t,r,a){var u=r||new R(0,0);t.style[Bn]=(H.ie3d?"translate("+u.x+"px,"+u.y+"px)":"translate3d("+u.x+"px,"+u.y+"px,0)")+(a?" scale("+a+")":"")}function _t(t,r){t._leaflet_pos=r,H.any3d?ae(t,r):(t.style.left=r.x+"px",t.style.top=r.y+"px")}function he(t){return t._leaflet_pos||new R(0,0)}var He,Ge,Fn;if("onselectstart"in document)He=function(){Q(window,"selectstart",vt)},Ge=function(){lt(window,"selectstart",vt)};else{var qe=Bi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);He=function(){if(qe){var t=document.documentElement.style;Fn=t[qe],t[qe]="none"}},Ge=function(){qe&&(document.documentElement.style[qe]=Fn,Fn=void 0)}}function Zn(){Q(window,"dragstart",vt)}function Rn(){lt(window,"dragstart",vt)}var Ii,Nn;function jn(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(Oi(),Ii=t,Nn=t.style.outline,t.style.outline="none",Q(window,"keydown",Oi))}function Oi(){Ii&&(Ii.style.outline=Nn,Ii=void 0,Nn=void 0,lt(window,"keydown",Oi))}function mo(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Wn(t){var r=t.getBoundingClientRect();return{x:r.width/t.offsetWidth||1,y:r.height/t.offsetHeight||1,boundingClientRect:r}}var $h={__proto__:null,TRANSFORM:Bn,TRANSITION:Ye,TRANSITION_END:po,get:_o,getStyle:Xe,create:rt,remove:ct,empty:zi,toFront:ye,toBack:we,hasClass:In,addClass:et,removeClass:ft,setClass:On,getClass:Ai,setOpacity:St,testProp:Bi,setTransform:ae,setPosition:_t,getPosition:he,get disableTextSelection(){return He},get enableTextSelection(){return Ge},disableImageDrag:Zn,enableImageDrag:Rn,preventOutline:jn,restoreOutline:Oi,getSizedParentNode:mo,getScale:Wn};function Q(t,r,a,u){if(r&&typeof r=="object")for(var p in r)Vn(t,p,r[p],a);else{r=b(r);for(var g=0,P=r.length;g<P;g++)Vn(t,r[g],a,u)}return this}var jt="_leaflet_events";function lt(t,r,a,u){if(arguments.length===1)go(t),delete t[jt];else if(r&&typeof r=="object")for(var p in r)Yn(t,p,r[p],a);else if(r=b(r),arguments.length===2)go(t,function(D){return k(r,D)!==-1});else for(var g=0,P=r.length;g<P;g++)Yn(t,r[g],a,u);return this}function go(t,r){for(var a in t[jt]){var u=a.split(/\d/)[0];(!r||r(u))&&Yn(t,u,null,null,a)}}var Un={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Vn(t,r,a,u){var p=r+d(a)+(u?"_"+d(u):"");if(t[jt]&&t[jt][p])return this;var g=function(D){return a.call(u||t,D||window.event)},P=g;!H.touchNative&&H.pointer&&r.indexOf("touch")===0?g=Rh(t,r,g):H.touch&&r==="dblclick"?g=Hh(t,g):"addEventListener"in t?r==="touchstart"||r==="touchmove"||r==="wheel"||r==="mousewheel"?t.addEventListener(Un[r]||r,g,H.passiveEvents?{passive:!1}:!1):r==="mouseenter"||r==="mouseleave"?(g=function(D){D=D||window.event,Hn(t,D)&&P(D)},t.addEventListener(Un[r],g,!1)):t.addEventListener(r,P,!1):t.attachEvent("on"+r,g),t[jt]=t[jt]||{},t[jt][p]=g}function Yn(t,r,a,u,p){p=p||r+d(a)+(u?"_"+d(u):"");var g=t[jt]&&t[jt][p];if(!g)return this;!H.touchNative&&H.pointer&&r.indexOf("touch")===0?Nh(t,r,g):H.touch&&r==="dblclick"?Gh(t,g):"removeEventListener"in t?t.removeEventListener(Un[r]||r,g,!1):t.detachEvent("on"+r,g),t[jt][p]=null}function le(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Xn(t){return Vn(t,"wheel",le),this}function $e(t){return Q(t,"mousedown touchstart dblclick contextmenu",le),t._leaflet_disable_click=!0,this}function vt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function ue(t){return vt(t),le(t),this}function vo(t){if(t.composedPath)return t.composedPath();for(var r=[],a=t.target;a;)r.push(a),a=a.parentNode;return r}function yo(t,r){if(!r)return new R(t.clientX,t.clientY);var a=Wn(r),u=a.boundingClientRect;return new R((t.clientX-u.left)/a.x-r.clientLeft,(t.clientY-u.top)/a.y-r.clientTop)}var Kh=H.linux&&H.chrome?window.devicePixelRatio:H.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function wo(t){return H.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Kh:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Hn(t,r){var a=r.relatedTarget;if(!a)return!0;try{for(;a&&a!==t;)a=a.parentNode}catch{return!1}return a!==t}var Jh={__proto__:null,on:Q,off:lt,stopPropagation:le,disableScrollPropagation:Xn,disableClickPropagation:$e,preventDefault:vt,stop:ue,getPropagationPath:vo,getMousePosition:yo,getWheelDelta:wo,isExternalTarget:Hn,addListener:Q,removeListener:lt},xo=U.extend({run:function(t,r,a,u){this.stop(),this._el=t,this._inProgress=!0,this._duration=a||.25,this._easeOutPower=1/Math.max(u||.5,.2),this._startPos=he(t),this._offset=r.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Y(this._animate,this),this._step()},_step:function(t){var r=+new Date-this._startTime,a=this._duration*1e3;r<a?this._runFrame(this._easeOut(r/a),t):(this._runFrame(1),this._complete())},_runFrame:function(t,r){var a=this._startPos.add(this._offset.multiplyBy(t));r&&a._round(),_t(this._el,a),this.fire("step")},_complete:function(){G(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),nt=U.extend({options:{crs:En,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,r){r=C(this,r),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),r.maxBounds&&this.setMaxBounds(r.maxBounds),r.zoom!==void 0&&(this._zoom=this._limitZoom(r.zoom)),r.center&&r.zoom!==void 0&&this.setView(at(r.center),r.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ye&&H.any3d&&!H.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Q(this._proxy,po,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,r,a){if(r=r===void 0?this._zoom:this._limitZoom(r),t=this._limitCenter(at(t),r,this.options.maxBounds),a=a||{},this._stop(),this._loaded&&!a.reset&&a!==!0){a.animate!==void 0&&(a.zoom=s({animate:a.animate},a.zoom),a.pan=s({animate:a.animate,duration:a.duration},a.pan));var u=this._zoom!==r?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,r,a.zoom):this._tryAnimatedPan(t,a.pan);if(u)return clearTimeout(this._sizeTimer),this}return this._resetView(t,r,a.pan&&a.pan.noMoveStart),this},setZoom:function(t,r){return this._loaded?this.setView(this.getCenter(),t,{zoom:r}):(this._zoom=t,this)},zoomIn:function(t,r){return t=t||(H.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,r)},zoomOut:function(t,r){return t=t||(H.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,r)},setZoomAround:function(t,r,a){var u=this.getZoomScale(r),p=this.getSize().divideBy(2),g=t instanceof R?t:this.latLngToContainerPoint(t),P=g.subtract(p).multiplyBy(1-1/u),D=this.containerPointToLatLng(p.add(P));return this.setView(D,r,{zoom:a})},_getBoundsCenterZoom:function(t,r){r=r||{},t=t.getBounds?t.getBounds():ht(t);var a=N(r.paddingTopLeft||r.padding||[0,0]),u=N(r.paddingBottomRight||r.padding||[0,0]),p=this.getBoundsZoom(t,!1,a.add(u));if(p=typeof r.maxZoom=="number"?Math.min(r.maxZoom,p):p,p===1/0)return{center:t.getCenter(),zoom:p};var g=u.subtract(a).divideBy(2),P=this.project(t.getSouthWest(),p),D=this.project(t.getNorthEast(),p),A=this.unproject(P.add(D).divideBy(2).add(g),p);return{center:A,zoom:p}},fitBounds:function(t,r){if(t=ht(t),!t.isValid())throw new Error("Bounds are not valid.");var a=this._getBoundsCenterZoom(t,r);return this.setView(a.center,a.zoom,r)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,r){return this.setView(t,this._zoom,{pan:r})},panBy:function(t,r){if(t=N(t).round(),r=r||{},!t.x&&!t.y)return this.fire("moveend");if(r.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new xo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),r.noMoveStart||this.fire("movestart"),r.animate!==!1){et(this._mapPane,"leaflet-pan-anim");var a=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,a,r.duration||.25,r.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,r,a){if(a=a||{},a.animate===!1||!H.any3d)return this.setView(t,r,a);this._stop();var u=this.project(this.getCenter()),p=this.project(t),g=this.getSize(),P=this._zoom;t=at(t),r=r===void 0?P:r;var D=Math.max(g.x,g.y),A=D*this.getZoomScale(P,r),Z=p.distanceTo(u)||1,j=1.42,K=j*j;function it(mt){var qi=mt?-1:1,Nl=mt?A:D,jl=A*A-D*D+qi*K*K*Z*Z,Wl=2*Nl*K*Z,rr=jl/Wl,es=Math.sqrt(rr*rr+1)-rr,Ul=es<1e-9?-18:Math.log(es);return Ul}function Dt(mt){return(Math.exp(mt)-Math.exp(-mt))/2}function de(mt){return(Math.exp(mt)+Math.exp(-mt))/2}function Gi(mt){return Dt(mt)/de(mt)}var oe=it(0);function nr(mt){return D*(de(oe)/de(oe+j*mt))}function Ol(mt){return D*(de(oe)*Gi(oe+j*mt)-Dt(oe))/K}function Fl(mt){return 1-Math.pow(1-mt,1.5)}var Zl=Date.now(),Qo=(it(1)-oe)/j,Rl=a.duration?1e3*a.duration:1e3*Qo*.8;function ts(){var mt=(Date.now()-Zl)/Rl,qi=Fl(mt)*Qo;mt<=1?(this._flyToFrame=Y(ts,this),this._move(this.unproject(u.add(p.subtract(u).multiplyBy(Ol(qi)/Z)),P),this.getScaleZoom(D/nr(qi),P),{flyTo:!0})):this._move(t,r)._moveEnd(!0)}return this._moveStart(!0,a.noMoveStart),ts.call(this),this},flyToBounds:function(t,r){var a=this._getBoundsCenterZoom(t,r);return this.flyTo(a.center,a.zoom,r)},setMaxBounds:function(t){return t=ht(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var r=this.options.minZoom;return this.options.minZoom=t,this._loaded&&r!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var r=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&r!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,r){this._enforcingBounds=!0;var a=this.getCenter(),u=this._limitCenter(a,this._zoom,ht(t));return a.equals(u)||this.panTo(u,r),this._enforcingBounds=!1,this},panInside:function(t,r){r=r||{};var a=N(r.paddingTopLeft||r.padding||[0,0]),u=N(r.paddingBottomRight||r.padding||[0,0]),p=this.project(this.getCenter()),g=this.project(t),P=this.getPixelBounds(),D=J([P.min.add(a),P.max.subtract(u)]),A=D.getSize();if(!D.contains(g)){this._enforcingBounds=!0;var Z=g.subtract(D.getCenter()),j=D.extend(g).getSize().subtract(A);p.x+=Z.x<0?-j.x:j.x,p.y+=Z.y<0?-j.y:j.y,this.panTo(this.unproject(p),r),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=s({animate:!1,pan:!0},t===!0?{animate:!0}:t);var r=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var a=this.getSize(),u=r.divideBy(2).round(),p=a.divideBy(2).round(),g=u.subtract(p);return!g.x&&!g.y?this:(t.animate&&t.pan?this.panBy(g):(t.pan&&this._rawPanBy(g),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:r,newSize:a}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=s({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var r=l(this._handleGeolocationResponse,this),a=l(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(r,a,t):navigator.geolocation.getCurrentPosition(r,a,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var r=t.code,a=t.message||(r===1?"permission denied":r===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:r,message:"Geolocation error: "+a+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var r=t.coords.latitude,a=t.coords.longitude,u=new ot(r,a),p=u.toBounds(t.coords.accuracy*2),g=this._locateOptions;if(g.setView){var P=this.getBoundsZoom(p);this.setView(u,g.maxZoom?Math.min(P,g.maxZoom):P)}var D={latlng:u,bounds:p,timestamp:t.timestamp};for(var A in t.coords)typeof t.coords[A]=="number"&&(D[A]=t.coords[A]);this.fire("locationfound",D)}},addHandler:function(t,r){if(!r)return this;var a=this[t]=new r(this);return this._handlers.push(a),this.options[t]&&a.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ct(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(G(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)ct(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,r){var a="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),u=rt("div",a,r||this._mapPane);return t&&(this._panes[t]=u),u},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),r=this.unproject(t.getBottomLeft()),a=this.unproject(t.getTopRight());return new ut(r,a)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,r,a){t=ht(t),a=N(a||[0,0]);var u=this.getZoom()||0,p=this.getMinZoom(),g=this.getMaxZoom(),P=t.getNorthWest(),D=t.getSouthEast(),A=this.getSize().subtract(a),Z=J(this.project(D,u),this.project(P,u)).getSize(),j=H.any3d?this.options.zoomSnap:1,K=A.x/Z.x,it=A.y/Z.y,Dt=r?Math.max(K,it):Math.min(K,it);return u=this.getScaleZoom(Dt,u),j&&(u=Math.round(u/(j/100))*(j/100),u=r?Math.ceil(u/j)*j:Math.floor(u/j)*j),Math.max(p,Math.min(g,u))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new R(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,r){var a=this._getTopLeftPoint(t,r);return new tt(a,a.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,r){var a=this.options.crs;return r=r===void 0?this._zoom:r,a.scale(t)/a.scale(r)},getScaleZoom:function(t,r){var a=this.options.crs;r=r===void 0?this._zoom:r;var u=a.zoom(t*a.scale(r));return isNaN(u)?1/0:u},project:function(t,r){return r=r===void 0?this._zoom:r,this.options.crs.latLngToPoint(at(t),r)},unproject:function(t,r){return r=r===void 0?this._zoom:r,this.options.crs.pointToLatLng(N(t),r)},layerPointToLatLng:function(t){var r=N(t).add(this.getPixelOrigin());return this.unproject(r)},latLngToLayerPoint:function(t){var r=this.project(at(t))._round();return r._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(at(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(ht(t))},distance:function(t,r){return this.options.crs.distance(at(t),at(r))},containerPointToLayerPoint:function(t){return N(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return N(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var r=this.containerPointToLayerPoint(N(t));return this.layerPointToLatLng(r)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(at(t)))},mouseEventToContainerPoint:function(t){return yo(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var r=this._container=_o(t);if(r){if(r._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Q(r,"scroll",this._onScroll,this),this._containerId=d(r)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&H.any3d,et(t,"leaflet-container"+(H.touch?" leaflet-touch":"")+(H.retina?" leaflet-retina":"")+(H.ielt9?" leaflet-oldie":"")+(H.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var r=Xe(t,"position");r!=="absolute"&&r!=="relative"&&r!=="fixed"&&r!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),_t(this._mapPane,new R(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(et(t.markerPane,"leaflet-zoom-hide"),et(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,r,a){_t(this._mapPane,new R(0,0));var u=!this._loaded;this._loaded=!0,r=this._limitZoom(r),this.fire("viewprereset");var p=this._zoom!==r;this._moveStart(p,a)._move(t,r)._moveEnd(p),this.fire("viewreset"),u&&this.fire("load")},_moveStart:function(t,r){return t&&this.fire("zoomstart"),r||this.fire("movestart"),this},_move:function(t,r,a,u){r===void 0&&(r=this._zoom);var p=this._zoom!==r;return this._zoom=r,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),u?a&&a.pinch&&this.fire("zoom",a):((p||a&&a.pinch)&&this.fire("zoom",a),this.fire("move",a)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return G(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){_t(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[d(this._container)]=this;var r=t?lt:Q;r(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&r(window,"resize",this._onResize,this),H.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){G(this._resizeRequest),this._resizeRequest=Y(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,r){for(var a=[],u,p=r==="mouseout"||r==="mouseover",g=t.target||t.srcElement,P=!1;g;){if(u=this._targets[d(g)],u&&(r==="click"||r==="preclick")&&this._draggableMoved(u)){P=!0;break}if(u&&u.listens(r,!0)&&(p&&!Hn(g,t)||(a.push(u),p))||g===this._container)break;g=g.parentNode}return!a.length&&!P&&!p&&this.listens(r,!0)&&(a=[this]),a},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var r=t.target||t.srcElement;if(!(!this._loaded||r._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(r))){var a=t.type;a==="mousedown"&&jn(r),this._fireDOMEvent(t,a)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,r,a){if(t.type==="click"){var u=s({},t);u.type="preclick",this._fireDOMEvent(u,u.type,a)}var p=this._findEventTargets(t,r);if(a){for(var g=[],P=0;P<a.length;P++)a[P].listens(r,!0)&&g.push(a[P]);p=g.concat(p)}if(p.length){r==="contextmenu"&&vt(t);var D=p[0],A={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var Z=D.getLatLng&&(!D._radius||D._radius<=10);A.containerPoint=Z?this.latLngToContainerPoint(D.getLatLng()):this.mouseEventToContainerPoint(t),A.layerPoint=this.containerPointToLayerPoint(A.containerPoint),A.latlng=Z?D.getLatLng():this.layerPointToLatLng(A.layerPoint)}for(P=0;P<p.length;P++)if(p[P].fire(r,A,!0),A.originalEvent._stopped||p[P].options.bubblingMouseEvents===!1&&k(this._mouseEvents,r)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,r=this._handlers.length;t<r;t++)this._handlers[t].disable()},whenReady:function(t,r){return this._loaded?t.call(r||this,{target:this}):this.on("load",t,r),this},_getMapPanePos:function(){return he(this._mapPane)||new R(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,r){var a=t&&r!==void 0?this._getNewPixelOrigin(t,r):this.getPixelOrigin();return a.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,r){var a=this.getSize()._divideBy(2);return this.project(t,r)._subtract(a)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,r,a){var u=this._getNewPixelOrigin(a,r);return this.project(t,r)._subtract(u)},_latLngBoundsToNewLayerBounds:function(t,r,a){var u=this._getNewPixelOrigin(a,r);return J([this.project(t.getSouthWest(),r)._subtract(u),this.project(t.getNorthWest(),r)._subtract(u),this.project(t.getSouthEast(),r)._subtract(u),this.project(t.getNorthEast(),r)._subtract(u)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,r,a){if(!a)return t;var u=this.project(t,r),p=this.getSize().divideBy(2),g=new tt(u.subtract(p),u.add(p)),P=this._getBoundsOffset(g,a,r);return Math.abs(P.x)<=1&&Math.abs(P.y)<=1?t:this.unproject(u.add(P),r)},_limitOffset:function(t,r){if(!r)return t;var a=this.getPixelBounds(),u=new tt(a.min.add(t),a.max.add(t));return t.add(this._getBoundsOffset(u,r))},_getBoundsOffset:function(t,r,a){var u=J(this.project(r.getNorthEast(),a),this.project(r.getSouthWest(),a)),p=u.min.subtract(t.min),g=u.max.subtract(t.max),P=this._rebound(p.x,-g.x),D=this._rebound(p.y,-g.y);return new R(P,D)},_rebound:function(t,r){return t+r>0?Math.round(t-r)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(r))},_limitZoom:function(t){var r=this.getMinZoom(),a=this.getMaxZoom(),u=H.any3d?this.options.zoomSnap:1;return u&&(t=Math.round(t/u)*u),Math.max(r,Math.min(a,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ft(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,r){var a=this._getCenterOffset(t)._trunc();return(r&&r.animate)!==!0&&!this.getSize().contains(a)?!1:(this.panBy(a,r),!0)},_createAnimProxy:function(){var t=this._proxy=rt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(r){var a=Bn,u=this._proxy.style[a];ae(this._proxy,this.project(r.center,r.zoom),this.getZoomScale(r.zoom,1)),u===this._proxy.style[a]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ct(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),r=this.getZoom();ae(this._proxy,this.project(t,r),this.getZoomScale(r,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,r,a){if(this._animatingZoom)return!0;if(a=a||{},!this._zoomAnimated||a.animate===!1||this._nothingToAnimate()||Math.abs(r-this._zoom)>this.options.zoomAnimationThreshold)return!1;var u=this.getZoomScale(r),p=this._getCenterOffset(t)._divideBy(1-1/u);return a.animate!==!0&&!this.getSize().contains(p)?!1:(Y(function(){this._moveStart(!0,!1)._animateZoom(t,r,!0)},this),!0)},_animateZoom:function(t,r,a,u){this._mapPane&&(a&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=r,et(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:r,noUpdate:u}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ft(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Qh(t,r){return new nt(t,r)}var At=v.extend({options:{position:"topright"},initialize:function(t){C(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var r=this._map;return r&&r.removeControl(this),this.options.position=t,r&&r.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var r=this._container=this.onAdd(t),a=this.getPosition(),u=t._controlCorners[a];return et(r,"leaflet-control"),a.indexOf("bottom")!==-1?u.insertBefore(r,u.firstChild):u.appendChild(r),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ct(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Ke=function(t){return new At(t)};nt.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},r="leaflet-",a=this._controlContainer=rt("div",r+"control-container",this._container);function u(p,g){var P=r+p+" "+r+g;t[p+g]=rt("div",P,a)}u("top","left"),u("top","right"),u("bottom","left"),u("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ct(this._controlCorners[t]);ct(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var bo=At.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,r,a,u){return a<u?-1:u<a?1:0}},initialize:function(t,r,a){C(this,a),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var u in t)this._addLayer(t[u],u);for(u in r)this._addLayer(r[u],u,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return At.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,r){return this._addLayer(t,r),this._map?this._update():this},addOverlay:function(t,r){return this._addLayer(t,r,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var r=this._getLayer(d(t));return r&&this._layers.splice(this._layers.indexOf(r),1),this._map?this._update():this},expand:function(){et(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(et(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):ft(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ft(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",r=this._container=rt("div",t),a=this.options.collapsed;r.setAttribute("aria-haspopup",!0),$e(r),Xn(r);var u=this._section=rt("section",t+"-list");a&&(this._map.on("click",this.collapse,this),Q(r,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var p=this._layersLink=rt("a",t+"-toggle",r);p.href="#",p.title="Layers",p.setAttribute("role","button"),Q(p,{keydown:function(g){g.keyCode===13&&this._expandSafely()},click:function(g){vt(g),this._expandSafely()}},this),a||this.expand(),this._baseLayersList=rt("div",t+"-base",u),this._separator=rt("div",t+"-separator",u),this._overlaysList=rt("div",t+"-overlays",u),r.appendChild(u)},_getLayer:function(t){for(var r=0;r<this._layers.length;r++)if(this._layers[r]&&d(this._layers[r].layer)===t)return this._layers[r]},_addLayer:function(t,r,a){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:r,overlay:a}),this.options.sortLayers&&this._layers.sort(l(function(u,p){return this.options.sortFunction(u.layer,p.layer,u.name,p.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;zi(this._baseLayersList),zi(this._overlaysList),this._layerControlInputs=[];var t,r,a,u,p=0;for(a=0;a<this._layers.length;a++)u=this._layers[a],this._addItem(u),r=r||u.overlay,t=t||!u.overlay,p+=u.overlay?0:1;return this.options.hideSingleBase&&(t=t&&p>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=r&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var r=this._getLayer(d(t.target)),a=r.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;a&&this._map.fire(a,r)},_createRadioElement:function(t,r){var a='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(r?' checked="checked"':"")+"/>",u=document.createElement("div");return u.innerHTML=a,u.firstChild},_addItem:function(t){var r=document.createElement("label"),a=this._map.hasLayer(t.layer),u;t.overlay?(u=document.createElement("input"),u.type="checkbox",u.className="leaflet-control-layers-selector",u.defaultChecked=a):u=this._createRadioElement("leaflet-base-layers_"+d(this),a),this._layerControlInputs.push(u),u.layerId=d(t.layer),Q(u,"click",this._onInputClick,this);var p=document.createElement("span");p.innerHTML=" "+t.name;var g=document.createElement("span");r.appendChild(g),g.appendChild(u),g.appendChild(p);var P=t.overlay?this._overlaysList:this._baseLayersList;return P.appendChild(r),this._checkDisabledLayers(),r},_onInputClick:function(){var t=this._layerControlInputs,r,a,u=[],p=[];this._handlingClick=!0;for(var g=t.length-1;g>=0;g--)r=t[g],a=this._getLayer(r.layerId).layer,r.checked?u.push(a):r.checked||p.push(a);for(g=0;g<p.length;g++)this._map.hasLayer(p[g])&&this._map.removeLayer(p[g]);for(g=0;g<u.length;g++)this._map.hasLayer(u[g])||this._map.addLayer(u[g]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,r,a,u=this._map.getZoom(),p=t.length-1;p>=0;p--)r=t[p],a=this._getLayer(r.layerId).layer,r.disabled=a.options.minZoom!==void 0&&u<a.options.minZoom||a.options.maxZoom!==void 0&&u>a.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;Q(t,"click",vt),this.expand(),setTimeout(function(){lt(t,"click",vt)})}}),tl=function(t,r,a){return new bo(t,r,a)},Gn=At.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var r="leaflet-control-zoom",a=rt("div",r+" leaflet-bar"),u=this.options;return this._zoomInButton=this._createButton(u.zoomInText,u.zoomInTitle,r+"-in",a,this._zoomIn),this._zoomOutButton=this._createButton(u.zoomOutText,u.zoomOutTitle,r+"-out",a,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),a},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,r,a,u,p){var g=rt("a",a,u);return g.innerHTML=t,g.href="#",g.title=r,g.setAttribute("role","button"),g.setAttribute("aria-label",r),$e(g),Q(g,"click",ue),Q(g,"click",p,this),Q(g,"click",this._refocusOnMap,this),g},_updateDisabled:function(){var t=this._map,r="leaflet-disabled";ft(this._zoomInButton,r),ft(this._zoomOutButton,r),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(et(this._zoomOutButton,r),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(et(this._zoomInButton,r),this._zoomInButton.setAttribute("aria-disabled","true"))}});nt.mergeOptions({zoomControl:!0}),nt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Gn,this.addControl(this.zoomControl))});var el=function(t){return new Gn(t)},Po=At.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var r="leaflet-control-scale",a=rt("div",r),u=this.options;return this._addScales(u,r+"-line",a),t.on(u.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),a},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,r,a){t.metric&&(this._mScale=rt("div",r,a)),t.imperial&&(this._iScale=rt("div",r,a))},_update:function(){var t=this._map,r=t.getSize().y/2,a=t.distance(t.containerPointToLatLng([0,r]),t.containerPointToLatLng([this.options.maxWidth,r]));this._updateScales(a)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var r=this._getRoundNum(t),a=r<1e3?r+" m":r/1e3+" km";this._updateScale(this._mScale,a,r/t)},_updateImperial:function(t){var r=t*3.2808399,a,u,p;r>5280?(a=r/5280,u=this._getRoundNum(a),this._updateScale(this._iScale,u+" mi",u/a)):(p=this._getRoundNum(r),this._updateScale(this._iScale,p+" ft",p/r))},_updateScale:function(t,r,a){t.style.width=Math.round(this.options.maxWidth*a)+"px",t.innerHTML=r},_getRoundNum:function(t){var r=Math.pow(10,(Math.floor(t)+"").length-1),a=t/r;return a=a>=10?10:a>=5?5:a>=3?3:a>=2?2:1,r*a}}),il=function(t){return new Po(t)},nl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',qn=At.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(H.inlineSvg?nl+" ":"")+"Leaflet</a>"},initialize:function(t){C(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=rt("div","leaflet-control-attribution"),$e(this._container);for(var r in t._layers)t._layers[r].getAttribution&&this.addAttribution(t._layers[r].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var r in this._attributions)this._attributions[r]&&t.push(r);var a=[];this.options.prefix&&a.push(this.options.prefix),t.length&&a.push(t.join(", ")),this._container.innerHTML=a.join(' <span aria-hidden="true">|</span> ')}}});nt.mergeOptions({attributionControl:!0}),nt.addInitHook(function(){this.options.attributionControl&&new qn().addTo(this)});var rl=function(t){return new qn(t)};At.Layers=bo,At.Zoom=Gn,At.Scale=Po,At.Attribution=qn,Ke.layers=tl,Ke.zoom=el,Ke.scale=il,Ke.attribution=rl;var Wt=v.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Wt.addTo=function(t,r){return t.addHandler(r,this),this};var ol={Events:T},Mo=H.touch?"touchstart mousedown":"mousedown",ne=U.extend({options:{clickTolerance:3},initialize:function(t,r,a,u){C(this,u),this._element=t,this._dragStartTarget=r||t,this._preventOutline=a},enable:function(){this._enabled||(Q(this._dragStartTarget,Mo,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ne._dragging===this&&this.finishDrag(!0),lt(this._dragStartTarget,Mo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!In(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){ne._dragging===this&&this.finishDrag();return}if(!(ne._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(ne._dragging=this,this._preventOutline&&jn(this._element),Zn(),He(),!this._moving)){this.fire("down");var r=t.touches?t.touches[0]:t,a=mo(this._element);this._startPoint=new R(r.clientX,r.clientY),this._startPos=he(this._element),this._parentScale=Wn(a);var u=t.type==="mousedown";Q(document,u?"mousemove":"touchmove",this._onMove,this),Q(document,u?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var r=t.touches&&t.touches.length===1?t.touches[0]:t,a=new R(r.clientX,r.clientY)._subtract(this._startPoint);!a.x&&!a.y||Math.abs(a.x)+Math.abs(a.y)<this.options.clickTolerance||(a.x/=this._parentScale.x,a.y/=this._parentScale.y,vt(t),this._moved||(this.fire("dragstart"),this._moved=!0,et(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),et(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(a),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),_t(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){ft(document.body,"leaflet-dragging"),this._lastTarget&&(ft(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),lt(document,"mousemove touchmove",this._onMove,this),lt(document,"mouseup touchend touchcancel",this._onUp,this),Rn(),Ge(),this._moved&&this._moving&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,ne._dragging=!1}});function Lo(t,r){if(!r||!t.length)return t.slice();var a=r*r;return t=hl(t,a),t=al(t,a),t}function Co(t,r,a){return Math.sqrt(Je(t,r,a,!0))}function sl(t,r,a){return Je(t,r,a)}function al(t,r){var a=t.length,u=typeof Uint8Array<"u"?Uint8Array:Array,p=new u(a);p[0]=p[a-1]=1,$n(t,p,r,0,a-1);var g,P=[];for(g=0;g<a;g++)p[g]&&P.push(t[g]);return P}function $n(t,r,a,u,p){var g=0,P,D,A;for(D=u+1;D<=p-1;D++)A=Je(t[D],t[u],t[p],!0),A>g&&(P=D,g=A);g>a&&(r[P]=1,$n(t,r,a,u,P),$n(t,r,a,P,p))}function hl(t,r){for(var a=[t[0]],u=1,p=0,g=t.length;u<g;u++)ll(t[u],t[p])>r&&(a.push(t[u]),p=u);return p<g-1&&a.push(t[g-1]),a}var Eo;function ko(t,r,a,u,p){var g=u?Eo:ce(t,a),P=ce(r,a),D,A,Z;for(Eo=P;;){if(!(g|P))return[t,r];if(g&P)return!1;D=g||P,A=Fi(t,r,D,a,p),Z=ce(A,a),D===g?(t=A,g=Z):(r=A,P=Z)}}function Fi(t,r,a,u,p){var g=r.x-t.x,P=r.y-t.y,D=u.min,A=u.max,Z,j;return a&8?(Z=t.x+g*(A.y-t.y)/P,j=A.y):a&4?(Z=t.x+g*(D.y-t.y)/P,j=D.y):a&2?(Z=A.x,j=t.y+P*(A.x-t.x)/g):a&1&&(Z=D.x,j=t.y+P*(D.x-t.x)/g),new R(Z,j,p)}function ce(t,r){var a=0;return t.x<r.min.x?a|=1:t.x>r.max.x&&(a|=2),t.y<r.min.y?a|=4:t.y>r.max.y&&(a|=8),a}function ll(t,r){var a=r.x-t.x,u=r.y-t.y;return a*a+u*u}function Je(t,r,a,u){var p=r.x,g=r.y,P=a.x-p,D=a.y-g,A=P*P+D*D,Z;return A>0&&(Z=((t.x-p)*P+(t.y-g)*D)/A,Z>1?(p=a.x,g=a.y):Z>0&&(p+=P*Z,g+=D*Z)),P=t.x-p,D=t.y-g,u?P*P+D*D:new R(p,g)}function Tt(t){return!M(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function So(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Tt(t)}function To(t,r){var a,u,p,g,P,D,A,Z;if(!t||t.length===0)throw new Error("latlngs not passed");Tt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var j=[];for(var K in t)j.push(r.project(at(t[K])));var it=j.length;for(a=0,u=0;a<it-1;a++)u+=j[a].distanceTo(j[a+1])/2;if(u===0)Z=j[0];else for(a=0,g=0;a<it-1;a++)if(P=j[a],D=j[a+1],p=P.distanceTo(D),g+=p,g>u){A=(g-u)/p,Z=[D.x-A*(D.x-P.x),D.y-A*(D.y-P.y)];break}return r.unproject(N(Z))}var ul={__proto__:null,simplify:Lo,pointToSegmentDistance:Co,closestPointOnSegment:sl,clipSegment:ko,_getEdgeIntersection:Fi,_getBitCode:ce,_sqClosestPointOnSegment:Je,isFlat:Tt,_flat:So,polylineCenter:To};function Do(t,r,a){var u,p=[1,4,2,8],g,P,D,A,Z,j,K,it;for(g=0,j=t.length;g<j;g++)t[g]._code=ce(t[g],r);for(D=0;D<4;D++){for(K=p[D],u=[],g=0,j=t.length,P=j-1;g<j;P=g++)A=t[g],Z=t[P],A._code&K?Z._code&K||(it=Fi(Z,A,K,r,a),it._code=ce(it,r),u.push(it)):(Z._code&K&&(it=Fi(Z,A,K,r,a),it._code=ce(it,r),u.push(it)),u.push(A));t=u}return t}function zo(t,r){var a,u,p,g,P,D,A,Z,j;if(!t||t.length===0)throw new Error("latlngs not passed");Tt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var K=[];for(var it in t)K.push(r.project(at(t[it])));var Dt=K.length;for(D=A=Z=0,a=0,u=Dt-1;a<Dt;u=a++)p=K[a],g=K[u],P=p.y*g.x-g.y*p.x,A+=(p.x+g.x)*P,Z+=(p.y+g.y)*P,D+=P*3;return D===0?j=K[0]:j=[A/D,Z/D],r.unproject(N(j))}var cl={__proto__:null,clipPolygon:Do,polygonCenter:zo},Kn={project:function(t){return new R(t.lng,t.lat)},unproject:function(t){return new ot(t.y,t.x)},bounds:new tt([-180,-90],[180,90])},Jn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new tt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var r=Math.PI/180,a=this.R,u=t.lat*r,p=this.R_MINOR/a,g=Math.sqrt(1-p*p),P=g*Math.sin(u),D=Math.tan(Math.PI/4-u/2)/Math.pow((1-P)/(1+P),g/2);return u=-a*Math.log(Math.max(D,1e-10)),new R(t.lng*r*a,u)},unproject:function(t){for(var r=180/Math.PI,a=this.R,u=this.R_MINOR/a,p=Math.sqrt(1-u*u),g=Math.exp(-t.y/a),P=Math.PI/2-2*Math.atan(g),D=0,A=.1,Z;D<15&&Math.abs(A)>1e-7;D++)Z=p*Math.sin(P),Z=Math.pow((1-Z)/(1+Z),p/2),A=Math.PI/2-2*Math.atan(g*Z)-P,P+=A;return new ot(P*r,t.x*r/a)}},dl={__proto__:null,LonLat:Kn,Mercator:Jn,SphericalMercator:Ln},fl=s({},zt,{code:"EPSG:3395",projection:Jn,transformation:function(){var t=.5/(Math.PI*Jn.R);return Ue(t,.5,-t,.5)}()}),Ao=s({},zt,{code:"EPSG:4326",projection:Kn,transformation:Ue(1/180,1,-1/180,.5)}),pl=s({},kt,{projection:Kn,transformation:Ue(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,r){var a=r.lng-t.lng,u=r.lat-t.lat;return Math.sqrt(a*a+u*u)},infinite:!0});kt.Earth=zt,kt.EPSG3395=fl,kt.EPSG3857=En,kt.EPSG900913=wh,kt.EPSG4326=Ao,kt.Simple=pl;var Bt=U.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[d(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[d(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var r=t.target;if(r.hasLayer(this)){if(this._map=r,this._zoomAnimated=r._zoomAnimated,this.getEvents){var a=this.getEvents();r.on(a,this),this.once("remove",function(){r.off(a,this)},this)}this.onAdd(r),this.fire("add"),r.fire("layeradd",{layer:this})}}});nt.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var r=d(t);return this._layers[r]?this:(this._layers[r]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var r=d(t);return this._layers[r]?(this._loaded&&t.onRemove(this),delete this._layers[r],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return d(t)in this._layers},eachLayer:function(t,r){for(var a in this._layers)t.call(r,this._layers[a]);return this},_addLayers:function(t){t=t?M(t)?t:[t]:[];for(var r=0,a=t.length;r<a;r++)this.addLayer(t[r])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[d(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var r=d(t);this._zoomBoundLayers[r]&&(delete this._zoomBoundLayers[r],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,r=-1/0,a=this._getZoomSpan();for(var u in this._zoomBoundLayers){var p=this._zoomBoundLayers[u].options;t=p.minZoom===void 0?t:Math.min(t,p.minZoom),r=p.maxZoom===void 0?r:Math.max(r,p.maxZoom)}this._layersMaxZoom=r===-1/0?void 0:r,this._layersMinZoom=t===1/0?void 0:t,a!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var xe=Bt.extend({initialize:function(t,r){C(this,r),this._layers={};var a,u;if(t)for(a=0,u=t.length;a<u;a++)this.addLayer(t[a])},addLayer:function(t){var r=this.getLayerId(t);return this._layers[r]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var r=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[r]&&this._map.removeLayer(this._layers[r]),delete this._layers[r],this},hasLayer:function(t){var r=typeof t=="number"?t:this.getLayerId(t);return r in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var r=Array.prototype.slice.call(arguments,1),a,u;for(a in this._layers)u=this._layers[a],u[t]&&u[t].apply(u,r);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,r){for(var a in this._layers)t.call(r,this._layers[a]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return d(t)}}),_l=function(t,r){return new xe(t,r)},Ht=xe.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),xe.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),xe.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new ut;for(var r in this._layers){var a=this._layers[r];t.extend(a.getBounds?a.getBounds():a.getLatLng())}return t}}),ml=function(t,r){return new Ht(t,r)},be=v.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){C(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,r){var a=this._getIconUrl(t);if(!a){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var u=this._createImg(a,r&&r.tagName==="IMG"?r:null);return this._setIconStyles(u,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),u},_setIconStyles:function(t,r){var a=this.options,u=a[r+"Size"];typeof u=="number"&&(u=[u,u]);var p=N(u),g=N(r==="shadow"&&a.shadowAnchor||a.iconAnchor||p&&p.divideBy(2,!0));t.className="leaflet-marker-"+r+" "+(a.className||""),g&&(t.style.marginLeft=-g.x+"px",t.style.marginTop=-g.y+"px"),p&&(t.style.width=p.x+"px",t.style.height=p.y+"px")},_createImg:function(t,r){return r=r||document.createElement("img"),r.src=t,r},_getIconUrl:function(t){return H.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function gl(t){return new be(t)}var Qe=be.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Qe.imagePath!="string"&&(Qe.imagePath=this._detectIconPath()),(this.options.imagePath||Qe.imagePath)+be.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var r=function(a,u,p){var g=u.exec(a);return g&&g[p]};return t=r(t,/^url\((['"])?(.+)\1\)$/,2),t&&r(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=rt("div","leaflet-default-icon-path",document.body),r=Xe(t,"background-image")||Xe(t,"backgroundImage");if(document.body.removeChild(t),r=this._stripUrl(r),r)return r;var a=document.querySelector('link[href$="leaflet.css"]');return a?a.href.substring(0,a.href.length-11-1):""}}),Bo=Wt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new ne(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),et(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ft(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var r=this._marker,a=r._map,u=this._marker.options.autoPanSpeed,p=this._marker.options.autoPanPadding,g=he(r._icon),P=a.getPixelBounds(),D=a.getPixelOrigin(),A=J(P.min._subtract(D).add(p),P.max._subtract(D).subtract(p));if(!A.contains(g)){var Z=N((Math.max(A.max.x,g.x)-A.max.x)/(P.max.x-A.max.x)-(Math.min(A.min.x,g.x)-A.min.x)/(P.min.x-A.min.x),(Math.max(A.max.y,g.y)-A.max.y)/(P.max.y-A.max.y)-(Math.min(A.min.y,g.y)-A.min.y)/(P.min.y-A.min.y)).multiplyBy(u);a.panBy(Z,{animate:!1}),this._draggable._newPos._add(Z),this._draggable._startPos._add(Z),_t(r._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=Y(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(G(this._panRequest),this._panRequest=Y(this._adjustPan.bind(this,t)))},_onDrag:function(t){var r=this._marker,a=r._shadow,u=he(r._icon),p=r._map.layerPointToLatLng(u);a&&_t(a,u),r._latlng=p,t.latlng=p,t.oldLatLng=this._oldLatLng,r.fire("move",t).fire("drag",t)},_onDragEnd:function(t){G(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Zi=Bt.extend({options:{icon:new Qe,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,r){C(this,r),this._latlng=at(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var r=this._latlng;return this._latlng=at(t),this.update(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,r="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),a=t.icon.createIcon(this._icon),u=!1;a!==this._icon&&(this._icon&&this._removeIcon(),u=!0,t.title&&(a.title=t.title),a.tagName==="IMG"&&(a.alt=t.alt||"")),et(a,r),t.keyboard&&(a.tabIndex="0",a.setAttribute("role","button")),this._icon=a,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Q(a,"focus",this._panOnFocus,this);var p=t.icon.createShadow(this._shadow),g=!1;p!==this._shadow&&(this._removeShadow(),g=!0),p&&(et(p,r),p.alt=""),this._shadow=p,t.opacity<1&&this._updateOpacity(),u&&this.getPane().appendChild(this._icon),this._initInteraction(),p&&g&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&lt(this._icon,"focus",this._panOnFocus,this),ct(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ct(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&_t(this._icon,t),this._shadow&&_t(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var r=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(r)},_initInteraction:function(){if(this.options.interactive&&(et(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Bo)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Bo(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&St(this._icon,t),this._shadow&&St(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var r=this.options.icon.options,a=r.iconSize?N(r.iconSize):N(0,0),u=r.iconAnchor?N(r.iconAnchor):N(0,0);t.panInside(this._latlng,{paddingTopLeft:u,paddingBottomRight:a.subtract(u)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function vl(t,r){return new Zi(t,r)}var re=Bt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return C(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ri=re.extend({options:{fill:!0,radius:10},initialize:function(t,r){C(this,r),this._latlng=at(t),this._radius=this.options.radius},setLatLng:function(t){var r=this._latlng;return this._latlng=at(t),this.redraw(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var r=t&&t.radius||this._radius;return re.prototype.setStyle.call(this,t),this.setRadius(r),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,r=this._radiusY||t,a=this._clickTolerance(),u=[t+a,r+a];this._pxBounds=new tt(this._point.subtract(u),this._point.add(u))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function yl(t,r){return new Ri(t,r)}var Qn=Ri.extend({initialize:function(t,r,a){if(typeof r=="number"&&(r=s({},a,{radius:r})),C(this,r),this._latlng=at(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new ut(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:re.prototype.setStyle,_project:function(){var t=this._latlng.lng,r=this._latlng.lat,a=this._map,u=a.options.crs;if(u.distance===zt.distance){var p=Math.PI/180,g=this._mRadius/zt.R/p,P=a.project([r+g,t]),D=a.project([r-g,t]),A=P.add(D).divideBy(2),Z=a.unproject(A).lat,j=Math.acos((Math.cos(g*p)-Math.sin(r*p)*Math.sin(Z*p))/(Math.cos(r*p)*Math.cos(Z*p)))/p;(isNaN(j)||j===0)&&(j=g/Math.cos(Math.PI/180*r)),this._point=A.subtract(a.getPixelOrigin()),this._radius=isNaN(j)?0:A.x-a.project([Z,t-j]).x,this._radiusY=A.y-P.y}else{var K=u.unproject(u.project(this._latlng).subtract([this._mRadius,0]));this._point=a.latLngToLayerPoint(this._latlng),this._radius=this._point.x-a.latLngToLayerPoint(K).x}this._updateBounds()}});function wl(t,r,a){return new Qn(t,r,a)}var Gt=re.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,r){C(this,r),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var r=1/0,a=null,u=Je,p,g,P=0,D=this._parts.length;P<D;P++)for(var A=this._parts[P],Z=1,j=A.length;Z<j;Z++){p=A[Z-1],g=A[Z];var K=u(t,p,g,!0);K<r&&(r=K,a=u(t,p,g))}return a&&(a.distance=Math.sqrt(r)),a},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return To(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,r){return r=r||this._defaultShape(),t=at(t),r.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new ut,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Tt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var r=[],a=Tt(t),u=0,p=t.length;u<p;u++)a?(r[u]=at(t[u]),this._bounds.extend(r[u])):r[u]=this._convertLatLngs(t[u]);return r},_project:function(){var t=new tt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),r=new R(t,t);this._rawPxBounds&&(this._pxBounds=new tt([this._rawPxBounds.min.subtract(r),this._rawPxBounds.max.add(r)]))},_projectLatlngs:function(t,r,a){var u=t[0]instanceof ot,p=t.length,g,P;if(u){for(P=[],g=0;g<p;g++)P[g]=this._map.latLngToLayerPoint(t[g]),a.extend(P[g]);r.push(P)}else for(g=0;g<p;g++)this._projectLatlngs(t[g],r,a)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var r=this._parts,a,u,p,g,P,D,A;for(a=0,p=0,g=this._rings.length;a<g;a++)for(A=this._rings[a],u=0,P=A.length;u<P-1;u++)D=ko(A[u],A[u+1],t,u,!0),D&&(r[p]=r[p]||[],r[p].push(D[0]),(D[1]!==A[u+1]||u===P-2)&&(r[p].push(D[1]),p++))}},_simplifyPoints:function(){for(var t=this._parts,r=this.options.smoothFactor,a=0,u=t.length;a<u;a++)t[a]=Lo(t[a],r)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,r){var a,u,p,g,P,D,A=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(a=0,g=this._parts.length;a<g;a++)for(D=this._parts[a],u=0,P=D.length,p=P-1;u<P;p=u++)if(!(!r&&u===0)&&Co(t,D[p],D[u])<=A)return!0;return!1}});function xl(t,r){return new Gt(t,r)}Gt._flat=So;var Pe=Gt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return zo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var r=Gt.prototype._convertLatLngs.call(this,t),a=r.length;return a>=2&&r[0]instanceof ot&&r[0].equals(r[a-1])&&r.pop(),r},_setLatLngs:function(t){Gt.prototype._setLatLngs.call(this,t),Tt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Tt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,r=this.options.weight,a=new R(r,r);if(t=new tt(t.min.subtract(a),t.max.add(a)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var u=0,p=this._rings.length,g;u<p;u++)g=Do(this._rings[u],t,!0),g.length&&this._parts.push(g)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var r=!1,a,u,p,g,P,D,A,Z;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(g=0,A=this._parts.length;g<A;g++)for(a=this._parts[g],P=0,Z=a.length,D=Z-1;P<Z;D=P++)u=a[P],p=a[D],u.y>t.y!=p.y>t.y&&t.x<(p.x-u.x)*(t.y-u.y)/(p.y-u.y)+u.x&&(r=!r);return r||Gt.prototype._containsPoint.call(this,t,!0)}});function bl(t,r){return new Pe(t,r)}var qt=Ht.extend({initialize:function(t,r){C(this,r),this._layers={},t&&this.addData(t)},addData:function(t){var r=M(t)?t:t.features,a,u,p;if(r){for(a=0,u=r.length;a<u;a++)p=r[a],(p.geometries||p.geometry||p.features||p.coordinates)&&this.addData(p);return this}var g=this.options;if(g.filter&&!g.filter(t))return this;var P=Ni(t,g);return P?(P.feature=Ui(t),P.defaultOptions=P.options,this.resetStyle(P),g.onEachFeature&&g.onEachFeature(t,P),this.addLayer(P)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=s({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(r){this._setLayerStyle(r,t)},this)},_setLayerStyle:function(t,r){t.setStyle&&(typeof r=="function"&&(r=r(t.feature)),t.setStyle(r))}});function Ni(t,r){var a=t.type==="Feature"?t.geometry:t,u=a?a.coordinates:null,p=[],g=r&&r.pointToLayer,P=r&&r.coordsToLatLng||tr,D,A,Z,j;if(!u&&!a)return null;switch(a.type){case"Point":return D=P(u),Io(g,t,D,r);case"MultiPoint":for(Z=0,j=u.length;Z<j;Z++)D=P(u[Z]),p.push(Io(g,t,D,r));return new Ht(p);case"LineString":case"MultiLineString":return A=ji(u,a.type==="LineString"?0:1,P),new Gt(A,r);case"Polygon":case"MultiPolygon":return A=ji(u,a.type==="Polygon"?1:2,P),new Pe(A,r);case"GeometryCollection":for(Z=0,j=a.geometries.length;Z<j;Z++){var K=Ni({geometry:a.geometries[Z],type:"Feature",properties:t.properties},r);K&&p.push(K)}return new Ht(p);case"FeatureCollection":for(Z=0,j=a.features.length;Z<j;Z++){var it=Ni(a.features[Z],r);it&&p.push(it)}return new Ht(p);default:throw new Error("Invalid GeoJSON object.")}}function Io(t,r,a,u){return t?t(r,a):new Zi(a,u&&u.markersInheritOptions&&u)}function tr(t){return new ot(t[1],t[0],t[2])}function ji(t,r,a){for(var u=[],p=0,g=t.length,P;p<g;p++)P=r?ji(t[p],r-1,a):(a||tr)(t[p]),u.push(P);return u}function er(t,r){return t=at(t),t.alt!==void 0?[y(t.lng,r),y(t.lat,r),y(t.alt,r)]:[y(t.lng,r),y(t.lat,r)]}function Wi(t,r,a,u){for(var p=[],g=0,P=t.length;g<P;g++)p.push(r?Wi(t[g],Tt(t[g])?0:r-1,a,u):er(t[g],u));return!r&&a&&p.push(p[0].slice()),p}function Me(t,r){return t.feature?s({},t.feature,{geometry:r}):Ui(r)}function Ui(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var ir={toGeoJSON:function(t){return Me(this,{type:"Point",coordinates:er(this.getLatLng(),t)})}};Zi.include(ir),Qn.include(ir),Ri.include(ir),Gt.include({toGeoJSON:function(t){var r=!Tt(this._latlngs),a=Wi(this._latlngs,r?1:0,!1,t);return Me(this,{type:(r?"Multi":"")+"LineString",coordinates:a})}}),Pe.include({toGeoJSON:function(t){var r=!Tt(this._latlngs),a=r&&!Tt(this._latlngs[0]),u=Wi(this._latlngs,a?2:r?1:0,!0,t);return r||(u=[u]),Me(this,{type:(a?"Multi":"")+"Polygon",coordinates:u})}}),xe.include({toMultiPoint:function(t){var r=[];return this.eachLayer(function(a){r.push(a.toGeoJSON(t).geometry.coordinates)}),Me(this,{type:"MultiPoint",coordinates:r})},toGeoJSON:function(t){var r=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(r==="MultiPoint")return this.toMultiPoint(t);var a=r==="GeometryCollection",u=[];return this.eachLayer(function(p){if(p.toGeoJSON){var g=p.toGeoJSON(t);if(a)u.push(g.geometry);else{var P=Ui(g);P.type==="FeatureCollection"?u.push.apply(u,P.features):u.push(P)}}}),a?Me(this,{geometries:u,type:"GeometryCollection"}):{type:"FeatureCollection",features:u}}});function Oo(t,r){return new qt(t,r)}var Pl=Oo,Vi=Bt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,r,a){this._url=t,this._bounds=ht(r),C(this,a)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(et(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ct(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ye(this._image),this},bringToBack:function(){return this._map&&we(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=ht(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",r=this._image=t?this._url:rt("img");if(et(r,"leaflet-image-layer"),this._zoomAnimated&&et(r,"leaflet-zoom-animated"),this.options.className&&et(r,this.options.className),r.onselectstart=m,r.onmousemove=m,r.onload=l(this.fire,this,"load"),r.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=r.src;return}r.src=this._url,r.alt=this.options.alt},_animateZoom:function(t){var r=this._map.getZoomScale(t.zoom),a=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ae(this._image,a,r)},_reset:function(){var t=this._image,r=new tt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),a=r.getSize();_t(t,r.min),t.style.width=a.x+"px",t.style.height=a.y+"px"},_updateOpacity:function(){St(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Ml=function(t,r,a){return new Vi(t,r,a)},Fo=Vi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",r=this._image=t?this._url:rt("video");if(et(r,"leaflet-image-layer"),this._zoomAnimated&&et(r,"leaflet-zoom-animated"),this.options.className&&et(r,this.options.className),r.onselectstart=m,r.onmousemove=m,r.onloadeddata=l(this.fire,this,"load"),t){for(var a=r.getElementsByTagName("source"),u=[],p=0;p<a.length;p++)u.push(a[p].src);this._url=a.length>0?u:[r.src];return}M(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(r.style,"objectFit")&&(r.style.objectFit="fill"),r.autoplay=!!this.options.autoplay,r.loop=!!this.options.loop,r.muted=!!this.options.muted,r.playsInline=!!this.options.playsInline;for(var g=0;g<this._url.length;g++){var P=rt("source");P.src=this._url[g],r.appendChild(P)}}});function Ll(t,r,a){return new Fo(t,r,a)}var Zo=Vi.extend({_initImage:function(){var t=this._image=this._url;et(t,"leaflet-image-layer"),this._zoomAnimated&&et(t,"leaflet-zoom-animated"),this.options.className&&et(t,this.options.className),t.onselectstart=m,t.onmousemove=m}});function Cl(t,r,a){return new Zo(t,r,a)}var Ut=Bt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,r){t&&(t instanceof ot||M(t))?(this._latlng=at(t),C(this,r)):(C(this,t),this._source=r),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&St(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&St(this._container,1),this.bringToFront(),this.options.interactive&&(et(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(St(this._container,0),this._removeTimeout=setTimeout(l(ct,void 0,this._container),200)):ct(this._container),this.options.interactive&&(ft(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=at(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ye(this._container),this},bringToBack:function(){return this._map&&we(this._container),this},_prepareOpen:function(t){var r=this._source;if(!r._map)return!1;if(r instanceof Ht){r=null;var a=this._source._layers;for(var u in a)if(a[u]._map){r=a[u];break}if(!r)return!1;this._source=r}if(!t)if(r.getCenter)t=r.getCenter();else if(r.getLatLng)t=r.getLatLng();else if(r.getBounds)t=r.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,r=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof r=="string")t.innerHTML=r;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(r)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),r=N(this.options.offset),a=this._getAnchor();this._zoomAnimated?_t(this._container,t.add(a)):r=r.add(t).add(a);var u=this._containerBottom=-r.y,p=this._containerLeft=-Math.round(this._containerWidth/2)+r.x;this._container.style.bottom=u+"px",this._container.style.left=p+"px"}},_getAnchor:function(){return[0,0]}});nt.include({_initOverlay:function(t,r,a,u){var p=r;return p instanceof t||(p=new t(u).setContent(r)),a&&p.setLatLng(a),p}}),Bt.include({_initOverlay:function(t,r,a,u){var p=a;return p instanceof t?(C(p,u),p._source=this):(p=r&&!u?r:new t(u,this),p.setContent(a)),p}});var Yi=Ut.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Ut.prototype.openOn.call(this,t)},onAdd:function(t){Ut.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof re||this._source.on("preclick",le))},onRemove:function(t){Ut.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof re||this._source.off("preclick",le))},getEvents:function(){var t=Ut.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",r=this._container=rt("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),a=this._wrapper=rt("div",t+"-content-wrapper",r);if(this._contentNode=rt("div",t+"-content",a),$e(r),Xn(this._contentNode),Q(r,"contextmenu",le),this._tipContainer=rt("div",t+"-tip-container",r),this._tip=rt("div",t+"-tip",this._tipContainer),this.options.closeButton){var u=this._closeButton=rt("a",t+"-close-button",r);u.setAttribute("role","button"),u.setAttribute("aria-label","Close popup"),u.href="#close",u.innerHTML='<span aria-hidden="true">&#215;</span>',Q(u,"click",function(p){vt(p),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,r=t.style;r.width="",r.whiteSpace="nowrap";var a=t.offsetWidth;a=Math.min(a,this.options.maxWidth),a=Math.max(a,this.options.minWidth),r.width=a+1+"px",r.whiteSpace="",r.height="";var u=t.offsetHeight,p=this.options.maxHeight,g="leaflet-popup-scrolled";p&&u>p?(r.height=p+"px",et(t,g)):ft(t,g),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var r=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),a=this._getAnchor();_t(this._container,r.add(a))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,r=parseInt(Xe(this._container,"marginBottom"),10)||0,a=this._container.offsetHeight+r,u=this._containerWidth,p=new R(this._containerLeft,-a-this._containerBottom);p._add(he(this._container));var g=t.layerPointToContainerPoint(p),P=N(this.options.autoPanPadding),D=N(this.options.autoPanPaddingTopLeft||P),A=N(this.options.autoPanPaddingBottomRight||P),Z=t.getSize(),j=0,K=0;g.x+u+A.x>Z.x&&(j=g.x+u-Z.x+A.x),g.x-j-D.x<0&&(j=g.x-D.x),g.y+a+A.y>Z.y&&(K=g.y+a-Z.y+A.y),g.y-K-D.y<0&&(K=g.y-D.y),(j||K)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([j,K]))}},_getAnchor:function(){return N(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),El=function(t,r){return new Yi(t,r)};nt.mergeOptions({closePopupOnClick:!0}),nt.include({openPopup:function(t,r,a){return this._initOverlay(Yi,t,r,a).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Bt.include({bindPopup:function(t,r){return this._popup=this._initOverlay(Yi,this._popup,t,r),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Ht||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){ue(t);var r=t.layer||t.target;if(this._popup._source===r&&!(r instanceof re)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=r,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Xi=Ut.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Ut.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Ut.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Ut.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",r=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=rt("div",r),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var r,a,u=this._map,p=this._container,g=u.latLngToContainerPoint(u.getCenter()),P=u.layerPointToContainerPoint(t),D=this.options.direction,A=p.offsetWidth,Z=p.offsetHeight,j=N(this.options.offset),K=this._getAnchor();D==="top"?(r=A/2,a=Z):D==="bottom"?(r=A/2,a=0):D==="center"?(r=A/2,a=Z/2):D==="right"?(r=0,a=Z/2):D==="left"?(r=A,a=Z/2):P.x<g.x?(D="right",r=0,a=Z/2):(D="left",r=A+(j.x+K.x)*2,a=Z/2),t=t.subtract(N(r,a,!0)).add(j).add(K),ft(p,"leaflet-tooltip-right"),ft(p,"leaflet-tooltip-left"),ft(p,"leaflet-tooltip-top"),ft(p,"leaflet-tooltip-bottom"),et(p,"leaflet-tooltip-"+D),_t(p,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&St(this._container,t)},_animateZoom:function(t){var r=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(r)},_getAnchor:function(){return N(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),kl=function(t,r){return new Xi(t,r)};nt.include({openTooltip:function(t,r,a){return this._initOverlay(Xi,t,r,a).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Bt.include({bindTooltip:function(t,r){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Xi,this._tooltip,t,r),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var r=t?"off":"on",a={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?a.add=this._openTooltip:(a.mouseover=this._openTooltip,a.mouseout=this.closeTooltip,a.click=this._openTooltip,this._map?this._addFocusListeners():a.add=this._addFocusListeners),this._tooltip.options.sticky&&(a.mousemove=this._moveTooltip),this[r](a),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Ht||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var r=t.getElement();r&&(Q(r,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),Q(r,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var r=t.getElement();r&&r.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0))},_moveTooltip:function(t){var r=t.latlng,a,u;this._tooltip.options.sticky&&t.originalEvent&&(a=this._map.mouseEventToContainerPoint(t.originalEvent),u=this._map.containerPointToLayerPoint(a),r=this._map.layerPointToLatLng(u)),this._tooltip.setLatLng(r)}});var Ro=be.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var r=t&&t.tagName==="DIV"?t:document.createElement("div"),a=this.options;if(a.html instanceof Element?(zi(r),r.appendChild(a.html)):r.innerHTML=a.html!==!1?a.html:"",a.bgPos){var u=N(a.bgPos);r.style.backgroundPosition=-u.x+"px "+-u.y+"px"}return this._setIconStyles(r,"icon"),r},createShadow:function(){return null}});function Sl(t){return new Ro(t)}be.Default=Qe;var ti=Bt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:H.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){C(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ct(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ye(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(we(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof R?t:new R(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var r=this.getPane().children,a=-t(-1/0,1/0),u=0,p=r.length,g;u<p;u++)g=r[u].style.zIndex,r[u]!==this._container&&g&&(a=t(a,+g));isFinite(a)&&(this.options.zIndex=a+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!H.ielt9){St(this._container,this.options.opacity);var t=+new Date,r=!1,a=!1;for(var u in this._tiles){var p=this._tiles[u];if(!(!p.current||!p.loaded)){var g=Math.min(1,(t-p.loaded)/200);St(p.el,g),g<1?r=!0:(p.active?a=!0:this._onOpaqueTile(p),p.active=!0)}}a&&!this._noPrune&&this._pruneTiles(),r&&(G(this._fadeFrame),this._fadeFrame=Y(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=rt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,r=this.options.maxZoom;if(t!==void 0){for(var a in this._levels)a=Number(a),this._levels[a].el.children.length||a===t?(this._levels[a].el.style.zIndex=r-Math.abs(t-a),this._onUpdateLevel(a)):(ct(this._levels[a].el),this._removeTilesAtZoom(a),this._onRemoveLevel(a),delete this._levels[a]);var u=this._levels[t],p=this._map;return u||(u=this._levels[t]={},u.el=rt("div","leaflet-tile-container leaflet-zoom-animated",this._container),u.el.style.zIndex=r,u.origin=p.project(p.unproject(p.getPixelOrigin()),t).round(),u.zoom=t,this._setZoomTransform(u,p.getCenter(),p.getZoom()),m(u.el.offsetWidth),this._onCreateLevel(u)),this._level=u,u}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var t,r,a=this._map.getZoom();if(a>this.options.maxZoom||a<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)r=this._tiles[t],r.retain=r.current;for(t in this._tiles)if(r=this._tiles[t],r.current&&!r.active){var u=r.coords;this._retainParent(u.x,u.y,u.z,u.z-5)||this._retainChildren(u.x,u.y,u.z,u.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var r in this._tiles)this._tiles[r].coords.z===t&&this._removeTile(r)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ct(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,r,a,u){var p=Math.floor(t/2),g=Math.floor(r/2),P=a-1,D=new R(+p,+g);D.z=+P;var A=this._tileCoordsToKey(D),Z=this._tiles[A];return Z&&Z.active?(Z.retain=!0,!0):(Z&&Z.loaded&&(Z.retain=!0),P>u?this._retainParent(p,g,P,u):!1)},_retainChildren:function(t,r,a,u){for(var p=2*t;p<2*t+2;p++)for(var g=2*r;g<2*r+2;g++){var P=new R(p,g);P.z=a+1;var D=this._tileCoordsToKey(P),A=this._tiles[D];if(A&&A.active){A.retain=!0;continue}else A&&A.loaded&&(A.retain=!0);a+1<u&&this._retainChildren(p,g,a+1,u)}},_resetView:function(t){var r=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),r,r)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var r=this.options;return r.minNativeZoom!==void 0&&t<r.minNativeZoom?r.minNativeZoom:r.maxNativeZoom!==void 0&&r.maxNativeZoom<t?r.maxNativeZoom:t},_setView:function(t,r,a,u){var p=Math.round(r);this.options.maxZoom!==void 0&&p>this.options.maxZoom||this.options.minZoom!==void 0&&p<this.options.minZoom?p=void 0:p=this._clampZoom(p);var g=this.options.updateWhenZooming&&p!==this._tileZoom;(!u||g)&&(this._tileZoom=p,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),p!==void 0&&this._update(t),a||this._pruneTiles(),this._noPrune=!!a),this._setZoomTransforms(t,r)},_setZoomTransforms:function(t,r){for(var a in this._levels)this._setZoomTransform(this._levels[a],t,r)},_setZoomTransform:function(t,r,a){var u=this._map.getZoomScale(a,t.zoom),p=t.origin.multiplyBy(u).subtract(this._map._getNewPixelOrigin(r,a)).round();H.any3d?ae(t.el,p,u):_t(t.el,p)},_resetGrid:function(){var t=this._map,r=t.options.crs,a=this._tileSize=this.getTileSize(),u=this._tileZoom,p=this._map.getPixelWorldBounds(this._tileZoom);p&&(this._globalTileRange=this._pxBoundsToTileRange(p)),this._wrapX=r.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,r.wrapLng[0]],u).x/a.x),Math.ceil(t.project([0,r.wrapLng[1]],u).x/a.y)],this._wrapY=r.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([r.wrapLat[0],0],u).y/a.x),Math.ceil(t.project([r.wrapLat[1],0],u).y/a.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var r=this._map,a=r._animatingZoom?Math.max(r._animateToZoom,r.getZoom()):r.getZoom(),u=r.getZoomScale(a,this._tileZoom),p=r.project(t,this._tileZoom).floor(),g=r.getSize().divideBy(u*2);return new tt(p.subtract(g),p.add(g))},_update:function(t){var r=this._map;if(r){var a=this._clampZoom(r.getZoom());if(t===void 0&&(t=r.getCenter()),this._tileZoom!==void 0){var u=this._getTiledPixelBounds(t),p=this._pxBoundsToTileRange(u),g=p.getCenter(),P=[],D=this.options.keepBuffer,A=new tt(p.getBottomLeft().subtract([D,-D]),p.getTopRight().add([D,-D]));if(!(isFinite(p.min.x)&&isFinite(p.min.y)&&isFinite(p.max.x)&&isFinite(p.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Z in this._tiles){var j=this._tiles[Z].coords;(j.z!==this._tileZoom||!A.contains(new R(j.x,j.y)))&&(this._tiles[Z].current=!1)}if(Math.abs(a-this._tileZoom)>1){this._setView(t,a);return}for(var K=p.min.y;K<=p.max.y;K++)for(var it=p.min.x;it<=p.max.x;it++){var Dt=new R(it,K);if(Dt.z=this._tileZoom,!!this._isValidTile(Dt)){var de=this._tiles[this._tileCoordsToKey(Dt)];de?de.current=!0:P.push(Dt)}}if(P.sort(function(oe,nr){return oe.distanceTo(g)-nr.distanceTo(g)}),P.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Gi=document.createDocumentFragment();for(it=0;it<P.length;it++)this._addTile(P[it],Gi);this._level.el.appendChild(Gi)}}}},_isValidTile:function(t){var r=this._map.options.crs;if(!r.infinite){var a=this._globalTileRange;if(!r.wrapLng&&(t.x<a.min.x||t.x>a.max.x)||!r.wrapLat&&(t.y<a.min.y||t.y>a.max.y))return!1}if(!this.options.bounds)return!0;var u=this._tileCoordsToBounds(t);return ht(this.options.bounds).overlaps(u)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var r=this._map,a=this.getTileSize(),u=t.scaleBy(a),p=u.add(a),g=r.unproject(u,t.z),P=r.unproject(p,t.z);return[g,P]},_tileCoordsToBounds:function(t){var r=this._tileCoordsToNwSe(t),a=new ut(r[0],r[1]);return this.options.noWrap||(a=this._map.wrapLatLngBounds(a)),a},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var r=t.split(":"),a=new R(+r[0],+r[1]);return a.z=+r[2],a},_removeTile:function(t){var r=this._tiles[t];r&&(ct(r.el),delete this._tiles[t],this.fire("tileunload",{tile:r.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){et(t,"leaflet-tile");var r=this.getTileSize();t.style.width=r.x+"px",t.style.height=r.y+"px",t.onselectstart=m,t.onmousemove=m,H.ielt9&&this.options.opacity<1&&St(t,this.options.opacity)},_addTile:function(t,r){var a=this._getTilePos(t),u=this._tileCoordsToKey(t),p=this.createTile(this._wrapCoords(t),l(this._tileReady,this,t));this._initTile(p),this.createTile.length<2&&Y(l(this._tileReady,this,t,null,p)),_t(p,a),this._tiles[u]={el:p,coords:t,current:!0},r.appendChild(p),this.fire("tileloadstart",{tile:p,coords:t})},_tileReady:function(t,r,a){r&&this.fire("tileerror",{error:r,tile:a,coords:t});var u=this._tileCoordsToKey(t);a=this._tiles[u],a&&(a.loaded=+new Date,this._map._fadeAnimated?(St(a.el,0),G(this._fadeFrame),this._fadeFrame=Y(this._updateOpacity,this)):(a.active=!0,this._pruneTiles()),r||(et(a.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:a.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),H.ielt9||!this._map._fadeAnimated?Y(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var r=new R(this._wrapX?f(t.x,this._wrapX):t.x,this._wrapY?f(t.y,this._wrapY):t.y);return r.z=t.z,r},_pxBoundsToTileRange:function(t){var r=this.getTileSize();return new tt(t.min.unscaleBy(r).floor(),t.max.unscaleBy(r).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Tl(t){return new ti(t)}var Le=ti.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,r){this._url=t,r=C(this,r),r.detectRetina&&H.retina&&r.maxZoom>0?(r.tileSize=Math.floor(r.tileSize/2),r.zoomReverse?(r.zoomOffset--,r.minZoom=Math.min(r.maxZoom,r.minZoom+1)):(r.zoomOffset++,r.maxZoom=Math.max(r.minZoom,r.maxZoom-1)),r.minZoom=Math.max(0,r.minZoom)):r.zoomReverse?r.minZoom=Math.min(r.maxZoom,r.minZoom):r.maxZoom=Math.max(r.minZoom,r.maxZoom),typeof r.subdomains=="string"&&(r.subdomains=r.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,r){return this._url===t&&r===void 0&&(r=!0),this._url=t,r||this.redraw(),this},createTile:function(t,r){var a=document.createElement("img");return Q(a,"load",l(this._tileOnLoad,this,r,a)),Q(a,"error",l(this._tileOnError,this,r,a)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(a.referrerPolicy=this.options.referrerPolicy),a.alt="",a.src=this.getTileUrl(t),a},getTileUrl:function(t){var r={r:H.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var a=this._globalTileRange.max.y-t.y;this.options.tms&&(r.y=a),r["-y"]=a}return x(this._url,s(r,this.options))},_tileOnLoad:function(t,r){H.ielt9?setTimeout(l(t,this,null,r),0):t(null,r)},_tileOnError:function(t,r,a){var u=this.options.errorTileUrl;u&&r.getAttribute("src")!==u&&(r.src=u),t(a,r)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,r=this.options.maxZoom,a=this.options.zoomReverse,u=this.options.zoomOffset;return a&&(t=r-t),t+u},_getSubdomain:function(t){var r=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[r]},_abortLoading:function(){var t,r;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(r=this._tiles[t].el,r.onload=m,r.onerror=m,!r.complete)){r.src=B;var a=this._tiles[t].coords;ct(r),delete this._tiles[t],this.fire("tileabort",{tile:r,coords:a})}},_removeTile:function(t){var r=this._tiles[t];if(r)return r.el.setAttribute("src",B),ti.prototype._removeTile.call(this,t)},_tileReady:function(t,r,a){if(!(!this._map||a&&a.getAttribute("src")===B))return ti.prototype._tileReady.call(this,t,r,a)}});function No(t,r){return new Le(t,r)}var jo=Le.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,r){this._url=t;var a=s({},this.defaultWmsParams);for(var u in r)u in this.options||(a[u]=r[u]);r=C(this,r);var p=r.detectRetina&&H.retina?2:1,g=this.getTileSize();a.width=g.x*p,a.height=g.y*p,this.wmsParams=a},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var r=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[r]=this._crs.code,Le.prototype.onAdd.call(this,t)},getTileUrl:function(t){var r=this._tileCoordsToNwSe(t),a=this._crs,u=J(a.project(r[0]),a.project(r[1])),p=u.min,g=u.max,P=(this._wmsVersion>=1.3&&this._crs===Ao?[p.y,p.x,g.y,g.x]:[p.x,p.y,g.x,g.y]).join(","),D=Le.prototype.getTileUrl.call(this,t);return D+S(this.wmsParams,D,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+P},setParams:function(t,r){return s(this.wmsParams,t),r||this.redraw(),this}});function Dl(t,r){return new jo(t,r)}Le.WMS=jo,No.wms=Dl;var $t=Bt.extend({options:{padding:.1},initialize:function(t){C(this,t),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&et(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,r){var a=this._map.getZoomScale(r,this._zoom),u=this._map.getSize().multiplyBy(.5+this.options.padding),p=this._map.project(this._center,r),g=u.multiplyBy(-a).add(p).subtract(this._map._getNewPixelOrigin(t,r));H.any3d?ae(this._container,g,a):_t(this._container,g)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,r=this._map.getSize(),a=this._map.containerPointToLayerPoint(r.multiplyBy(-t)).round();this._bounds=new tt(a,a.add(r.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Wo=$t.extend({options:{tolerance:0},getEvents:function(){var t=$t.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){$t.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Q(t,"mousemove",this._onMouseMove,this),Q(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Q(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){G(this._redrawRequest),delete this._ctx,ct(this._container),lt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var r in this._layers)t=this._layers[r],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){$t.prototype._update.call(this);var t=this._bounds,r=this._container,a=t.getSize(),u=H.retina?2:1;_t(r,t.min),r.width=u*a.x,r.height=u*a.y,r.style.width=a.x+"px",r.style.height=a.y+"px",H.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){$t.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[d(t)]=t;var r=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=r),this._drawLast=r,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var r=t._order,a=r.next,u=r.prev;a?a.prev=u:this._drawLast=u,u?u.next=a:this._drawFirst=a,delete t._order,delete this._layers[d(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var r=t.options.dashArray.split(/[, ]+/),a=[],u,p;for(p=0;p<r.length;p++){if(u=Number(r[p]),isNaN(u))return;a.push(u)}t.options._dashArray=a}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||Y(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var r=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new tt,this._redrawBounds.extend(t._pxBounds.min.subtract([r,r])),this._redrawBounds.extend(t._pxBounds.max.add([r,r]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var r=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,r.x,r.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,r=this._redrawBounds;if(this._ctx.save(),r){var a=r.getSize();this._ctx.beginPath(),this._ctx.rect(r.min.x,r.min.y,a.x,a.y),this._ctx.clip()}this._drawing=!0;for(var u=this._drawFirst;u;u=u.next)t=u.layer,(!r||t._pxBounds&&t._pxBounds.intersects(r))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,r){if(this._drawing){var a,u,p,g,P=t._parts,D=P.length,A=this._ctx;if(D){for(A.beginPath(),a=0;a<D;a++){for(u=0,p=P[a].length;u<p;u++)g=P[a][u],A[u?"lineTo":"moveTo"](g.x,g.y);r&&A.closePath()}this._fillStroke(A,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var r=t._point,a=this._ctx,u=Math.max(Math.round(t._radius),1),p=(Math.max(Math.round(t._radiusY),1)||u)/u;p!==1&&(a.save(),a.scale(1,p)),a.beginPath(),a.arc(r.x,r.y/p,u,0,Math.PI*2,!1),p!==1&&a.restore(),this._fillStroke(a,t)}},_fillStroke:function(t,r){var a=r.options;a.fill&&(t.globalAlpha=a.fillOpacity,t.fillStyle=a.fillColor||a.color,t.fill(a.fillRule||"evenodd")),a.stroke&&a.weight!==0&&(t.setLineDash&&t.setLineDash(r.options&&r.options._dashArray||[]),t.globalAlpha=a.opacity,t.lineWidth=a.weight,t.strokeStyle=a.color,t.lineCap=a.lineCap,t.lineJoin=a.lineJoin,t.stroke())},_onClick:function(t){for(var r=this._map.mouseEventToLayerPoint(t),a,u,p=this._drawFirst;p;p=p.next)a=p.layer,a.options.interactive&&a._containsPoint(r)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(a))&&(u=a);this._fireEvent(u?[u]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var r=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,r)}},_handleMouseOut:function(t){var r=this._hoveredLayer;r&&(ft(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,r){if(!this._mouseHoverThrottled){for(var a,u,p=this._drawFirst;p;p=p.next)a=p.layer,a.options.interactive&&a._containsPoint(r)&&(u=a);u!==this._hoveredLayer&&(this._handleMouseOut(t),u&&(et(this._container,"leaflet-interactive"),this._fireEvent([u],t,"mouseover"),this._hoveredLayer=u)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,r,a){this._map._fireDOMEvent(r,a||r.type,t)},_bringToFront:function(t){var r=t._order;if(r){var a=r.next,u=r.prev;if(a)a.prev=u;else return;u?u.next=a:a&&(this._drawFirst=a),r.prev=this._drawLast,this._drawLast.next=r,r.next=null,this._drawLast=r,this._requestRedraw(t)}},_bringToBack:function(t){var r=t._order;if(r){var a=r.next,u=r.prev;if(u)u.next=a;else return;a?a.prev=u:u&&(this._drawLast=u),r.prev=null,r.next=this._drawFirst,this._drawFirst.prev=r,this._drawFirst=r,this._requestRedraw(t)}}});function Uo(t){return H.canvas?new Wo(t):null}var ei=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),zl={_initContainer:function(){this._container=rt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||($t.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var r=t._container=ei("shape");et(r,"leaflet-vml-shape "+(this.options.className||"")),r.coordsize="1 1",t._path=ei("path"),r.appendChild(t._path),this._updateStyle(t),this._layers[d(t)]=t},_addPath:function(t){var r=t._container;this._container.appendChild(r),t.options.interactive&&t.addInteractiveTarget(r)},_removePath:function(t){var r=t._container;ct(r),t.removeInteractiveTarget(r),delete this._layers[d(t)]},_updateStyle:function(t){var r=t._stroke,a=t._fill,u=t.options,p=t._container;p.stroked=!!u.stroke,p.filled=!!u.fill,u.stroke?(r||(r=t._stroke=ei("stroke")),p.appendChild(r),r.weight=u.weight+"px",r.color=u.color,r.opacity=u.opacity,u.dashArray?r.dashStyle=M(u.dashArray)?u.dashArray.join(" "):u.dashArray.replace(/( *, *)/g," "):r.dashStyle="",r.endcap=u.lineCap.replace("butt","flat"),r.joinstyle=u.lineJoin):r&&(p.removeChild(r),t._stroke=null),u.fill?(a||(a=t._fill=ei("fill")),p.appendChild(a),a.color=u.fillColor||u.color,a.opacity=u.fillOpacity):a&&(p.removeChild(a),t._fill=null)},_updateCircle:function(t){var r=t._point.round(),a=Math.round(t._radius),u=Math.round(t._radiusY||a);this._setPath(t,t._empty()?"M0 0":"AL "+r.x+","+r.y+" "+a+","+u+" 0,"+65535*360)},_setPath:function(t,r){t._path.v=r},_bringToFront:function(t){ye(t._container)},_bringToBack:function(t){we(t._container)}},Hi=H.vml?ei:Xr,ii=$t.extend({_initContainer:function(){this._container=Hi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Hi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ct(this._container),lt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){$t.prototype._update.call(this);var t=this._bounds,r=t.getSize(),a=this._container;(!this._svgSize||!this._svgSize.equals(r))&&(this._svgSize=r,a.setAttribute("width",r.x),a.setAttribute("height",r.y)),_t(a,t.min),a.setAttribute("viewBox",[t.min.x,t.min.y,r.x,r.y].join(" ")),this.fire("update")}},_initPath:function(t){var r=t._path=Hi("path");t.options.className&&et(r,t.options.className),t.options.interactive&&et(r,"leaflet-interactive"),this._updateStyle(t),this._layers[d(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ct(t._path),t.removeInteractiveTarget(t._path),delete this._layers[d(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var r=t._path,a=t.options;r&&(a.stroke?(r.setAttribute("stroke",a.color),r.setAttribute("stroke-opacity",a.opacity),r.setAttribute("stroke-width",a.weight),r.setAttribute("stroke-linecap",a.lineCap),r.setAttribute("stroke-linejoin",a.lineJoin),a.dashArray?r.setAttribute("stroke-dasharray",a.dashArray):r.removeAttribute("stroke-dasharray"),a.dashOffset?r.setAttribute("stroke-dashoffset",a.dashOffset):r.removeAttribute("stroke-dashoffset")):r.setAttribute("stroke","none"),a.fill?(r.setAttribute("fill",a.fillColor||a.color),r.setAttribute("fill-opacity",a.fillOpacity),r.setAttribute("fill-rule",a.fillRule||"evenodd")):r.setAttribute("fill","none"))},_updatePoly:function(t,r){this._setPath(t,Hr(t._parts,r))},_updateCircle:function(t){var r=t._point,a=Math.max(Math.round(t._radius),1),u=Math.max(Math.round(t._radiusY),1)||a,p="a"+a+","+u+" 0 1,0 ",g=t._empty()?"M0 0":"M"+(r.x-a)+","+r.y+p+a*2+",0 "+p+-a*2+",0 ";this._setPath(t,g)},_setPath:function(t,r){t._path.setAttribute("d",r)},_bringToFront:function(t){ye(t._path)},_bringToBack:function(t){we(t._path)}});H.vml&&ii.include(zl);function Vo(t){return H.svg||H.vml?new ii(t):null}nt.include({getRenderer:function(t){var r=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return r||(r=this._renderer=this._createRenderer()),this.hasLayer(r)||this.addLayer(r),r},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var r=this._paneRenderers[t];return r===void 0&&(r=this._createRenderer({pane:t}),this._paneRenderers[t]=r),r},_createRenderer:function(t){return this.options.preferCanvas&&Uo(t)||Vo(t)}});var Yo=Pe.extend({initialize:function(t,r){Pe.prototype.initialize.call(this,this._boundsToLatLngs(t),r)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=ht(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Al(t,r){return new Yo(t,r)}ii.create=Hi,ii.pointsToPath=Hr,qt.geometryToLayer=Ni,qt.coordsToLatLng=tr,qt.coordsToLatLngs=ji,qt.latLngToCoords=er,qt.latLngsToCoords=Wi,qt.getFeature=Me,qt.asFeature=Ui,nt.mergeOptions({boxZoom:!0});var Xo=Wt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Q(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){lt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ct(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),He(),Zn(),this._startPoint=this._map.mouseEventToContainerPoint(t),Q(document,{contextmenu:ue,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=rt("div","leaflet-zoom-box",this._container),et(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var r=new tt(this._point,this._startPoint),a=r.getSize();_t(this._box,r.min),this._box.style.width=a.x+"px",this._box.style.height=a.y+"px"},_finish:function(){this._moved&&(ct(this._box),ft(this._container,"leaflet-crosshair")),Ge(),Rn(),lt(document,{contextmenu:ue,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var r=new ut(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(r).fire("boxzoomend",{boxZoomBounds:r})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});nt.addInitHook("addHandler","boxZoom",Xo),nt.mergeOptions({doubleClickZoom:!0});var Ho=Wt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var r=this._map,a=r.getZoom(),u=r.options.zoomDelta,p=t.originalEvent.shiftKey?a-u:a+u;r.options.doubleClickZoom==="center"?r.setZoom(p):r.setZoomAround(t.containerPoint,p)}});nt.addInitHook("addHandler","doubleClickZoom",Ho),nt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Go=Wt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new ne(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}et(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ft(this._map._container,"leaflet-grab"),ft(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var r=ht(this._map.options.maxBounds);this._offsetLimit=J(this._map.latLngToContainerPoint(r.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(r.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var r=this._lastTime=+new Date,a=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(a),this._times.push(r),this._prunePositions(r)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),r=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=r.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,r){return t-(t-r)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),r=this._offsetLimit;t.x<r.min.x&&(t.x=this._viscousLimit(t.x,r.min.x)),t.y<r.min.y&&(t.y=this._viscousLimit(t.y,r.min.y)),t.x>r.max.x&&(t.x=this._viscousLimit(t.x,r.max.x)),t.y>r.max.y&&(t.y=this._viscousLimit(t.y,r.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,r=Math.round(t/2),a=this._initialWorldOffset,u=this._draggable._newPos.x,p=(u-r+a)%t+r-a,g=(u+r+a)%t-r-a,P=Math.abs(p+a)<Math.abs(g+a)?p:g;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=P},_onDragEnd:function(t){var r=this._map,a=r.options,u=!a.inertia||t.noInertia||this._times.length<2;if(r.fire("dragend",t),u)r.fire("moveend");else{this._prunePositions(+new Date);var p=this._lastPos.subtract(this._positions[0]),g=(this._lastTime-this._times[0])/1e3,P=a.easeLinearity,D=p.multiplyBy(P/g),A=D.distanceTo([0,0]),Z=Math.min(a.inertiaMaxSpeed,A),j=D.multiplyBy(Z/A),K=Z/(a.inertiaDeceleration*P),it=j.multiplyBy(-K/2).round();!it.x&&!it.y?r.fire("moveend"):(it=r._limitOffset(it,r.options.maxBounds),Y(function(){r.panBy(it,{duration:K,easeLinearity:P,noMoveStart:!0,animate:!0})}))}}});nt.addInitHook("addHandler","dragging",Go),nt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var qo=Wt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Q(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),lt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,r=document.documentElement,a=t.scrollTop||r.scrollTop,u=t.scrollLeft||r.scrollLeft;this._map._container.focus(),window.scrollTo(u,a)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var r=this._panKeys={},a=this.keyCodes,u,p;for(u=0,p=a.left.length;u<p;u++)r[a.left[u]]=[-1*t,0];for(u=0,p=a.right.length;u<p;u++)r[a.right[u]]=[t,0];for(u=0,p=a.down.length;u<p;u++)r[a.down[u]]=[0,t];for(u=0,p=a.up.length;u<p;u++)r[a.up[u]]=[0,-1*t]},_setZoomDelta:function(t){var r=this._zoomKeys={},a=this.keyCodes,u,p;for(u=0,p=a.zoomIn.length;u<p;u++)r[a.zoomIn[u]]=t;for(u=0,p=a.zoomOut.length;u<p;u++)r[a.zoomOut[u]]=-t},_addHooks:function(){Q(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){lt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var r=t.keyCode,a=this._map,u;if(r in this._panKeys){if(!a._panAnim||!a._panAnim._inProgress)if(u=this._panKeys[r],t.shiftKey&&(u=N(u).multiplyBy(3)),a.options.maxBounds&&(u=a._limitOffset(N(u),a.options.maxBounds)),a.options.worldCopyJump){var p=a.wrapLatLng(a.unproject(a.project(a.getCenter()).add(u)));a.panTo(p)}else a.panBy(u)}else if(r in this._zoomKeys)a.setZoom(a.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[r]);else if(r===27&&a._popup&&a._popup.options.closeOnEscapeKey)a.closePopup();else return;ue(t)}}});nt.addInitHook("addHandler","keyboard",qo),nt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var $o=Wt.extend({addHooks:function(){Q(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){lt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var r=wo(t),a=this._map.options.wheelDebounceTime;this._delta+=r,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var u=Math.max(a-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),u),ue(t)},_performZoom:function(){var t=this._map,r=t.getZoom(),a=this._map.options.zoomSnap||0;t._stop();var u=this._delta/(this._map.options.wheelPxPerZoomLevel*4),p=4*Math.log(2/(1+Math.exp(-Math.abs(u))))/Math.LN2,g=a?Math.ceil(p/a)*a:p,P=t._limitZoom(r+(this._delta>0?g:-g))-r;this._delta=0,this._startTime=null,P&&(t.options.scrollWheelZoom==="center"?t.setZoom(r+P):t.setZoomAround(this._lastMousePos,r+P))}});nt.addInitHook("addHandler","scrollWheelZoom",$o);var Bl=600;nt.mergeOptions({tapHold:H.touchNative&&H.safari&&H.mobile,tapTolerance:15});var Ko=Wt.extend({addHooks:function(){Q(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){lt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var r=t.touches[0];this._startPos=this._newPos=new R(r.clientX,r.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(Q(document,"touchend",vt),Q(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",r))},this),Bl),Q(document,"touchend touchcancel contextmenu",this._cancel,this),Q(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){lt(document,"touchend",vt),lt(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),lt(document,"touchend touchcancel contextmenu",this._cancel,this),lt(document,"touchmove",this._onMove,this)},_onMove:function(t){var r=t.touches[0];this._newPos=new R(r.clientX,r.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,r){var a=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY});a._simulated=!0,r.target.dispatchEvent(a)}});nt.addInitHook("addHandler","tapHold",Ko),nt.mergeOptions({touchZoom:H.touch,bounceAtZoomLimits:!0});var Jo=Wt.extend({addHooks:function(){et(this._map._container,"leaflet-touch-zoom"),Q(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ft(this._map._container,"leaflet-touch-zoom"),lt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var r=this._map;if(!(!t.touches||t.touches.length!==2||r._animatingZoom||this._zooming)){var a=r.mouseEventToContainerPoint(t.touches[0]),u=r.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=r.getSize()._divideBy(2),this._startLatLng=r.containerPointToLatLng(this._centerPoint),r.options.touchZoom!=="center"&&(this._pinchStartLatLng=r.containerPointToLatLng(a.add(u)._divideBy(2))),this._startDist=a.distanceTo(u),this._startZoom=r.getZoom(),this._moved=!1,this._zooming=!0,r._stop(),Q(document,"touchmove",this._onTouchMove,this),Q(document,"touchend touchcancel",this._onTouchEnd,this),vt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var r=this._map,a=r.mouseEventToContainerPoint(t.touches[0]),u=r.mouseEventToContainerPoint(t.touches[1]),p=a.distanceTo(u)/this._startDist;if(this._zoom=r.getScaleZoom(p,this._startZoom),!r.options.bounceAtZoomLimits&&(this._zoom<r.getMinZoom()&&p<1||this._zoom>r.getMaxZoom()&&p>1)&&(this._zoom=r._limitZoom(this._zoom)),r.options.touchZoom==="center"){if(this._center=this._startLatLng,p===1)return}else{var g=a._add(u)._divideBy(2)._subtract(this._centerPoint);if(p===1&&g.x===0&&g.y===0)return;this._center=r.unproject(r.project(this._pinchStartLatLng,this._zoom).subtract(g),this._zoom)}this._moved||(r._moveStart(!0,!1),this._moved=!0),G(this._animRequest);var P=l(r._move,r,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Y(P,this,!0),vt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,G(this._animRequest),lt(document,"touchmove",this._onTouchMove,this),lt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});nt.addInitHook("addHandler","touchZoom",Jo),nt.BoxZoom=Xo,nt.DoubleClickZoom=Ho,nt.Drag=Go,nt.Keyboard=qo,nt.ScrollWheelZoom=$o,nt.TapHold=Ko,nt.TouchZoom=Jo,i.Bounds=tt,i.Browser=H,i.CRS=kt,i.Canvas=Wo,i.Circle=Qn,i.CircleMarker=Ri,i.Class=v,i.Control=At,i.DivIcon=Ro,i.DivOverlay=Ut,i.DomEvent=Jh,i.DomUtil=$h,i.Draggable=ne,i.Evented=U,i.FeatureGroup=Ht,i.GeoJSON=qt,i.GridLayer=ti,i.Handler=Wt,i.Icon=be,i.ImageOverlay=Vi,i.LatLng=ot,i.LatLngBounds=ut,i.Layer=Bt,i.LayerGroup=xe,i.LineUtil=ul,i.Map=nt,i.Marker=Zi,i.Mixin=ol,i.Path=re,i.Point=R,i.PolyUtil=cl,i.Polygon=Pe,i.Polyline=Gt,i.Popup=Yi,i.PosAnimation=xo,i.Projection=dl,i.Rectangle=Yo,i.Renderer=$t,i.SVG=ii,i.SVGOverlay=Zo,i.TileLayer=Le,i.Tooltip=Xi,i.Transformation=Cn,i.Util=X,i.VideoOverlay=Fo,i.bind=l,i.bounds=J,i.canvas=Uo,i.circle=wl,i.circleMarker=yl,i.control=Ke,i.divIcon=Sl,i.extend=s,i.featureGroup=ml,i.geoJSON=Oo,i.geoJson=Pl,i.gridLayer=Tl,i.icon=gl,i.imageOverlay=Ml,i.latLng=at,i.latLngBounds=ht,i.layerGroup=_l,i.map=Qh,i.marker=vl,i.point=N,i.polygon=bl,i.polyline=xl,i.popup=El,i.rectangle=Al,i.setOptions=C,i.stamp=d,i.svg=Vo,i.svgOverlay=Cl,i.tileLayer=No,i.tooltip=kl,i.transformation=Ue,i.version=o,i.videoOverlay=Ll;var Il=window.L;i.noConflict=function(){return window.L=Il,this},window.L=i})})(kr,kr.exports);var vh=kr.exports;const jf=Ql(vh),ia=Vl({__proto__:null,default:jf},[vh]),Wf="_button_6v7zm_1",Uf="_active_6v7zm_21",Vf="_hiddenOnMobile_6v7zm_26",mr={button:Wf,active:Uf,hiddenOnMobile:Vf};function Yf(n){return n.toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}const Xf=({mode:n,currentMode:e,changeMode:i,label:o,hiddenOnTouch:s})=>{let h=mr.button;return s&&(h=`${mr.hiddenOnMobile} ${h}`),e===n&&(h=`${mr.active} ${h}`),dt("button",{id:n,class:h,onClick:()=>{i(n)},children:o||Yf(n)})},Hf="_buttons_123u9_1",Gf={buttons:Hf},qf=({mode:n,changeMode:e})=>dt("div",{class:Gf.buttons,children:dt(Xf,{label:"Route Snap",mode:"routesnap",currentMode:n,changeMode:e})}),$f="_button_1ipkx_1",Kf="_geolocation_1ipkx_25",na={button:$f,geolocation:Kf},Jf="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TpSKVDnaQIpihOlkQFREnrUIRKoRaoVUHk+snNGlIUlwcBdeCgx+LVQcXZ10dXAVB8APE1cVJ0UVK/F9SaBHjwXE/3t173L0DhEaFqWbXGKBqlpFKxMVMdlUMvEJABCEMYUZmpj4nSUl4jq97+Ph6F+NZ3uf+HH25vMkAn0g8y3TDIt4gntq0dM77xGFWknPE58SjBl2Q+JHristvnIsOCzwzbKRT88RhYrHYwUoHs5KhEk8SR3OqRvlCxuUc5y3OaqXGWvfkLwzmtZVlrtMcRAKLWIIEEQpqKKMCCzFaNVJMpGg/7uGPOH6JXAq5ymDkWEAVKmTHD/4Hv7s1CxPjblIwDnS/2PbHMBDYBZp12/4+tu3mCeB/Bq60tr/aAKY/Sa+3tegRENoGLq7bmrIHXO4AA0+6bMiO5KcpFArA+xl9UxbovwV619zeWvs4fQDS1FXyBjg4BEaKlL3u8e6ezt7+PdPq7we7TnLE88ZFWQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+cCGg8jCU7Y7fkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAC+UlEQVRo3u2aS2gUQRCGv/jInmIQshiMrqAHPZoYEImC8UGEiJeYo0HBk7kpqBgkwYtgwAd684EPkHgIaDyIinoSs8IGvGi8RVYRl6BoIE90vVQ8NNUzszM9k7jsD3Wp7qrqf6d75q9mIT70AkXDeuMqtoQyQZxEqsqFSLFciJTF1qoF0oo/LWOLFlVAM9APvANmlDfWvM3InH6JqVosBDqBnMfC/SwHHFxIEk3AcAQCpg0DjUk/hRPArEMS8zYLHE9iuy0DbgRY0G9gWvFPy5hf/HWpFQuWAgM+CxgBjgEZD4mSkTkjPrkGpKZzXPEo+h5oM+b3BdBabcAHj7yXXZPo9Ch2FUhFEI0p4JpHfmdvtDQwrhT4A3Q7VL/dktOMGbd8XEvGLcsvdSoGGX/aUutmVBIbgDnLQfSDdkb6AsQ9UOLmgPVRiFxSkn4H6gLEZoAWwzIB4uqkhln3YlgSy4FCiC3lAtoWK8iaSkarkuwXsCIBIrXAhFJ/ZxgZ36r4ngiZuPFTapnYFYZIk+J7nqCmexZwTf8EoG1xW4Eaw5cDfihz7wF3Qy64Czik+FcCWwzfBJD16q2jWpRrnl4Xa6j07BUiMXZ7Byzn5gKwyfCfkwNv4qNYGGwUM9EMnDV8o8DJUjvIOyR4dxtQq90Os7XeKL79CRJpV3zDYZWv1l9vToBEo+UeILQCfqskfJgAkUdK3WyUhEcsneGeALEdwH3DOgLE7bV0ioejEEkBeSXpZ6A+hg6xHviixOUt9wKBvyMzQI/ibwCGFC0WBTXAY2C1MnZG1hL5W/PUonGywCoHT6Tech6LUtvZzWODpVssAl8tr8qgRNolh5b7m+UJRcIOYMpDgQ5JXx70gm67xNjyTcmcWLAPmPSR1KPAeWBQGRuUsVGfHJNSK1Zs89hmLqwgNRLBGuBVDCReSu7ElXMXMOaAwJjkWlBUA0flVVwqgazEVrv4VV1irUiMFmA3sM4Y/wS8AF7LpUf+f2jaKv9FqRCpEKkQcY+/z6ggfksbhSoAAAAASUVORK5CYII=",Qf=({setLocation:n})=>{let e=na.button;return dt("button",{id:"geolocation",class:e,onClick:()=>{console.log("clicked",navigator.geolocation),navigator.geolocation.getCurrentPosition(i=>{n([i.coords.longitude,i.coords.latitude])},i=>{alert("Error getting geolocation"),console.error(i)})},children:dt("img",{class:na.geolocation,src:Jf})})},tp=()=>{console.log("Home.tsx");const n={L:ia,id:"leaflet-map",lng:-.0969151,lat:51.532831,zoom:16},e=Du(null),[i,o]=ar(),[s,h]=ar("static"),[l,c]=ar();ps(()=>{fetch("./src/assets/network/network.json").then(f=>{f.json().then(m=>{c(m)})})},[]),ps(()=>{o(Nf(n))},[]);const d=Pn(()=>{if(i&&l){const f=Xc(i,ia,l);return f.start(),f}},[i,l]),_=zu(f=>{d&&(h(f),d.setMode(f))},[d]);return dt("div",{class:or.home,children:dt("div",{ref:e,class:or.map,id:n.id,children:[navigator.geolocation&&d?dt(Qf,{setLocation:f=>{i&&i.setView([f[1],f[0]],14)}}):null,d?dt(qf,{mode:s,changeMode:_}):null,d?null:dt("div",{class:or.loading,children:"Loading..."})]})})};console.log("App.tsx");const ep=()=>dt("div",{id:"app",children:[dt(Cu,{}),dt(tp,{})]});let pe,di;const ip=(n,e)=>{if(pe=void 0,e&&e.type==="click"){if(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button!==0)return n;const i=e.target.closest("a[href]"),o=i&&i.getAttribute("href");if(!i||i.origin!=location.origin||/^#/.test(o)||!/^(_?self)?$/i.test(i.target)||di&&(typeof di=="string"?!o.startsWith(di):!di.test(o)))return n;pe=!0,e.preventDefault(),e=i.href.replace(location.origin,"")}else typeof e=="string"?pe=!0:e&&e.url?(pe=!e.replace,e=e.url):e=location.pathname+location.search;return pe===!0?history.pushState(null,"",e):pe===!1&&history.replaceState(null,"",e),e};function yh(n){const[e,i]=Ta(ip,n.url||location.pathname+location.search);n.scope&&(di=n.scope);const o=pe===!0,s=Pn(()=>{const h=new URL(e,location.origin),l=h.pathname.replace(/\/+$/g,"")||"/";return{url:e,path:l,query:Object.fromEntries(h.searchParams),route:(c,d)=>i({url:c,replace:d}),wasPush:o}},[e]);return Tu(()=>(addEventListener("click",i),addEventListener("popstate",i),()=>{removeEventListener("click",i),removeEventListener("popstate",i)}),[]),Re(yh.ctx.Provider,{value:s},n.children)}Promise.resolve();yh.ctx=zr({});zr({});const ra=q.__b;q.__b=n=>{n.type&&n.type._forwarded&&n.ref&&(n.props.ref=n.ref,n.ref=null),ra&&ra(n)};const oa=q.__e;q.__e=(n,e,i)=>{if(n&&n.then){let o=e;for(;o=o.__;)if(o.__c&&o.__c.__c)return e.__e==null&&(e.__c.__z=[i.__e],e.__e=i.__e,e.__k=i.__k),e.__k||(e.__k=[]),o.__c.__c(n,e)}oa&&oa(n,e,i)};let sa;function np(n,e){if(typeof window>"u")return;let i=document.querySelector("script[type=isodata]");e=e||i&&i.parentNode||document.body,!sa&&i?Dr(n,e):Tr(n,e),sa=!0}typeof window<"u"&&np(dt(ep,{}),document.getElementById("app"));
